function $parcel$interopDefault(e){return e&&e.__esModule?e.default:e}var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequireb545;null==parcelRequire&&(parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var r=$parcel$inits[e];delete $parcel$inits[e];var t={id:e,exports:{}};return $parcel$modules[e]=t,r.call(t.exports,t,t.exports),t.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a},parcelRequire.register=function(e,r){$parcel$inits[e]=r},$parcel$global.parcelRequireb545=parcelRequire);var $ab2d90b3034c8719$exports={};parcelRequire.register("jrnC5",(function(module,exports){var __dirname=".parcel/workerpool",$d6KlF=parcelRequire("d6KlF"),root,factory;
/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 6.1.5
 * @date    2021-06-17
 *
 * @license
 * Copyright (C) 2014-2020 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
root="undefined"!=typeof self?self:this,factory=function(){return function(){var __webpack_modules__={345:function(e,r,t){var a=t(219),n=t(751),o=t(828),f=new(t(833));function s(e,r){"string"==typeof e?this.script=e||null:(this.script=null,r=e),this.workers=[],this.tasks=[],r=r||{},this.forkArgs=r.forkArgs||[],this.forkOpts=r.forkOpts||{},this.debugPortStart=r.debugPortStart||43210,this.nodeWorker=r.nodeWorker,this.workerType=r.workerType||r.nodeWorker||"auto",this.maxQueueSize=r.maxQueueSize||1/0,r&&"maxWorkers"in r?(function(e){if(!c(e)||!i(e)||e<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}(r.maxWorkers),this.maxWorkers=r.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),r&&"minWorkers"in r&&("max"===r.minWorkers?this.minWorkers=this.maxWorkers:(function(e){if(!c(e)||!i(e)||e<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}(r.minWorkers),this.minWorkers=r.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),"thread"===this.workerType&&n.ensureWorkerThreads()}function c(e){return"number"==typeof e}function i(e){return Math.round(e)==e}s.prototype.exec=function(e,r,t){if(r&&!Array.isArray(r))throw new TypeError('Array expected as argument "params"');if("string"==typeof e){var n=a.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var o=this.tasks,f={method:e,params:r,resolver:n,timeout:null,options:t};o.push(f);var s=n.promise.timeout;return n.promise.timeout=function(e){return-1!==o.indexOf(f)?(f.timeout=e,n.promise):s.call(n.promise,e)},this._next(),n.promise}if("function"==typeof e)return this.exec("run",[String(e),r]);throw new TypeError('Function or string expected as argument "method"')},s.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var e=this;return this.exec("methods").then((function(r){var t={};return r.forEach((function(r){t[r]=function(){return e.exec(r,Array.prototype.slice.call(arguments))}})),t}))},s.prototype._next=function(){if(this.tasks.length>0){var e=this._getWorker();if(e){var r=this,t=this.tasks.shift();if(t.resolver.promise.pending){var a=e.exec(t.method,t.params,t.resolver,t.options).then(r._boundNext).catch((function(){if(e.terminated)return r._removeWorker(e)})).then((function(){r._next()}));"number"==typeof t.timeout&&a.timeout(t.timeout)}else r._next()}}},s.prototype._getWorker=function(){for(var e=this.workers,r=0;r<e.length;r++){var t=e[r];if(!1===t.busy())return t}return e.length<this.maxWorkers?(t=this._createWorkerHandler(),e.push(t),t):null},s.prototype._removeWorker=function(e){return f.releasePort(e.debugPort),this._removeWorkerFromList(e),this._ensureMinWorkers(),new a((function(r,t){e.terminate(!1,(function(a){a?t(a):r(e)}))}))},s.prototype._removeWorkerFromList=function(e){var r=this.workers.indexOf(e);-1!==r&&this.workers.splice(r,1)},s.prototype.terminate=function(e,r){this.tasks.forEach((function(e){e.resolver.reject(new Error("Pool terminated"))})),this.tasks.length=0;var t=function(e){this._removeWorkerFromList(e)}.bind(this),n=[];return this.workers.slice().forEach((function(a){var o=a.terminateAndNotify(e,r).then(t);n.push(o)})),a.all(n)},s.prototype.stats=function(){var e=this.workers.length,r=this.workers.filter((function(e){return e.busy()})).length;return{totalWorkers:e,busyWorkers:r,idleWorkers:e-r,pendingTasks:this.tasks.length,activeTasks:r}},s.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var e=this.workers.length;e<this.minWorkers;e++)this.workers.push(this._createWorkerHandler())},s.prototype._createWorkerHandler=function(){return new n(this.script,{forkArgs:this.forkArgs,forkOpts:this.forkOpts,debugPort:f.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType})},e.exports=s},219:function(e){function r(e,o){var f=this;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new SyntaxError("Function parameter handler(resolve, reject) missing");var s=[],c=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var i=function(e,r){s.push(e),c.push(r)};this.then=function(e,a){return new r((function(r,n){var o=e?t(e,r,n):r,f=a?t(a,r,n):n;i(o,f)}),f)};var d=function(e){return f.resolved=!0,f.rejected=!1,f.pending=!1,s.forEach((function(r){r(e)})),i=function(r,t){r(e)},d=$=function(){},f},$=function(e){return f.resolved=!1,f.rejected=!0,f.pending=!1,c.forEach((function(r){r(e)})),i=function(r,t){t(e)},d=$=function(){},f};this.cancel=function(){return o?o.cancel():$(new a),f},this.timeout=function(e){if(o)o.timeout(e);else{var r=setTimeout((function(){$(new n("Promise timed out after "+e+" ms"))}),e);f.always((function(){clearTimeout(r)}))}return f},e((function(e){d(e)}),(function(e){$(e)}))}function t(e,r,t){return function(a){try{var n=e(a);n&&"function"==typeof n.then&&"function"==typeof n.catch?n.then(r,t):r(n)}catch(e){t(e)}}}function a(e){this.message=e||"promise cancelled",this.stack=(new Error).stack}function n(e){this.message=e||"timeout exceeded",this.stack=(new Error).stack}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.always=function(e){return this.then(e,e)},r.all=function(e){return new r((function(r,t){var a=e.length,n=[];a?e.forEach((function(e,o){e.then((function(e){n[o]=e,0==--a&&r(n)}),(function(e){a=0,t(e)}))})):r(n)}))},r.defer=function(){var e={};return e.promise=new r((function(r,t){e.resolve=r,e.reject=t})),e},a.prototype=new Error,a.prototype.constructor=Error,a.prototype.name="CancellationError",r.CancellationError=a,n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="TimeoutError",r.TimeoutError=n,e.exports=r},751:function(e,r,t){function a(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,s=!0,c=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return s=e.done,e},e:function(e){c=!0,f=e},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw f}}}}function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var f=t(219),s=t(828),c=t(397),i="__workerpool-terminate__";function d(){var e=l();if(!e)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return e}function $(){if("function"!=typeof Worker&&("object"!==("undefined"==typeof Worker?"undefined":o(Worker))||"function"!=typeof Worker.prototype.constructor))throw new Error("WorkerPool: Web Workers not supported")}function l(){try{return c("worker_threads")}catch(e){if("object"===o(e)&&null!==e&&"MODULE_NOT_FOUND"===e.code)return null;throw e}}function p(e,r){var t=new r(e);return t.isBrowserWorker=!0,t.on=function(e,r){this.addEventListener(e,(function(e){r(e.data)}))},t.send=function(e){this.postMessage(e)},t}function u(e,r){var t=new r.Worker(e,{stdout:!1,stderr:!1});return t.isWorkerThread=!0,t.send=function(e){this.postMessage(e)},t.kill=function(){return this.terminate(),!0},t.disconnect=function(){this.terminate()},t}function h(e,r,t){var a=t.fork(e,r.forkArgs,r.forkOpts);return a.isChildProcess=!0,a}function b(e){e=e||{};var r=$d6KlF.execArgv.join(" "),t=-1!==r.indexOf("--inspect"),a=-1!==r.indexOf("--debug-brk"),n=[];return t&&(n.push("--inspect="+e.debugPort),a&&n.push("--debug-brk")),$d6KlF.execArgv.forEach((function(e){e.indexOf("--max-old-space-size")>-1&&n.push(e)})),Object.assign({},e,{forkArgs:e.forkArgs,forkOpts:Object.assign({},e.forkOpts,{execArgv:(e.forkOpts&&e.forkOpts.execArgv||[]).concat(n)})})}function m(e,r){var n=this,o=r||{};function f(e){for(var r in n.terminated=!0,n.processing)void 0!==n.processing[r]&&n.processing[r].resolver.reject(e);n.processing=Object.create(null)}this.script=e||function(){if("browser"===s.platform){if("undefined"==typeof Blob)throw new Error("Blob not supported by the browser");if(!window.URL||"function"!=typeof window.URL.createObjectURL)throw new Error("URL.createObjectURL not supported by the browser");var e=new Blob([t(670)],{type:"text/javascript"});return window.URL.createObjectURL(e)}return __dirname+"/worker.js"}(),this.worker=function(e,r){if("web"===r.workerType)return $(),p(e,Worker);if("thread"===r.workerType)return u(e,t=d());if("process"!==r.workerType&&r.workerType){if("browser"===s.platform)return $(),p(e,Worker);var t=l();return t?u(e,t):h(e,b(r),c("child_process"))}return h(e,b(r),c("child_process"))}(this.script,o),this.debugPort=o.debugPort,e||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",(function(e){if(!n.terminated)if("string"==typeof e&&"ready"===e)n.worker.ready=!0,function(){var e,r=a(n.requestQueue.splice(0));try{for(r.s();!(e=r.n()).done;){var t=e.value;n.worker.send(t)}}catch(e){r.e(e)}finally{r.f()}}();else{var r=e.id,t=n.processing[r];void 0!==t&&(e.isEvent?t.options&&"function"==typeof t.options.on&&t.options.on(e.payload):(delete n.processing[r],!0===n.terminating&&n.terminate(),e.error?t.resolver.reject(function(e){for(var r=new Error(""),t=Object.keys(e),a=0;a<t.length;a++)r[t[a]]=e[t[a]];return r}(e.error)):t.resolver.resolve(e.result)))}}));var i=this.worker;this.worker.on("error",f),this.worker.on("exit",(function(e,r){var t="Workerpool Worker terminated Unexpectedly\n";t+="    exitCode: `"+e+"`\n",t+="    signalCode: `"+r+"`\n",t+="    workerpool.script: `"+n.script+"`\n",t+="    spawnArgs: `"+i.spawnargs+"`\n",t+="    spawnfile: `"+i.spawnfile+"`\n",t+="    stdout: `"+i.stdout+"`\n",t+="    stderr: `"+i.stderr+"`\n",f(new Error(t))})),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}m.prototype.methods=function(){return this.exec("methods")},m.prototype.exec=function(e,r,t,a){t||(t=f.defer());var n=++this.lastId;this.processing[n]={id:n,resolver:t,options:a};var o={id:n,method:e,params:r};this.terminated?t.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(o):this.requestQueue.push(o);var s=this;return t.promise.catch((function(e){if(e instanceof f.CancellationError||e instanceof f.TimeoutError)return delete s.processing[n],s.terminateAndNotify(!0).then((function(){throw e}),(function(e){throw e}));throw e}))},m.prototype.busy=function(){return Object.keys(this.processing).length>0},m.prototype.terminate=function(e,r){var t=this;if(e){for(var a in this.processing)void 0!==this.processing[a]&&this.processing[a].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if("function"==typeof r&&(this.terminationHandler=r),this.busy())this.terminating=!0;else{var n=function(e){if(t.terminated=!0,null!=t.worker&&t.worker.removeAllListeners&&t.worker.removeAllListeners("message"),t.worker=null,t.terminating=!1,t.terminationHandler)t.terminationHandler(e,t);else if(e)throw e};if(this.worker){if("function"==typeof this.worker.kill){if(this.worker.killed)return void n(new Error("worker already killed!"));if(this.worker.isChildProcess){var o=setTimeout((function(){t.worker.kill()}),1e3);this.worker.once("exit",(function(){clearTimeout(o),t.worker.killed=!0,n()})),this.worker.ready?this.worker.send(i):this.worker.requestQueue.push(i)}else this.worker.kill(),this.worker.killed=!0,n();return}if("function"!=typeof this.worker.terminate)throw new Error("Failed to terminate worker");this.worker.terminate(),this.worker.killed=!0}n()}},m.prototype.terminateAndNotify=function(e,r){var t=f.defer();return r&&(t.promise.timeout=r),this.terminate(e,(function(e,r){e?t.reject(e):t.resolve(r)})),t.promise},e.exports=m,e.exports._tryRequireWorkerThreads=l,e.exports._setupProcessWorker=h,e.exports._setupBrowserWorker=p,e.exports._setupWorkerThreadWorker=u,e.exports.ensureWorkerThreads=d},833:function(e){function r(){this.ports=Object.create(null),this.length=0}e.exports=r,r.prototype.nextAvailableStartingAt=function(e){for(;!0===this.ports[e];)e++;if(e>=65535)throw new Error("WorkerPool debug port limit reached: "+e+">= 65535");return this.ports[e]=!0,this.length++,e},r.prototype.releasePort=function(e){delete this.ports[e],this.length--}},828:function(e,r,t){var a=t(397),n=function(e){return void 0!==e&&null!=e.versions&&null!=e.versions.node};e.exports.isNode=n,e.exports.platform=void 0!==$d6KlF&&n($d6KlF)?"node":"browser";var o=function(e){try{return a(e)}catch(e){return null}}("worker_threads");e.exports.isMainThread="node"===e.exports.platform?(!o||o.isMainThread)&&!$d6KlF.connected:"undefined"!=typeof Window,e.exports.cpus="browser"===e.exports.platform?self.navigator.hardwareConcurrency:a("os").cpus().length},670:function(e){e.exports='!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== \'undefined\' ? require : function (module) { throw new Error(\'Module \\" + module + \\" not found.\') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error(\'Unknown method "\'+e.method+\'"\');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,__webpack_unused_export__=worker.emit}()}();'},397:function(module){var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \" + module + \" not found.') }");module.exports=requireFoolWebpack},744:function(__unused_webpack_module,exports){function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \" + module + \" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}};if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(e,r){addEventListener(e,(function(e){r(e.data)}))},worker.send=function(e){postMessage(e)};else{if(void 0===$d6KlF)throw new Error("Script must be executed as a worker");var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if("object"!==_typeof(e)||null===e||"MODULE_NOT_FOUND"!==e.code)throw e}if(WorkerThreads&&null!==WorkerThreads.parentPort){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=$d6KlF.on.bind($d6KlF),worker.send=$d6KlF.send.bind($d6KlF),worker.on("disconnect",(function(){$d6KlF.exit(1)})),worker.exit=$d6KlF.exit.bind($d6KlF)}function convertError(e){return Object.getOwnPropertyNames(e).reduce((function(r,t){return Object.defineProperty(r,t,{value:e[t],enumerable:!0})}),{})}function isPromise(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}worker.methods={},worker.methods.run=function(e,r){var t=new Function("return ("+e+").apply(null, arguments);");return t.apply(t,r)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",(function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error('Unknown method "'+e.method+'"');currentRequestId=e.id;var t=r.apply(r,e.params);isPromise(t)?t.then((function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null})).catch((function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null})):(worker.send({id:e.id,result:t,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}})),worker.register=function(e){if(e)for(var r in e)e.hasOwnProperty(r)&&(worker.methods[r]=e[r]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__,r=__webpack_require__(828);e.pool=function(e,r){return new(__webpack_require__(345))(e,r)},e.worker=function(e){var r=__webpack_require__(744);r.add(e)},e.workerEmit=function(e){__webpack_require__(744).emit(e)},e.Promise=__webpack_require__(219),e.platform=r.platform,e.isMainThread=r.isMainThread,e.cpus=r.cpus}(),__webpack_exports__}()},"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define("workerpool",[],factory):"object"==typeof exports?exports.workerpool=factory():root.workerpool=factory()})),parcelRequire.register("d6KlF",(function(e,r){var t,a,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{a="function"==typeof clearTimeout?clearTimeout:f}catch(e){a=f}}();var c,i=[],d=!1,$=-1;function l(){d&&c&&(d=!1,c.length?i=c.concat(i):$=-1,i.length&&p())}function p(){if(!d){var e=s(l);d=!0;for(var r=i.length;r;){for(c=i,i=[];++$<r;)c&&c[$].run();$=-1,r=i.length}c=null,d=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===f||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(r){try{return a.call(null,e)}catch(r){return a.call(this,e)}}}(e)}}function u(e,r){this.fun=e,this.array=r}function h(){}n.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];i.push(new u(e,r)),1!==i.length||d||s(p)},u.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}));var $jrnC5=parcelRequire("jrnC5");const $f1966b1ca856a682$var$LevelLimitAreaB=65,$f1966b1ca856a682$var$BlackPendant=66,$f1966b1ca856a682$var$CardDestruction=67,$f1966b1ca856a682$var$DifferentDimensionCapsule=68,$f1966b1ca856a682$var$RoyalDecree=69,$f1966b1ca856a682$var$AFeatherOfThePhoenix=70,$f1966b1ca856a682$var$GracefulCharity=71,$f1966b1ca856a682$var$HeavyStorm=72,$f1966b1ca856a682$var$CyberJar=74,$f1966b1ca856a682$var$PrematureBurial=75,$f1966b1ca856a682$var$RoyalMagicalLibrary=76,$f1966b1ca856a682$var$SpellbookOrganization=77,$f1966b1ca856a682$var$CardShuffle=78,$f1966b1ca856a682$var$ArchfiendsOath=79,$f1966b1ca856a682$var$PotOfGreed=80,$f1966b1ca856a682$var$ReversalQuiz=81,$f1966b1ca856a682$var$Reload=82,$f1966b1ca856a682$var$Sangan=83,$f1966b1ca856a682$var$GiantTrunade=84,$f1966b1ca856a682$var$UpstartGoblin=85,$f1966b1ca856a682$var$ConvulsionOfNature=86,$f1966b1ca856a682$var$ToonWorld=87,$f1966b1ca856a682$var$ToonTableOfContents=88,$f1966b1ca856a682$var$ThunderDragon=89,$f1966b1ca856a682$var$SpellReproduction=90,$f1966b1ca856a682$var$RoyalMagicalLibrary1=123,$f1966b1ca856a682$var$RoyalMagicalLibrary2=124,$f1966b1ca856a682$var$RoyalMagicalLibrary3=125,$f1966b1ca856a682$var$LIBRARY=[$f1966b1ca856a682$var$RoyalMagicalLibrary,$f1966b1ca856a682$var$RoyalMagicalLibrary1,$f1966b1ca856a682$var$RoyalMagicalLibrary2,$f1966b1ca856a682$var$RoyalMagicalLibrary3],$f1966b1ca856a682$var$ArchfiendsOath1=126,$f1966b1ca856a682$var$CardShuffle1=95,$f1966b1ca856a682$var$DifferentDimensionCapsule1=94,$f1966b1ca856a682$var$BlackPendant0=48,$f1966b1ca856a682$var$BlackPendant4=52,$f1966b1ca856a682$var$PrematureBurial0=53,$f1966b1ca856a682$var$PrematureBurial4=57,$f1966b1ca856a682$var$raw=e=>{if(e>=$f1966b1ca856a682$var$RoyalMagicalLibrary1&&e<=$f1966b1ca856a682$var$RoyalMagicalLibrary3)return $f1966b1ca856a682$var$RoyalMagicalLibrary;if(e===$f1966b1ca856a682$var$ArchfiendsOath1)return $f1966b1ca856a682$var$ArchfiendsOath;if(e>=$f1966b1ca856a682$var$BlackPendant0&&e<=$f1966b1ca856a682$var$BlackPendant4)return $f1966b1ca856a682$var$BlackPendant;if(e>=$f1966b1ca856a682$var$PrematureBurial0&&e<=$f1966b1ca856a682$var$PrematureBurial4)return $f1966b1ca856a682$var$PrematureBurial;if(e===$f1966b1ca856a682$var$DifferentDimensionCapsule1)return $f1966b1ca856a682$var$DifferentDimensionCapsule;if(e===$f1966b1ca856a682$var$CardShuffle1)return $f1966b1ca856a682$var$CardShuffle;throw new RangeError(`Invalid ID: ${e}`)},$f1966b1ca856a682$export$8be180ec26319f9f=new class{facedown(e){return!!e&&e>=97&&e<=122}toggle(e){return 32^(e>=65&&e<=90||e>=97&&e<=122?e:$f1966b1ca856a682$var$raw(e))}known(e){return $f1966b1ca856a682$export$8be180ec26319f9f.facedown(e)}get(e){return e>=65&&e<=90||e>=97&&e<=122?0:e>=$f1966b1ca856a682$var$RoyalMagicalLibrary1&&e<=$f1966b1ca856a682$var$RoyalMagicalLibrary3?e-$f1966b1ca856a682$var$RoyalMagicalLibrary1+1:e===$f1966b1ca856a682$var$ArchfiendsOath1||e===$f1966b1ca856a682$var$DifferentDimensionCapsule1||e===$f1966b1ca856a682$var$CardShuffle1?1:e>=$f1966b1ca856a682$var$BlackPendant0&&e<=$f1966b1ca856a682$var$PrematureBurial4?(e-$f1966b1ca856a682$var$BlackPendant0)%5:0}set(e,r){switch(e){case $f1966b1ca856a682$var$RoyalMagicalLibrary:return $f1966b1ca856a682$var$LIBRARY[r];case $f1966b1ca856a682$var$ArchfiendsOath:return r?$f1966b1ca856a682$var$ArchfiendsOath1:$f1966b1ca856a682$var$ArchfiendsOath;case $f1966b1ca856a682$var$BlackPendant:return $f1966b1ca856a682$var$BlackPendant0+r;case $f1966b1ca856a682$var$PrematureBurial:return $f1966b1ca856a682$var$PrematureBurial0+r;case $f1966b1ca856a682$var$DifferentDimensionCapsule:return r?$f1966b1ca856a682$var$DifferentDimensionCapsule:$f1966b1ca856a682$var$DifferentDimensionCapsule1;case $f1966b1ca856a682$var$CardShuffle:return r?$f1966b1ca856a682$var$CardShuffle1:$f1966b1ca856a682$var$CardShuffle}throw new RangeError(`Invalid ID: ${e}`)}id(e){return e>=65&&e<=90?e:e>=97&&e<=122?32^e:$f1966b1ca856a682$var$raw(e)}decode(e){return $3f407bfbaff96bd8$export$5f768699f44cc740[$f1966b1ca856a682$export$8be180ec26319f9f.id(e)]}},$f1966b1ca856a682$export$a06636add2a09fd8=new class{encode(e){let r="";for(const t of e)r+=$f1966b1ca856a682$export$a06636add2a09fd8.human(t);return r}decode(e){const r=[];let t="",a=!0;for(let n=0;n<e.length;n++)a&&t&&(r.push($f1966b1ca856a682$export$a06636add2a09fd8.unhuman(t)),t=""),t+=e[n],a=n<e.length-1&&"("===e[n+1]||("("===t[0]?")"===t[t.length-1]:e[n+1]>="A"&&e[n+1]<="Z");return t&&r.push($f1966b1ca856a682$export$a06636add2a09fd8.unhuman(t)),r}human(e){if(e>=65&&e<=90)return String.fromCharCode(e);if(e>=97&&e<=122)return`(${String.fromCharCode(32^e)})`;if(e>=$f1966b1ca856a682$var$RoyalMagicalLibrary1&&e<=$f1966b1ca856a682$var$RoyalMagicalLibrary3)return"L"+(e-$f1966b1ca856a682$var$RoyalMagicalLibrary1+1);if(e===$f1966b1ca856a682$var$ArchfiendsOath1)return"O1";if(e>=$f1966b1ca856a682$var$BlackPendant0&&e<=$f1966b1ca856a682$var$BlackPendant4)return"B"+(e-$f1966b1ca856a682$var$BlackPendant0);if(e>=$f1966b1ca856a682$var$PrematureBurial0&&e<=$f1966b1ca856a682$var$PrematureBurial4)return"K"+(e-$f1966b1ca856a682$var$PrematureBurial0);if(e===$f1966b1ca856a682$var$DifferentDimensionCapsule1)return"D1";if(e===$f1966b1ca856a682$var$CardShuffle1)return"N1";throw new RangeError(`Invalid ID: ${String.fromCharCode(e)}`)}unhuman(e){if(1===e.length)return e[0].charCodeAt(0);if(e.startsWith("("))return 32^e[1].charCodeAt(0);switch(e[0]){case"L":return $f1966b1ca856a682$var$LIBRARY[+e[1]];case"O":return $f1966b1ca856a682$var$ArchfiendsOath1;case"B":return $f1966b1ca856a682$var$BlackPendant0+ +e[1];case"K":return $f1966b1ca856a682$var$PrematureBurial0+ +e[1];case"D":return $f1966b1ca856a682$var$DifferentDimensionCapsule1;case"N":return $f1966b1ca856a682$var$CardShuffle1}throw new RangeError(`Invalid legacy ID: ${e}`)}pretty(e){const r=$f1966b1ca856a682$export$8be180ec26319f9f.decode(e),t=$f1966b1ca856a682$export$8be180ec26319f9f.get(e),a=t?`${r.name}:${t}`:r.name;return $f1966b1ca856a682$export$8be180ec26319f9f.facedown(e)?`(${a})`:a}names(e){if(!e.length)throw new RangeError;const r=e.map((e=>`"${$f1966b1ca856a682$export$8be180ec26319f9f.decode(e).name}"`));if(1===r.length)return r[0];const t=r.pop();return`${r.join(", ")} and ${t}`}},$f1966b1ca856a682$export$74a5f1f991c6ff51={LevelLimitAreaB:$f1966b1ca856a682$var$LevelLimitAreaB,BlackPendant:$f1966b1ca856a682$var$BlackPendant,CardDestruction:$f1966b1ca856a682$var$CardDestruction,DifferentDimensionCapsule:$f1966b1ca856a682$var$DifferentDimensionCapsule,RoyalDecree:$f1966b1ca856a682$var$RoyalDecree,AFeatherOfThePhoenix:$f1966b1ca856a682$var$AFeatherOfThePhoenix,GracefulCharity:$f1966b1ca856a682$var$GracefulCharity,HeavyStorm:$f1966b1ca856a682$var$HeavyStorm,CyberJar:$f1966b1ca856a682$var$CyberJar,PrematureBurial:$f1966b1ca856a682$var$PrematureBurial,RoyalMagicalLibrary:$f1966b1ca856a682$var$RoyalMagicalLibrary,SpellbookOrganization:$f1966b1ca856a682$var$SpellbookOrganization,CardShuffle:$f1966b1ca856a682$var$CardShuffle,ArchfiendsOath:$f1966b1ca856a682$var$ArchfiendsOath,PotOfGreed:$f1966b1ca856a682$var$PotOfGreed,ReversalQuiz:$f1966b1ca856a682$var$ReversalQuiz,Reload:$f1966b1ca856a682$var$Reload,Sangan:$f1966b1ca856a682$var$Sangan,GiantTrunade:$f1966b1ca856a682$var$GiantTrunade,UpstartGoblin:$f1966b1ca856a682$var$UpstartGoblin,ConvulsionOfNature:$f1966b1ca856a682$var$ConvulsionOfNature,ToonWorld:$f1966b1ca856a682$var$ToonWorld,ToonTableOfContents:$f1966b1ca856a682$var$ToonTableOfContents,ThunderDragon:$f1966b1ca856a682$var$ThunderDragon,SpellReproduction:$f1966b1ca856a682$var$SpellReproduction};class $782a6aad0330efbf$export$a92776769f460054{static seed(e=4){return e=61^e^e>>>16,e+=e<<3,e^=e>>>4,e=Math.imul(e,668265261),(e^=e>>>15)>>>0}constructor(e=$782a6aad0330efbf$export$a92776769f460054.seed()){this.seed=e}next(e,r){e&&(e=Math.floor(e)),r&&(r=Math.floor(r));let t=this.seed+=1831565813;t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),t=(t^t>>>14)>>>0;const a=t/2**32;return void 0===e?a:r?Math.floor(a*(r-e))+e:Math.floor(a*e)}shuffle(e){for(let r=e.length-1;r>0;r--){const t=Math.floor(this.next()*(r+1));[e[r],e[t]]=[e[t],e[r]]}return e}sample(e,r=!1){if(0===e.length)throw new RangeError("Cannot sample an empty array");const t=this.next(e.length),a=e[t];if(r&&(e[t]=e[e.length-1],e.pop()),void 0===a&&!Object.prototype.hasOwnProperty.call(e,t))throw new RangeError("Cannot sample a sparse array");return a}}const $5a5a9bfac008f7fc$var$LIMIT=Math.pow(2,24)-1;class $5a5a9bfac008f7fc$var$BigMap{constructor(){this.maps=[new Map]}get size(){let e=0;for(const r of this.maps)e+=r.size;return e}has(e){for(let r=this.maps.length-1;r>=0;r--)if(this.maps[r].has(e))return!0;return!1}get(e){for(let r=this.maps.length-1;r>=0;r--){const t=this.maps[r].get(e);if(void 0!==t)return t}}set(e,r){let t;for(const r of this.maps){if(r.has(e))return this;t=r}return t.size===$5a5a9bfac008f7fc$var$LIMIT&&(t=new Map,this.maps.push(t)),t.set(e,r),this}}function $5a5a9bfac008f7fc$export$5e4ee20a01d37dcd(e,r,t){const a=r&&r>$5a5a9bfac008f7fc$var$LIMIT?new $5a5a9bfac008f7fc$var$BigMap:new Map,n=$5a5a9bfac008f7fc$var$bestFirstProbe(e,a,[],r,t);return{visited:a.size,...n}}function $5a5a9bfac008f7fc$var$bestFirstProbe(e,r,t,a,n){if(r.set(e.key,1),t.push(e.key),a&&r.size>a)throw new RangeError;const o=e.state.next(n);for(const e of o){if(e.score>=1/0)return t.push(e.key),{path:t,trace:e.state.trace};if(!r.has(e.key)){const o=$5a5a9bfac008f7fc$var$bestFirstProbe(e,r,t.slice(),a,n);if(o)return o}}}var $5a5a9bfac008f7fc$var$Status,Status;function $5a5a9bfac008f7fc$export$956b17b249580664(e,r=5,t,a){if(r<=0)throw new RangeError(`Width B must be > 0 but is ${r}`);const n=t&&t>$5a5a9bfac008f7fc$var$LIMIT?new $5a5a9bfac008f7fc$var$BigMap:new Map;for(let o=0;n.get(e.key)!==$5a5a9bfac008f7fc$var$Status.COMPLETE;o++){const f=$5a5a9bfac008f7fc$var$bulbProbe(e,r,o,n,[],t,a);if(f)return{visited:n.size,...f}}return{visited:n.size}}function $5a5a9bfac008f7fc$var$bulbProbe(e,r,t,a,n,o,f){if(n.push(e.key),a.set(e.key,$5a5a9bfac008f7fc$var$Status.PARTIAL),o&&a.size>o)throw new RangeError;let s=e.state.next(f);const c=s.length,i=r>=1?r:Math.ceil(c*r);if(t){const d=s.splice(0,i);let $=0;for(const e of s){if(e.score>=1/0)return n.push(e.key),{path:n,trace:e.state.trace};if(a.get(e.key)===$5a5a9bfac008f7fc$var$Status.COMPLETE)$++;else{const s=$5a5a9bfac008f7fc$var$bulbProbe(e,r,t-1,a,n.slice(),o,f);if(s)return s;a.get(e.key)===$5a5a9bfac008f7fc$var$Status.COMPLETE&&$++}}for(const e of d){if(e.score>=1/0)return n.push(e.key),{path:n,trace:e.state.trace};if(a.get(e.key)===$5a5a9bfac008f7fc$var$Status.COMPLETE)$++;else{const s=$5a5a9bfac008f7fc$var$bulbProbe(e,r,t,a,n.slice(),o,f);if(s)return s;a.get(e.key)===$5a5a9bfac008f7fc$var$Status.COMPLETE&&$++}}$===c&&a.set(e.key,$5a5a9bfac008f7fc$var$Status.COMPLETE)}else{c>i&&(s=s.slice(0,i));let t=0;for(const e of s){if(e.score>=1/0)return n.push(e.key),{path:n,trace:e.state.trace};const s=a.get(e.key);if(s===$5a5a9bfac008f7fc$var$Status.COMPLETE)t++;else if(!s){const s=$5a5a9bfac008f7fc$var$bulbProbe(e,r,0,a,n.slice(),o,f);if(s)return s;a.get(e.key)===$5a5a9bfac008f7fc$var$Status.COMPLETE&&t++}}t===c&&a.set(e.key,$5a5a9bfac008f7fc$var$Status.COMPLETE)}}Status=$5a5a9bfac008f7fc$var$Status||($5a5a9bfac008f7fc$var$Status={}),Status[Status.PARTIAL=1]="PARTIAL",Status[Status.COMPLETE=2]="COMPLETE";var $42c830becbbf56a6$exports={};$42c830becbbf56a6$exports=JSON.parse('{"A Feather of the Phoenix":3,"Archfiend\'s Oath":3,"Black Pendant":1,"Card Destruction":1,"Card Shuffle":0,"Convulsion of Nature":3,"Cyber Jar":0,"Different Dimension Capsule":0,"Giant Trunade":3,"Graceful Charity":1,"Heavy Storm":0,"Level Limit - Area B":2,"Pot of Greed":1,"Premature Burial":1,"Reload":3,"Reversal Quiz":1,"Royal Decree":0,"Royal Magical Library":3,"Sangan":0,"Spell Reproduction":3,"Spellbook Organization":0,"Thunder Dragon":3,"Toon Table of Contents":3,"Toon World":2,"Upstart Goblin":2}');var $1941ff6a16e33f52$exports={};$1941ff6a16e33f52$exports=JSON.parse('{"facedown":0.9,"A Feather of the Phoenix":[0,1],"Archfiend\'s Oath":[0,1,1],"Black Pendant":[1,1],"Card Destruction":[0,1],"Card Shuffle":[0,1],"Convulsion of Nature":[0,1],"Cyber Jar":[0,0.3333333333333333],"Different Dimension Capsule":[0,1],"Giant Trunade":[1,1.5],"Graceful Charity":[0,1.5],"Heavy Storm":[0,0],"Level Limit - Area B":[0,0.3333333333333333],"Pot of Greed":[0,1.5],"Premature Burial":[0,1],"Reload":[0,1],"Reversal Quiz":[1,1],"Royal Decree":[0,0],"Royal Magical Library":[1.3,4,0.16666666666666666,0.3333333333333333],"Sangan":[0,0.3333333333333333],"Spell Reproduction":[0,1],"Spellbook Organization":[0,1],"Thunder Dragon":[0,1],"Toon Table of Contents":[0,1],"Toon World":[0,1],"Upstart Goblin":[0,1]}');const $9203c8d4d5baef73$var$DEBUG=!1,$9203c8d4d5baef73$var$LOCATIONS=["hand","monsters","spells","graveyard","deck"],$9203c8d4d5baef73$var$SEP=".",$9203c8d4d5baef73$var$SUMMONED_REVERSED="-",$9203c8d4d5baef73$var$SUMMONED="'",$9203c8d4d5baef73$var$REVERSED="!",$9203c8d4d5baef73$export$8eb3892b442747bd=["J","S","D","H","M","E"];class $9203c8d4d5baef73$export$7254cc27399e90bd{static decklist(e){const r=$f1966b1ca856a682$export$8be180ec26319f9f.decode($f1966b1ca856a682$export$a06636add2a09fd8.unhuman(e)).name,t=t=>{if("M"===e)switch(t){case"A Feather of the Phoenix":case"Card Shuffle":case"Spell Reproduction":return 2;case"Level Limit - Area B":return 0;case"Spellbook Organization":return 3}else if(t===r)return 1;return $parcel$interopDefault($42c830becbbf56a6$exports)[t]},a={};for(const e in $parcel$interopDefault($42c830becbbf56a6$exports))a[e]=t(e);return a}static create(e,r,t){const a=[];for(const r in e)for(let t=0;t<e[r];t++)a.push($3f407bfbaff96bd8$export$15a2497367026b23[r].id);r.shuffle(a);const n=new $9203c8d4d5baef73$export$7254cc27399e90bd(e,r,8e3,!1,[],[],[],[],[],a,!1,t?[]:void 0);return n.draw(6,!0),n}constructor(e,r,t,a,n,o,f,s,c,i,d,$){this.decklist=e,this.random=r,this.lifepoints=t,this.summoned=a,this.monsters=n,this.spells=o,this.hand=f,this.banished=s,this.graveyard=c,this.deck=i,this.reversed=d,this.trace=$}add(e,r){let t=0;for(;t<this[e].length;t++)if(this[e][t]>=r)return this[e].splice(t,0,r),t;return this[e].push(r),t}remove(e,r){return this[e].splice(r,1)[0]}madd(e){const r=this.add("monsters",e);for(let e=0;e<this.spells.length;e++){const t=$f1966b1ca856a682$export$8be180ec26319f9f.decode(this.spells[e]);if(!$f1966b1ca856a682$export$8be180ec26319f9f.facedown(this.spells[e])&&"Spell"===t.type&&"Equip"===t.subType){const a=$f1966b1ca856a682$export$8be180ec26319f9f.get(this.spells[e]);a>=r&&(this.spells[e]=$f1966b1ca856a682$export$8be180ec26319f9f.set(t.id,a+1))}}return r}mremove(e){const r=$f1966b1ca856a682$export$8be180ec26319f9f.id(this.remove("monsters",e)),t=[],a=[];for(const r of this.spells){const n=$f1966b1ca856a682$export$8be180ec26319f9f.decode(r);if($f1966b1ca856a682$export$8be180ec26319f9f.facedown(r)||"Spell"!==n.type||"Equip"!==n.subType)a.push(r);else{const o=$f1966b1ca856a682$export$8be180ec26319f9f.get(r);o>e?a.push($f1966b1ca856a682$export$8be180ec26319f9f.set(n.id,o-1)):o===e?t.push(n.id):a.push(r)}}return this.spells=a,{id:r,equips:t}}mset(e,r=0){const{id:t,equips:a}=this.mremove(e),n=this.madd($f1966b1ca856a682$export$8be180ec26319f9f.set(t,r));for(const e of a)this.add("spells",$f1966b1ca856a682$export$8be180ec26319f9f.set(e,n))}summon(e,r=!1){return this.summoned=this.summoned||!r,this.madd(e)}tribute(e,r){const{id:t,equips:a}=this.mremove(e);this.add("graveyard",t);for(const e of a)this.add("graveyard",e);a.length&&this.minor(`Sending ${$f1966b1ca856a682$export$a06636add2a09fd8.names(a)} equipped to "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(t).name}" to the Graveyard`);const n=this.remove("hand",r);return this.summon(n)}banish(){if(this.banished[0]&&$f1966b1ca856a682$export$8be180ec26319f9f.facedown(this.banished[0])){const e=this.remove("banished",0);this.add("banished",$f1966b1ca856a682$export$8be180ec26319f9f.id(e))}}major(e){this.trace&&this.trace.push(e)}minor(e){this.trace&&this.trace.push(`  ${e}`)}discard(e){let r=0;for(const t of e){const e=this.hand.splice(t-r++,1)[0];this.add("graveyard",e)}}inc(e){for(let r=0;r<this.monsters.length;r++){if(e===r)continue;const t=this.monsters[r],a=$f1966b1ca856a682$export$8be180ec26319f9f.decode(t);if($f1966b1ca856a682$export$8be180ec26319f9f.facedown(t)||"Royal Magical Library"!==a.name)continue;const n=$f1966b1ca856a682$export$8be180ec26319f9f.get(t);n<3&&(n?this.monsters[r]=$f1966b1ca856a682$export$8be180ec26319f9f.set(a.id,n+1):this.mset(r,n+1),this.minor(`Add Spell Counter to "${a.name}" (${n} -> ${n+1})`))}}shuffle(){this.deck=this.deck.map($f1966b1ca856a682$export$8be180ec26319f9f.id),this.random.shuffle(this.deck),this.minor("Shuffle Deck")}reverse(e=!1){if(e){if(!this.reversed)return;this.reversed=!1,this.deck.length&&(this.deck.reverse(),$f1966b1ca856a682$export$8be180ec26319f9f.known(this.deck[0])||(this.deck[0]=$f1966b1ca856a682$export$8be180ec26319f9f.toggle(this.deck[0])),this.minor(`Turn Deck back face-down ("${$f1966b1ca856a682$export$8be180ec26319f9f.decode(this.deck[0]).name}" now on bottom)`))}else{if(this.reversed)return;if(this.reversed=!0,this.deck.length){this.deck.reverse();const e=this.deck.length-1;$f1966b1ca856a682$export$8be180ec26319f9f.known(this.deck[e])||(this.deck[e]=$f1966b1ca856a682$export$8be180ec26319f9f.toggle(this.deck[e])),this.minor(`Turn Deck face-up ("${$f1966b1ca856a682$export$8be180ec26319f9f.decode(this.deck[e]).name}" now on top)`)}}}known(e=!1){if(!this.deck.length)return;const r=this.deck[this.deck.length-1],t=this.deck[0];if(this.reversed){if(!e)return r;if($f1966b1ca856a682$export$8be180ec26319f9f.known(t))return t}else if($f1966b1ca856a682$export$8be180ec26319f9f.known(r))return r;const a=new Set,n=new Set;for(const r of this.deck){if($f1966b1ca856a682$export$8be180ec26319f9f.known(r))continue;const t=$f1966b1ca856a682$export$8be180ec26319f9f.decode(r);if(a.add(t.id),n.add(t.type),!e&&a.size>1)return;if(e&&a.size>1&&n.size>1)return}return e&&this.reversed?t:r}search(e={}){const r={key:this.encode(!!this.trace),state:this,score:this.score()};return e.width?$5a5a9bfac008f7fc$export$956b17b249580664(r,e.width,e.cutoff,e.prescient):$5a5a9bfac008f7fc$export$5e4ee20a01d37dcd(r,e.cutoff,e.prescient)}static transition(e,r){const t=r.encode(!!r.trace);if(e.set(t,{key:t,state:r,score:r.score()}),$9203c8d4d5baef73$var$DEBUG){const e=$9203c8d4d5baef73$export$7254cc27399e90bd.verify(r);if(e.length){const t=r.trace?`\n\n${r.trace.join("\n")}\n`:"";throw new Error(`INVALID STATE ${r.encode()}:\n\n${e.join("\n")}${t}`)}}}allowed(e,r=!1){return!(!e&&!this.reversed&&this.deck.length)||!r&&!$f1966b1ca856a682$export$8be180ec26319f9f.known(this.deck[this.deck.length-1])}next(e=!0){if(this.lifepoints<=0)return[];const r=new Map;for(let e=0;e<this.monsters.length;e++){const t=this.monsters[e],a=$f1966b1ca856a682$export$8be180ec26319f9f.decode(t);if(a.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.RoyalMagicalLibrary&&(!$f1966b1ca856a682$export$8be180ec26319f9f.facedown(t)&&3===$f1966b1ca856a682$export$8be180ec26319f9f.get(t)&&this.deck.length)){const t=this.clone();t.major(`Remove 3 Spell Counters from "${a.name}"`),t.mset(e),t.draw(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(r,t)}}const t=new Set;for(let a=0;a<this.spells.length;a++){const n=this.spells[a];if(t.has(n))continue;t.add(n);const o=$f1966b1ca856a682$export$8be180ec26319f9f.decode(n);o.id!==$f1966b1ca856a682$export$74a5f1f991c6ff51.ReversalQuiz&&($f1966b1ca856a682$export$8be180ec26319f9f.facedown(n)?o.play(this,"spells",a,r,o,e):o.id!==$f1966b1ca856a682$export$74a5f1f991c6ff51.ArchfiendsOath||$f1966b1ca856a682$export$8be180ec26319f9f.get(n)?o.id!==$f1966b1ca856a682$export$74a5f1f991c6ff51.CardShuffle||$f1966b1ca856a682$export$8be180ec26319f9f.get(n)||o.play(this,"spells",a,r,o,e):$3f407bfbaff96bd8$export$946abfc123082306(this,"spells",a,r,o,e))}const a=new Set;for(let t=0;t<this.hand.length;t++){const n=this.hand[t];if(a.has(n))continue;a.add(n);const o=$f1966b1ca856a682$export$8be180ec26319f9f.decode(n);if(n!==$f1966b1ca856a682$export$74a5f1f991c6ff51.ReversalQuiz)if(n===$f1966b1ca856a682$export$74a5f1f991c6ff51.ThunderDragon){if(this.allowed(e)){const a=[];for(let e=0;e<this.deck.length&&a.length<2;e++)$f1966b1ca856a682$export$8be180ec26319f9f.id(this.deck[e])===$f1966b1ca856a682$export$74a5f1f991c6ff51.ThunderDragon&&a.push(e);if(2===a.length){const e=this.clone();e.major(`Discard "${o.name}"`),e.minor(`Add 2 "${o.name}" from Deck to hand`),e.remove("hand",t),e.add("graveyard",o.id),e.add("hand",$f1966b1ca856a682$export$8be180ec26319f9f.id(e.deck.splice(a[0],1)[0])),e.add("hand",$f1966b1ca856a682$export$8be180ec26319f9f.id(e.deck.splice(a[1]-1,1)[0])),e.shuffle(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(r,e)}if(a.length){const e=this.clone();e.major(`Discard "${o.name}"`),e.minor(`Add "${o.name}" from Deck to hand`),e.remove("hand",t),e.add("graveyard",o.id),e.add("hand",$f1966b1ca856a682$export$8be180ec26319f9f.id(e.deck.splice(a[0],1)[0])),e.shuffle(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(r,e)}else if(this.allowed(e,!0)){const e=this.clone();e.major(`Discard "${o.name}"`),e.minor(`Fail to find "${o.name}" in Deck`),e.remove("hand",t),e.add("graveyard",o.id),e.shuffle(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(r,e)}}this.monsters.length&&this.monsters.length<5&&!this.summoned&&o.play(this,"hand",t,r,o,e)}else("Monster"===o.type&&this.monsters.length<5&&!this.summoned||"Monster"!==o.type&&this.spells.length<5)&&o.play(this,"hand",t,r,o,e)}return Array.from(r.values()).sort($9203c8d4d5baef73$export$7254cc27399e90bd.compare)}static compare(e,r){return r.score-e.score||e.state.lifepoints-r.state.lifepoints||e.state.deck.length-r.state.deck.length||+$f1966b1ca856a682$export$8be180ec26319f9f.known(r.state.deck[r.state.deck.length-1])-+$f1966b1ca856a682$export$8be180ec26319f9f.known(e.state.deck[e.state.deck.length-1])||+r.state.reversed-+e.state.reversed}score(){if(this.end())return 1/0;let e=0;const r={active:0,total:0};for(const t of this.monsters){const a=$f1966b1ca856a682$export$8be180ec26319f9f.decode(t);a.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.RoyalMagicalLibrary&&(r.total++,$f1966b1ca856a682$export$8be180ec26319f9f.get(t)<3&&r.active++),e+=a.score(this,"monsters",t)}const t=r.active*$parcel$interopDefault($1941ff6a16e33f52$exports)["Royal Magical Library"][3]+r.total*$parcel$interopDefault($1941ff6a16e33f52$exports)["Royal Magical Library"][2];for(const r of this.spells){const a=$f1966b1ca856a682$export$8be180ec26319f9f.decode(r).score(this,"spells",r);a&&($f1966b1ca856a682$export$8be180ec26319f9f.facedown(r)?(e+=a*$parcel$interopDefault($1941ff6a16e33f52$exports).facedown,e+=t):e+=a)}const a=this.spells.length<5;for(const r of this.hand){const n=$f1966b1ca856a682$export$8be180ec26319f9f.decode(r);("Monster"===n.type||a)&&("Monster"===n.type&&this.summoned||(e+=n.score(this,"hand",r),"Spell"===n.type&&(e+=t)))}return e}end(e=!0){if(this.lifepoints>500)return!1;if(!this.monsters.length||!this.deck.length)return!1;const r=this.known(!0);if(!r)return!1;const t={pendant:!1,quiz:!1,feather:-1,upstart:-1};let a=-1;for(let e=0;e<this.hand.length;e++){const r=this.hand[e];r===$f1966b1ca856a682$export$74a5f1f991c6ff51.BlackPendant?t.pendant=!0:r===$f1966b1ca856a682$export$74a5f1f991c6ff51.ReversalQuiz?t.quiz=!0:r===$f1966b1ca856a682$export$74a5f1f991c6ff51.AFeatherOfThePhoenix?t.feather=e:r===$f1966b1ca856a682$export$74a5f1f991c6ff51.UpstartGoblin?t.upstart=e:a=e}if(t.pendant&&t.quiz&&this.spells.length<=3)return this.win(r,!0,{pendant:!1,quiz:!1});let n=!0;const o={pendant:!1,quiz:!1,feather:-1,upstart:-1};for(let e=0;e<this.spells.length;e++){const r=$f1966b1ca856a682$export$8be180ec26319f9f.id(this.spells[e]);r===$f1966b1ca856a682$export$74a5f1f991c6ff51.BlackPendant?(o.pendant=!0,$f1966b1ca856a682$export$8be180ec26319f9f.facedown(r)||(n=!1)):r===$f1966b1ca856a682$export$74a5f1f991c6ff51.ReversalQuiz?o.quiz=!0:r===$f1966b1ca856a682$export$74a5f1f991c6ff51.AFeatherOfThePhoenix?o.feather=e:r===$f1966b1ca856a682$export$74a5f1f991c6ff51.UpstartGoblin&&(o.upstart=e)}if(o.quiz&&o.pendant)return this.win(r,n,{pendant:!0,quiz:!0});if(t.pendant&&this.spells.length<=4&&o.quiz)return this.win(r,n,{pendant:!1,quiz:!0});if(t.quiz&&this.spells.length<=4&&o.pendant)return this.win(r,n,{pendant:!0,quiz:!1});if(!e)return!1;if(!(t.pendant||o.pendant||t.quiz||o.quiz))return!1;if(!(a>=0&&(t.feather>=0||o.feather>=0)))return!1;if(this.spells.length>5-(+t.pendant+ +t.quiz+ +(t.feather>=0)))return!1;const f=this.hand[a],s=t.pendant||o.pendant?$f1966b1ca856a682$export$74a5f1f991c6ff51.ReversalQuiz:$f1966b1ca856a682$export$74a5f1f991c6ff51.BlackPendant,c=this.graveyard.indexOf(s);if(c<0)return!1;if(t.upstart>=0||o.upstart>=0){if(t.feather>=0?this.feather("hand",t.feather,f,s,a,c):this.feather("spells",o.feather,f,s,a,c),t.upstart>=0){const e=+(a<t.upstart);this.remove("hand",t.feather>=0&&t.feather<t.upstart?t.upstart-1-e:t.upstart-e),this.major('Activate "Upstart Goblin"')}else this.remove("spells",o.feather>=0&&o.feather<o.upstart?o.upstart-1:o.upstart),this.major('Activate face-down "Upstart Goblin"');return this.add("graveyard",$f1966b1ca856a682$export$74a5f1f991c6ff51.UpstartGoblin),this.draw(),this.inc(),this.win(r,n,{pendant:o.pendant,quiz:o.quiz})}for(let e=0;e<this.monsters.length;e++){if($f1966b1ca856a682$export$8be180ec26319f9f.id(this.monsters[e])===$f1966b1ca856a682$export$74a5f1f991c6ff51.RoyalMagicalLibrary&&$f1966b1ca856a682$export$8be180ec26319f9f.get(this.monsters[e])>=2)return t.feather>=0?this.feather("hand",t.feather,f,s,a,c):this.feather("spells",o.feather,f,s,a,c),this.major('Remove 3 Spell Counters from "Royal Magical Library"'),this.mset(e),this.draw(),this.win(r,n,{pendant:o.pendant,quiz:o.quiz})}return!1}win(e,r,t){if(r){const e=$f1966b1ca856a682$export$8be180ec26319f9f.decode(this.monsters[0]);this.major(`${t.pendant?'Flip face-down "Black Pendant" and equip':'Equip "Black Pendant"'}  to "${e.name}"`)}this.major(`Activate${t.quiz?" face-down":""} "Reversal Quiz"`);const a=e=>{const r=$f1966b1ca856a682$export$8be180ec26319f9f.id(e);return r!==$f1966b1ca856a682$export$74a5f1f991c6ff51.ReversalQuiz&&r!==$f1966b1ca856a682$export$74a5f1f991c6ff51.BlackPendant},n=this.hand.filter(a);n.length&&this.minor(`Send ${$f1966b1ca856a682$export$a06636add2a09fd8.names(n)} from hand to Graveyard`);const o=this.monsters.filter(a),f=this.spells.filter(a);f.push($f1966b1ca856a682$export$74a5f1f991c6ff51.BlackPendant),this.minor(`Send ${$f1966b1ca856a682$export$a06636add2a09fd8.names([...o,...f])} from field to Graveyard`);for(const e of this.spells){if($f1966b1ca856a682$export$8be180ec26319f9f.decode(e).id===$f1966b1ca856a682$export$74a5f1f991c6ff51.ConvulsionOfNature){this.reverse(!0);break}}return this.minor(`Call "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(e).type}", reveal "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(this.deck[this.deck.length-1]).name}"`),this.major(`After exchanging Life Points, opponent has ${this.lifepoints} LP and then takes 500 damage from "Black Pendant" being sent from the field to the Graveyard`),!0}feather(e,r,t,a,n,o){this.major(`Activate${"spells"===e?" face-down":""} "A Feather of the Phoenix"`),this.minor(`Discard "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(t).name}"`),this.minor(`Return "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(a).name}" in the Graveyard to the top of the Deck`),this.remove("graveyard",o),"hand"===e?this.discard(r<n?[r,n]:[n,r]):(this.remove(e,r),this.add("graveyard",$f1966b1ca856a682$export$74a5f1f991c6ff51.AFeatherOfThePhoenix),this.add("graveyard",this.remove("hand",n))),this.deck.push($f1966b1ca856a682$export$8be180ec26319f9f.toggle(a)),this.inc()}draw(e=1,r=!1){if(e>this.deck.length)throw new Error("Deck out");const t=[];for(let r=0;r<e;r++){const e=$f1966b1ca856a682$export$8be180ec26319f9f.id(this.deck.pop());t.push(e),this.add("hand",e)}const a=this.deck.length-1;this.reversed&&this.deck.length&&!$f1966b1ca856a682$export$8be180ec26319f9f.known(this.deck[a])&&(this.deck[a]=$f1966b1ca856a682$export$8be180ec26319f9f.toggle(this.deck[a])),r?this.major(`Opening hand contains ${$f1966b1ca856a682$export$a06636add2a09fd8.names(t.sort($9203c8d4d5baef73$export$2336313834642df))}`):this.minor(`Draw ${$f1966b1ca856a682$export$a06636add2a09fd8.names(t)}`)}clone(){return new $9203c8d4d5baef73$export$7254cc27399e90bd(this.decklist,new $782a6aad0330efbf$export$a92776769f460054(this.random.seed),this.lifepoints,this.summoned,this.monsters.slice(),this.spells.slice(),this.hand.slice(),this.banished.slice(),this.graveyard.slice(),this.deck.slice(),this.reversed,this.trace?.slice())}debug(e,r=!0){return this.random.seed!==e.random.seed?"random":this.lifepoints!==e.lifepoints?"LP":this.summoned!==e.summoned?"summoned":this.reversed!==e.reversed?"reversed":$9203c8d4d5baef73$var$equals(this.monsters,e.monsters)?$9203c8d4d5baef73$var$equals(this.spells,e.spells)?$9203c8d4d5baef73$var$equals(this.hand,e.hand)?$9203c8d4d5baef73$var$equals(this.banished,e.banished)?$9203c8d4d5baef73$var$equals(this.graveyard,e.graveyard)?$9203c8d4d5baef73$var$equals(this.deck,e.deck)?!r||this.trace===e.trace||this.trace&&e.trace&&$9203c8d4d5baef73$var$equals(this.trace,e.trace)?"":"trace":"monsters":"graveyard":"banished":"hand":"spells":"monsters"}equals(e,r=!0){return this.random.seed===e.random.seed&&this.lifepoints===e.lifepoints&&this.summoned===e.summoned&&this.reversed===e.reversed&&$9203c8d4d5baef73$var$equals(this.monsters,e.monsters)&&$9203c8d4d5baef73$var$equals(this.spells,e.spells)&&$9203c8d4d5baef73$var$equals(this.hand,e.hand)&&$9203c8d4d5baef73$var$equals(this.banished,e.banished)&&$9203c8d4d5baef73$var$equals(this.graveyard,e.graveyard)&&$9203c8d4d5baef73$var$equals(this.deck,e.deck)&&(!r||this.trace===e.trace||this.trace&&e.trace&&$9203c8d4d5baef73$var$equals(this.trace,e.trace))}encode(e=!0){const r=e?$9203c8d4d5baef73$var$SEP:"";return[String.fromCharCode(...this.hand),String.fromCharCode(...this.monsters),String.fromCharCode(...this.spells),String.fromCharCode(...this.graveyard),String.fromCharCode(...this.deck),this.random.seed.toString(16)+(this.summoned&&this.reversed?$9203c8d4d5baef73$var$SUMMONED_REVERSED:this.summoned?$9203c8d4d5baef73$var$SUMMONED:this.reversed?$9203c8d4d5baef73$var$REVERSED:r)+this.lifepoints+String.fromCharCode(...this.banished)].join(r)}static decode(e,r){const t={hand:[],monsters:[],spells:[],graveyard:[],deck:[]};let a,n=0;for(a=0;a<e.length&&n<$9203c8d4d5baef73$var$LOCATIONS.length;a++)e[a]!==$9203c8d4d5baef73$var$SEP?t[$9203c8d4d5baef73$var$LOCATIONS[n]].push(e.charCodeAt(a)):n++;let o=a;for(;o<e.length&&e[o]>$9203c8d4d5baef73$var$SEP;)o++;const f=new $782a6aad0330efbf$export$a92776769f460054(parseInt(e.slice(a,o),16)),s=e[o]===$9203c8d4d5baef73$var$SUMMONED_REVERSED||e[o]===$9203c8d4d5baef73$var$SUMMONED,c=e[o]===$9203c8d4d5baef73$var$SUMMONED_REVERSED||e[o]===$9203c8d4d5baef73$var$REVERSED;a=o+1,o=e.indexOf($9203c8d4d5baef73$var$SEP,a);const i=+e.slice(a,o<0?void 0:o),d=[];if(o>=0)for(a=o+1;a<e.length;a++)d.push(e.charCodeAt(a));const $=r?t.hand.length?[`Opening hand contains ${$f1966b1ca856a682$export$a06636add2a09fd8.names(t.hand)}`]:[]:void 0;return new $9203c8d4d5baef73$export$7254cc27399e90bd(void 0,f,i,s,t.monsters,t.spells,t.hand,d,t.graveyard,t.deck,c,$)}toString(){return[this.random.seed.toString(16).toUpperCase(),this.lifepoints,+this.summoned,$f1966b1ca856a682$export$a06636add2a09fd8.encode(this.monsters),$f1966b1ca856a682$export$a06636add2a09fd8.encode(this.spells),$f1966b1ca856a682$export$a06636add2a09fd8.encode(this.hand),$f1966b1ca856a682$export$a06636add2a09fd8.encode(this.banished),$f1966b1ca856a682$export$a06636add2a09fd8.encode(this.graveyard),$f1966b1ca856a682$export$a06636add2a09fd8.encode(this.deck),+this.reversed].join("|")}static fromString(e,r){let t=0,a=e.indexOf("|");const n=new $782a6aad0330efbf$export$a92776769f460054(parseInt(e.slice(0,a),16));t=a+1,a=e.indexOf("|",t);const o=+e.slice(t,a);t=a+1;const f="1"===e[t];t+=2,a=e.indexOf("|",t);const s=$f1966b1ca856a682$export$a06636add2a09fd8.decode(e.slice(t,a));t=a+1,a=e.indexOf("|",t);const c=$f1966b1ca856a682$export$a06636add2a09fd8.decode(e.slice(t,a));t=a+1,a=e.indexOf("|",t);const i=$f1966b1ca856a682$export$a06636add2a09fd8.decode(e.slice(t,a));t=a+1,a=e.indexOf("|",t);const d=$f1966b1ca856a682$export$a06636add2a09fd8.decode(e.slice(t,a));t=a+1,a=e.indexOf("|",t);const $=$f1966b1ca856a682$export$a06636add2a09fd8.decode(e.slice(t,a));t=a+1,a=e.indexOf("|",t);const l=$f1966b1ca856a682$export$a06636add2a09fd8.decode(e.slice(t,a));t=a+1;const p="1"===e[t],u=r?i.length?[`Opening hand contains ${$f1966b1ca856a682$export$a06636add2a09fd8.names(i)}`]:[]:void 0;return new $9203c8d4d5baef73$export$7254cc27399e90bd(void 0,n,o,f,s,c,i,d,$,l,p,u)}static display(e,r){const t=[];let a=0;for(const n of r){n.startsWith("  ")||(e[a-1]&&t.push(`\n${e[a-1]}\n`),a++),t.push(n)}return t.join("\n")}static verify(e){const r=[],t=e=>e.map($f1966b1ca856a682$export$a06636add2a09fd8.pretty).join(", ");if((e.lifepoints>8e3||e.lifepoints<=0)&&r.push(`LP: ${e.lifepoints}`),e.monsters.length>5||!$9203c8d4d5baef73$var$equals(e.monsters.slice().sort($9203c8d4d5baef73$export$2336313834642df),e.monsters))r.push(`Monsters: ${t(e.monsters)}`);else for(const a of e.monsters){const n=$f1966b1ca856a682$export$8be180ec26319f9f.decode(a);if("Monster"!==n.type||($f1966b1ca856a682$export$8be180ec26319f9f.facedown(a)||n.id!==$f1966b1ca856a682$export$74a5f1f991c6ff51.RoyalMagicalLibrary)&&$f1966b1ca856a682$export$8be180ec26319f9f.get(a)||$f1966b1ca856a682$export$8be180ec26319f9f.get(a)>3){r.push(`Monsters: ${t(e.monsters)}`);break}}if(e.spells.length>5||!$9203c8d4d5baef73$var$equals(e.spells.slice().sort($9203c8d4d5baef73$export$2336313834642df),e.spells))r.push(`Spells: ${t(e.spells)}`);else for(const a of e.spells){const n=$f1966b1ca856a682$export$8be180ec26319f9f.decode(a),o=$f1966b1ca856a682$export$8be180ec26319f9f.facedown(a),f=$f1966b1ca856a682$export$8be180ec26319f9f.get(a);if("Monster"===n.type||o&&f||n.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.ArchfiendsOath&&f>1||!o&&!["Continuous","Equip"].includes(n.subType)&&n.id!==$f1966b1ca856a682$export$74a5f1f991c6ff51.DifferentDimensionCapsule){r.push(`Spells: ${t(e.spells)}`);break}if(!o&&"Spell"===n.type&&"Equip"===n.subType&&!e.monsters[f]){r.push(`Spells: ${t(e.spells)}`);break}}if(!e.hand.some((e=>e!==$f1966b1ca856a682$export$8be180ec26319f9f.id(e)))&&$9203c8d4d5baef73$var$equals(e.hand.slice().sort($9203c8d4d5baef73$export$2336313834642df),e.hand)||r.push(`Hand: ${t(e.hand)}`),(e.banished.length>40||!$9203c8d4d5baef73$var$equals(e.banished.slice().sort($9203c8d4d5baef73$export$2336313834642df),e.banished)||e.banished.filter($f1966b1ca856a682$export$8be180ec26319f9f.facedown).length>1)&&r.push(`Banished: ${t(e.banished)}`),(e.graveyard.length>40||e.graveyard.some((e=>e!==$f1966b1ca856a682$export$8be180ec26319f9f.id(e)))||!$9203c8d4d5baef73$var$equals(e.graveyard.slice().sort($9203c8d4d5baef73$export$2336313834642df),e.graveyard))&&r.push(`Graveyard: ${t(e.graveyard)}`),e.deck.length>40)r.push(`Deck: ${t(e.deck)}`);else{let a=0;for(const n of e.deck){const o=$f1966b1ca856a682$export$8be180ec26319f9f.known(n);if(o||0!==a||(a=1),o&&1===a&&(a=2),!o&&2===a){r.push(`Deck: ${t(e.deck)}`);break}}}const a=e.toString(),n=$9203c8d4d5baef73$export$7254cc27399e90bd.fromString(a);n.equals(e,!1)||r.push(`toString/fromString:\n${a} vs.\n${n.toString()}`);const o=e.encode(),f=$9203c8d4d5baef73$export$7254cc27399e90bd.decode(o);f.equals(e,!1)||r.push(`encode/decode:\n${o} vs.\n${f.encode()}`);const s=[];if(e.decklist){for(const r in e.decklist)for(let t=0;t<e.decklist[r];t++)s.push($3f407bfbaff96bd8$export$15a2497367026b23[r].id);s.sort($9203c8d4d5baef73$export$2336313834642df)}const c=[...e.monsters.map($f1966b1ca856a682$export$8be180ec26319f9f.id),...e.spells.map($f1966b1ca856a682$export$8be180ec26319f9f.id),...e.hand,...e.banished.map($f1966b1ca856a682$export$8be180ec26319f9f.id),...e.graveyard,...e.deck.map($f1966b1ca856a682$export$8be180ec26319f9f.id)].sort($9203c8d4d5baef73$export$2336313834642df);return s.length&&!$9203c8d4d5baef73$var$equals(s,c)?r.push(`Mismatch: ${s.length} vs. ${c.length}\n${$f1966b1ca856a682$export$a06636add2a09fd8.encode(s)}\n${$f1966b1ca856a682$export$a06636add2a09fd8.encode(c)}\n`):40!==c.length&&r.push(`Cards: ${c.length} (${$f1966b1ca856a682$export$a06636add2a09fd8.encode(c)})\n`),r}}function $9203c8d4d5baef73$var$equals(e,r){if(e.length!==r.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0}const $9203c8d4d5baef73$export$2336313834642df=(e,r)=>e-r,$3f407bfbaff96bd8$var$MONSTER=(e,r,t,a,n)=>{const o=e.clone();o.remove(r,t),o.major(`Summon "${n.name}" in Attack Position`),o.summon(n.id),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,o)},$3f407bfbaff96bd8$var$SPELL=e=>(r,t,a,n,o)=>{if(!o.can(r,t,a))return;const f=r.clone();f.remove(t,a),f.major(`Activate${"spells"===t?" face-down":""} "${o.name}"`),"Spell"===o.type&&"Continuous"===o.subType?f.add("spells",o.id):f.add("graveyard",o.id),e&&e(f),f.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(n,f)},$3f407bfbaff96bd8$export$946abfc123082306=(e,r,t,a,n)=>{if(e.lifepoints<=500||!e.deck.length)return;const o="hand"===r||$f1966b1ca856a682$export$8be180ec26319f9f.facedown(e[r][t]),f=o?`Activate${"spells"===r?" face-down":""} "${n.name}" then pay`:"Pay";if(e.known()){const s=e.clone();s.major(`${f} 500 LP (${s.lifepoints} -> ${s.lifepoints-500}) to activate effect of "${n.name}"`),s.minor(`Declare "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(s.deck[s.deck.length-1]).name}"`),s.lifepoints-=500,s.remove(r,t),s.add("spells",$f1966b1ca856a682$export$8be180ec26319f9f.set(n.id,1)),s.draw(),o&&s.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,s)}const s=e.clone();s.major(`${f} 500 LP (${s.lifepoints} -> ${s.lifepoints-500}) to activate effect of "${n.name}"`),s.minor('Declare "Blue-Eyes White Dragon"'),s.lifepoints-=500,s.remove(r,t),s.add("spells",$f1966b1ca856a682$export$8be180ec26319f9f.set(n.id,1));const c=$f1966b1ca856a682$export$8be180ec26319f9f.decode(s.deck.pop());s.minor(`Excavate "${c.name}"`),s.add("graveyard",c.id),o&&s.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,s)},$3f407bfbaff96bd8$var$CAN_RELOAD=(e,r)=>{const t="hand"===r?1:0;return e.hand.length>t&&e.deck.length>=e.hand.length-t},$3f407bfbaff96bd8$var$SANGAN=(e,r,t)=>{if(!e.allowed(t))return;const a=new Set;for(let t=0;t<e.deck.length;t++){const n=$f1966b1ca856a682$export$8be180ec26319f9f.id(e.deck[t]);if(a.has(n))continue;const o=$f1966b1ca856a682$export$8be180ec26319f9f.decode(n);if("Monster"===o.type&&o.atk<=1500){const a=e.clone();a.minor(`Add "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(n).name}" from Deck to hand after "Sangan" was sent to the Graveyard`),a.add("hand",$f1966b1ca856a682$export$8be180ec26319f9f.id(a.deck.splice(t,1)[0])),a.shuffle(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(r,a)}}if(!a.size){const t=e.clone();t.minor('Fail to find "Sangan" target in Deck'),t.shuffle(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(r,t)}},$3f407bfbaff96bd8$var$RELOAD=(e,r)=>(t,a,n,o,f,s)=>{if(!$3f407bfbaff96bd8$var$CAN_RELOAD(t,a))return;if(r&&!t.allowed(s))return;const c=t.clone();c.remove(a,n),c.add("graveyard",f.id);const i=c.hand.filter((e=>"Monster"!==$f1966b1ca856a682$export$8be180ec26319f9f.decode(e).type)),d="hand"===a?1:0,$=Math.min(5-t.spells.length-d,i.length,c.hand.length-1);for(let r=1;r<=$;r++)for(const t of $3f407bfbaff96bd8$var$isubsets(c.hand,r,(e=>"Monster"!==$f1966b1ca856a682$export$8be180ec26319f9f.decode(e).type))){const r=c.clone(),n=[];for(const[e,a]of t.entries()){const t=c.hand[a];n.push(t),r.add("spells",$f1966b1ca856a682$export$8be180ec26319f9f.toggle(t)),r.remove("hand",a-e)}r.major(`Set ${$f1966b1ca856a682$export$a06636add2a09fd8.names(n)} face-down then activate${"spells"===a?" face-down":""} "${f.name}"`);const s=r.hand.length;e(r),r.hand=[],r.draw(s),r.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(o,r)}c.major(`Activate${"spells"===a?" face-down":""} "${f.name}"`);const l=c.hand.length;e(c),c.hand=[],c.draw(l),c.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(o,c)},$3f407bfbaff96bd8$export$15a2497367026b23={"A Feather of the Phoenix":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.AFeatherOfThePhoenix,type:"Spell",subType:"Normal",text:"Discard 1 card, then target 1 card in your Graveyard; return that target to the top of your Deck.",can:(e,r)=>!!(e.graveyard.length&&e.hand.length>=("hand"===r?2:1)),play(e,r,t,a){if(!this.can(e,r))return;const n={discard:new Set,graveyard:new Set};for(let o=0;o<e.hand.length;o++){const f=e.hand[o];if(!n.discard.has(f)&&("hand"!==r||t!==o))for(let s=0;s<e.graveyard.length;s++){const c=e.graveyard[s];if(n.graveyard.has(c))continue;n.graveyard.add(c);const i=e.clone();i.feather(r,t,f,c,o,s),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,i)}}}},"Archfiend's Oath":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.ArchfiendsOath,type:"Spell",subType:"Continuous",text:"Once per turn: You can pay 500 Life Points, then declare 1 card name; excavate the top card of your Deck, and if it is the declared card, add it to your hand. Otherwise, send it to the Graveyard.",can:(e,r)=>"spells"!==r||!!(e.lifepoints>500&&e.deck.length),score(e,r,t){const a=$parcel$interopDefault($1941ff6a16e33f52$exports)["Archfiend's Oath"];return"spells"===r&&e.lifepoints>500&&e.deck.length&&!$f1966b1ca856a682$export$8be180ec26319f9f.get(t)?a[2]:"hand"===r?a[1]:a[0]},play(e,r,t,a,n,o){$3f407bfbaff96bd8$export$946abfc123082306(e,r,t,a,n,o);const f=e.clone();f.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),f.remove(r,t),f.add("spells",n.id),f.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,f)}},"Black Pendant":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.BlackPendant,type:"Spell",subType:"Equip",text:"The equipped monster gains 500 ATK. If this card is sent from the field to the Graveyard: Inflict 500 damage to your opponent.",can:e=>!!e.monsters.length,play(e,r,t,a,n){for(let o=0;o<e.monsters.length;o++){const f=e.clone();f.remove(r,t),f.major(`${"spells"===r?`Flip face-down "${n.name}" and equip`:`Equip "${n.name}"`} to "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(f.monsters[o]).name}"`),f.add("spells",$f1966b1ca856a682$export$8be180ec26319f9f.set(n.id,o)),f.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,f)}}},"Card Destruction":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.CardDestruction,type:"Spell",subType:"Normal",text:"Both players discard as many cards as possible from their hands, then each player draws the same number of cards they discarded.",can:$3f407bfbaff96bd8$var$CAN_RELOAD,play:$3f407bfbaff96bd8$var$RELOAD((e=>{for(const r of e.hand)e.add("graveyard",r);e.minor(`Discard ${$f1966b1ca856a682$export$a06636add2a09fd8.names(e.hand)}`)}))},"Card Shuffle":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.CardShuffle,type:"Spell",subType:"Continuous",text:"Once per turn: You can pay 300 Life Points; shuffle either your or your opponent's Deck",can:e=>e.lifepoints>300,play(e,r,t,a,n,o){if(!this.can(e,r)||!e.allowed(o))return;const f="spells"===r&&!$f1966b1ca856a682$export$8be180ec26319f9f.facedown(e[r][t]),s=e.clone();f?s.major(`Activate effect of "${n.name}"`):s.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),s.remove(r,t),s.add("spells",$f1966b1ca856a682$export$8be180ec26319f9f.set(n.id,1)),s.minor(`Pay 300 LP (${s.lifepoints} -> ${s.lifepoints-300})`),s.lifepoints-=300,s.shuffle(),f||s.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,s)}},"Convulsion of Nature":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.ConvulsionOfNature,type:"Spell",subType:"Continuous",text:"Both players must turn their Decks upside down.",can:e=>!!e.deck.length,score:e=>$parcel$interopDefault($1941ff6a16e33f52$exports)["Convulsion of Nature"][+(e.deck.length&&!e.reversed)],play:$3f407bfbaff96bd8$var$SPELL((e=>e.reverse()))},"Cyber Jar":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.CyberJar,type:"Monster",attribute:"Dark",level:3,atk:900,def:900,text:"Rock/Flip/Effect  FLIP: Destroy all monsters on the field, then both players reveal the top 5 cards from their Decks, then Special Summon all revealed Level 4 or lower monsters in face-up Attack Position or face-down Defense Position, also add any remaining cards to their hand. (If either player has less than 5 cards in their Deck, reveal as many as possible).",score:(e,r)=>$parcel$interopDefault($1941ff6a16e33f52$exports)["Cyber Jar"][+!(e.summoned||"hand"===r)],play:$3f407bfbaff96bd8$var$MONSTER},"Different Dimension Capsule":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.DifferentDimensionCapsule,type:"Spell",subType:"Normal",text:"After this card's activation, it remains on the field. When this card is activated: Banish 1 card from your Deck, face-down. During your second Standby Phase after this card's activation, destroy this card, and if you do, add that card to the hand.",can:e=>!!e.deck.length,play(e,r,t,a,n,o){if(!e.allowed(o))return;const f=new Set;for(let o=0;o<e.deck.length;o++){const s=e.deck[o];if(f.has(s))continue;const c=e.clone();c.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),c.remove(r,t),c.add("spells",n.id),c.minor(`Banish ${$f1966b1ca856a682$export$8be180ec26319f9f.decode(c.deck[o]).name} from the deck face-down`),c.add("banished",$f1966b1ca856a682$export$8be180ec26319f9f.toggle($f1966b1ca856a682$export$8be180ec26319f9f.id(c.deck.splice(o,1)[0]))),c.shuffle(),c.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,c)}}},"Giant Trunade":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.GiantTrunade,type:"Spell",subType:"Normal",text:"Return all Spells/Traps on the field to the hand.",can:(e,r)=>e.spells.length>("hand"===r?0:1),play:$3f407bfbaff96bd8$var$SPELL((e=>{for(const r of e.spells){const t=$f1966b1ca856a682$export$8be180ec26319f9f.decode(r);e.add("hand",t.id),$f1966b1ca856a682$export$8be180ec26319f9f.facedown(r)||(t.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.ConvulsionOfNature?e.reverse(!0):t.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.DifferentDimensionCapsule&&e.banish())}e.minor(`Return ${$f1966b1ca856a682$export$a06636add2a09fd8.names(e.spells)} to hand`),e.spells=[]}))},"Graceful Charity":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.GracefulCharity,type:"Spell",subType:"Normal",text:"Draw 3 cards, then discard 2 cards.",can:e=>e.deck.length>=3,play(e,r,t,a,n){if(!this.can(e,r))return;const o=e.clone();o.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),o.remove(r,t),o.add("graveyard",n.id),o.draw(3);for(const[e,r]of $3f407bfbaff96bd8$var$isubsets(o.hand,2)){const t=o.clone();t.minor(`Discard "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(o.hand[e]).name}" and "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(o.hand[r]).name}"`),t.discard([e,r]),t.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,t)}}},"Level Limit - Area B":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.LevelLimitAreaB,type:"Spell",subType:"Continuous",text:"Change all face-up Level 4 or higher monsters to Defense Position.",can:(e,r)=>"spells"!==r,play:$3f407bfbaff96bd8$var$SPELL()},"Pot of Greed":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.PotOfGreed,type:"Spell",subType:"Normal",text:"Draw 2 cards.",can:e=>e.deck.length>=2,play:$3f407bfbaff96bd8$var$SPELL((e=>e.draw(2)))},"Premature Burial":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.PrematureBurial,type:"Spell",subType:"Equip",text:"Activate this card by paying 800 Life Points, then target 1 monster in your Graveyard; Special Summon that target in Attack Position and equip it with this card. When this card is destroyed, destroy the equipped monster.",can(e){if(!e.graveyard.length||e.monsters.length>4||e.lifepoints<=800)return!1;for(const r of e.graveyard){if("Monster"===$f1966b1ca856a682$export$8be180ec26319f9f.decode(r).type)return!0}return!1},score(e){if(!e.graveyard.length||e.monsters.length>4||e.lifepoints<=800)return $parcel$interopDefault($1941ff6a16e33f52$exports)["Premature Burial"][0];let r=0;for(const t of e.graveyard){const a=$f1966b1ca856a682$export$8be180ec26319f9f.decode(t);"Monster"===a.type&&(r=Math.max(r,a.score(e,"monsters",a.id)))}return $parcel$interopDefault($1941ff6a16e33f52$exports)["Premature Burial"][1]+r},play(e,r,t,a,n){if(!e.graveyard.length||e.monsters.length>4||e.lifepoints<=800)return;const o=new Set;for(let f=0;f<e.graveyard.length;f++){const s=e.graveyard[f];if(o.has(s))continue;const c=$f1966b1ca856a682$export$8be180ec26319f9f.decode(s);if("Monster"===c.type){o.add(s);const i=e.clone();i.major(`Pay 800 LP (${i.lifepoints} -> ${i.lifepoints-800}) to activate effect of "${n.name}"`),i.minor(`Special Summon "${c.name}" in Attack Position from Graveyard`),i.lifepoints-=800,i.remove("graveyard",f);const d=i.summon(s,!0);i.remove(r,t),i.add("spells",$f1966b1ca856a682$export$8be180ec26319f9f.set(n.id,d)),i.inc(d),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,i)}}}},"Heavy Storm":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.HeavyStorm,type:"Spell",subType:"Normal",text:"Destroy all Spells/Traps on the field.",can:(e,r)=>e.spells.length>("hand"===r?0:1),play:$3f407bfbaff96bd8$var$SPELL((e=>{e.minor(`Send ${$f1966b1ca856a682$export$a06636add2a09fd8.names(e.spells)} to Graveyard`);for(const r of e.spells){const t=$f1966b1ca856a682$export$8be180ec26319f9f.decode(r);if(e.add("graveyard",t.id),!$f1966b1ca856a682$export$8be180ec26319f9f.facedown(r))if(t.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.ConvulsionOfNature)e.reverse(!0);else if(t.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.PrematureBurial){const t=e.mremove($f1966b1ca856a682$export$8be180ec26319f9f.get(r));e.add("graveyard",t.id),e.minor(`Sending "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(t.id).name}" to the Graveyard after its equipped "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(r).name}" was destroyed`)}else t.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.DifferentDimensionCapsule&&e.banish()}e.spells=[]}))},Reload:{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.Reload,type:"Spell",subType:"Quick-Play",text:"Send all cards from your hand to the Deck, then shuffle. Then, draw the same number of cards you added to the Deck.",can:$3f407bfbaff96bd8$var$CAN_RELOAD,play:$3f407bfbaff96bd8$var$RELOAD((e=>{e.deck.push(...e.hand),e.minor(`Return ${$f1966b1ca856a682$export$a06636add2a09fd8.names(e.hand)} to Deck`),e.shuffle()}),!0)},"Reversal Quiz":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.ReversalQuiz,type:"Spell",subType:"Normal",text:"Send all cards from your hand and your field to the Graveyard, then call Spell, Trap, or Monster; reveal the top card of your Deck. If you called it right, both players exchange Life Points.",can:e=>!(!e.deck.length||!(e.monsters.length||e.spells.length||e.hand.length)),play(e,r,t,a,n,o){if(!this.can(e,r))return;let f=!1;const s=e.clone();s.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),s.hand.length&&s.minor(`Send ${$f1966b1ca856a682$export$a06636add2a09fd8.names(s.hand)} from hand to Graveyard`),(s.monsters.length||s.spells.length)&&s.minor(`Send ${$f1966b1ca856a682$export$a06636add2a09fd8.names([...s.monsters,...s.spells])} from field to Graveyard`),s.graveyard.push(...s.hand),s.hand=[];for(const e of s.monsters){const r=$f1966b1ca856a682$export$8be180ec26319f9f.decode(e);r.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.Sangan&&(f=!0),s.graveyard.push(r.id)}s.monsters=[];for(const e of s.spells){const r=$f1966b1ca856a682$export$8be180ec26319f9f.decode(e);$f1966b1ca856a682$export$8be180ec26319f9f.facedown(e)||(r.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.ConvulsionOfNature?s.reverse(!0):r.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.DifferentDimensionCapsule&&s.banish()),s.graveyard.push(r.id)}s.spells=[],s.graveyard.sort($9203c8d4d5baef73$export$2336313834642df);const c=s.deck[s.deck.length-1];$f1966b1ca856a682$export$8be180ec26319f9f.known(c)||(s.deck[s.deck.length-1]=$f1966b1ca856a682$export$8be180ec26319f9f.toggle(c));const i=$f1966b1ca856a682$export$8be180ec26319f9f.decode(c);s.minor(`Call "${"Trap"===i.type?"Monster":"Trap"}", reveal "${i.name}"`),f?$3f407bfbaff96bd8$var$SANGAN(s,a,o):$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,s)}},"Royal Decree":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.RoyalDecree,type:"Trap",subType:"Continuous",text:"Negate all other Trap effects on the field.",can:(e,r)=>"hand"===r,play(e,r,t,a,n){const o=e.clone();o.remove(r,t),"hand"===r&&(o.major(`Set "${n.name}" face-down`),o.add("spells",$f1966b1ca856a682$export$8be180ec26319f9f.toggle(n.id))),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,o)}},"Royal Magical Library":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.RoyalMagicalLibrary,type:"Monster",attribute:"Light",level:4,atk:0,def:2e3,text:"Spellcaster/Effect  Each time a Spell is activated, place 1 Spell Counter on this card when that Spell resolves (max. 3). You can remove 3 Spell Counters from this card; draw 1 card.",score:(e,r)=>$parcel$interopDefault($1941ff6a16e33f52$exports)["Royal Magical Library"][+("monsters"===r)],play:$3f407bfbaff96bd8$var$MONSTER},Sangan:{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.Sangan,type:"Monster",attribute:"Dark",level:3,atk:1e3,def:600,text:"Fiend/Effect  If this card is sent from the field to the Graveyard: Add 1 monster with 1500 or less ATK from your Deck to your hand.",score:(e,r)=>$parcel$interopDefault($1941ff6a16e33f52$exports).Sangan[+!(e.summoned||"hand"===r)],play:$3f407bfbaff96bd8$var$MONSTER},"Spell Reproduction":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.SpellReproduction,type:"Spell",subType:"Normal",text:"Send 2 Spells from your hand to the Graveyard, then target 1 Spell in your Graveyard; add it to your hand.",can(e,r){const t=e.graveyard.filter((e=>"Spell"===$f1966b1ca856a682$export$8be180ec26319f9f.decode(e).type)).length,a=e.hand.filter((e=>"Spell"===$f1966b1ca856a682$export$8be180ec26319f9f.decode(e).type)).length>("hand"===r?2:1);return!(!t||!a)},score:(e,r)=>$parcel$interopDefault($1941ff6a16e33f52$exports)["Spell Reproduction"][+!!(e.graveyard.length&&e.hand.length>("hand"===r?2:1))],play(e,r,t,a,n){if(!(e.graveyard.length&&e.hand.length>("hand"===r?2:1)))return;let o;const f=new Set;for(let s=0;s<e.graveyard.length;s++){const c=e.graveyard[s];if(!f.has(c)&&"Spell"===$f1966b1ca856a682$export$8be180ec26319f9f.decode(c).type){if(f.add(c),!o){o=new Set;for(const[a,n]of $3f407bfbaff96bd8$var$isubsets(e.hand,2))("hand"!==r||t!==a&&t!==n)&&"Spell"===$f1966b1ca856a682$export$8be180ec26319f9f.decode(e.hand[a]).type&&"Spell"===$f1966b1ca856a682$export$8be180ec26319f9f.decode(e.hand[n]).type&&o.add([a,n]);if(!o.size)return}for(const[f,c]of o){const o=e.clone();o.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),o.minor(`Discard "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(o.hand[f]).name}" and "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(o.hand[c]).name}"`);const i=o.remove("graveyard",s);"hand"===r?o.discard([t,f,c].sort($9203c8d4d5baef73$export$2336313834642df)):(o.remove(r,t),o.add("graveyard",n.id),o.discard([f,c])),o.minor(`Add "${$f1966b1ca856a682$export$8be180ec26319f9f.decode(i).name}" in the Graveyard to hand`),o.add("hand",i),o.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,o)}}}}},"Spellbook Organization":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.SpellbookOrganization,type:"Spell",subType:"Quick-Play",text:"Look at the top 3 cards of your Deck, then return them to the top of the Deck in any order.",can:e=>e.deck.length>2,play(e,r,t,a,n){if(!this.can(e,r))return;const o=e.clone();o.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),o.remove(r,t),o.add("graveyard",n.id),o.minor(`Reveal ${$f1966b1ca856a682$export$a06636add2a09fd8.names(o.deck.slice(o.deck.length-3).reverse())}`);for(const[e,r,t]of $3f407bfbaff96bd8$var$PERMUTATIONS){const n=o.clone(),f=[n.deck[n.deck.length-e],n.deck[n.deck.length-r],n.deck[n.deck.length-t]];n.minor(`Return ${$f1966b1ca856a682$export$a06636add2a09fd8.names(f)} to the Deck`);for(let e=0;e<f.length;e++)n.deck[n.deck.length-1-e]=$f1966b1ca856a682$export$8be180ec26319f9f.facedown(f[e])?f[e]:$f1966b1ca856a682$export$8be180ec26319f9f.toggle(f[e]);n.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,n)}}},"Thunder Dragon":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.ThunderDragon,type:"Monster",attribute:"Light",level:5,atk:1600,def:1500,text:'Thunder/Effect  You can discard this card; add up to 2 "Thunder Dragon" from your Deck to your hand.',score:(e,r)=>$parcel$interopDefault($1941ff6a16e33f52$exports)["Thunder Dragon"][+(e.deck.length&&"hand"===r)],play(e,r,t,a,n,o){for(let r=0;r<e.monsters.length;r++){const f=e.clone(),s=$f1966b1ca856a682$export$8be180ec26319f9f.decode(e.monsters[r]);f.major(`Tribute "${s.name}" to Summon "${n.name}"`),f.tribute(r,t),s.id===$f1966b1ca856a682$export$74a5f1f991c6ff51.Sangan?$3f407bfbaff96bd8$var$SANGAN(f,a,o):$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,f)}}},"Toon Table of Contents":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.ToonTableOfContents,type:"Spell",subType:"Normal",text:'Add 1 "Toon" card from your Deck to your hand.',can:()=>!0,play(e,r,t,a,n,o){if(!e.allowed(o))return;const f=new Set;for(let o=0;o<e.deck.length;o++){const s=$f1966b1ca856a682$export$8be180ec26319f9f.decode(e.deck[o]);if(!f.has(s.id)&&s.name.startsWith("Toon")){f.add(s.id);const c=e.clone();c.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),c.minor(`Add "${s.name}" from Deck to hand`),c.remove(r,t),c.add("graveyard",n.id),c.add("hand",$f1966b1ca856a682$export$8be180ec26319f9f.id(c.deck.splice(o,1)[0])),c.shuffle(),c.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,c)}}if(!f.size&&e.allowed(o,!0)){const o=e.clone();o.major(`Activate${"spells"===r?" face-down":""} "${n.name}"`),o.minor('Fail to find "Toon" card in Deck'),o.remove(r,t),o.add("graveyard",n.id),o.shuffle(),o.inc(),$9203c8d4d5baef73$export$7254cc27399e90bd.transition(a,o)}}},"Toon World":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.ToonWorld,type:"Spell",subType:"Continuous",text:"Activate this card by paying 1000 Life Points.",can:e=>e.lifepoints>1e3,play:$3f407bfbaff96bd8$var$SPELL((e=>{e.minor(`Pay 1000 LP (${e.lifepoints} -> ${e.lifepoints-1e3})`),e.lifepoints-=1e3}))},"Upstart Goblin":{id:$f1966b1ca856a682$export$74a5f1f991c6ff51.UpstartGoblin,type:"Spell",subType:"Normal",text:"Draw 1 card, then your opponent gains 1000 Life Points.",can:e=>!!e.deck.length,play:$3f407bfbaff96bd8$var$SPELL((e=>e.draw()))}},$3f407bfbaff96bd8$export$5f768699f44cc740={};for(const e in $3f407bfbaff96bd8$export$15a2497367026b23){const r=$3f407bfbaff96bd8$export$15a2497367026b23[e],t="can"in r?(t,a)=>$parcel$interopDefault($1941ff6a16e33f52$exports)[e][+r.can(t,a)]:()=>0;$3f407bfbaff96bd8$export$5f768699f44cc740[r.id]={score:t,...r,name:e}}function $3f407bfbaff96bd8$var$subsets(e,r){if(r>e.length||r<=0)return[];if(r===e.length)return[e];if(1===r){const r=[];for(const t of e)r.push([t]);return r}const t=[];for(let a=0;a<e.length-r+1;a++){const n=e.slice(a,a+1),o=$3f407bfbaff96bd8$var$subsets(e.slice(a+1),r-1);for(const e of o)t.push(n.concat(e))}return t}function $3f407bfbaff96bd8$var$isubsets(e,r,t){const a=new Map,n=[];for(let o=0;o<e.length;o++){if(t&&!t(e[o]))continue;const f=a.get(e[o]);f&&f>=r||(a.set(e[o],(f||0)+1),n.push(o))}return $3f407bfbaff96bd8$var$subsets(n,r)}const $3f407bfbaff96bd8$var$PERMUTATIONS=[[1,2,3],[2,1,3],[3,1,2],[1,3,2],[2,3,1],[3,2,1]];$jrnC5.worker({search:(e,r,t,a=!1,n=0)=>{const o=$9203c8d4d5baef73$export$7254cc27399e90bd.decode(e);o.random=new $782a6aad0330efbf$export$a92776769f460054(r),o.shuffle();try{const e=o.search({cutoff:t,prescient:a,width:n});return"path"in e?e.path.length:0}catch(e){if(e instanceof RangeError)return-1;throw e}}});
//# sourceMappingURL=worker.863a7632.js.map
