var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequireb545;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequireb545=a),a("bXuNP").register(JSON.parse('{"jKx1T":"index.9ce837c9.js","9JOvB":"worker.0ff330b1.js","kpOvT":"index.2d0478db.js"}'));var r=a("ahpAG"),i=a("l7khe"),o=a("iPHaw");const d=5e3,c=6e4,l=/Worker(?: is)? terminated/;var s;s=a("kPq84").getBundleURL("jKx1T")+"../"+a("bXuNP").resolve("9JOvB");const h=(e,t,n=[],a=[])=>{t.appendChild(o.renderState(e,n,a));const r=o.createElement("div","wrapper"),d=o.createElement("details"),c=o.createElement("summary");let l=o.createElement("code"),s=o.createElement("pre");return s.textContent=e.toString(),l.appendChild(s),c.appendChild(l),d.appendChild(c),l=o.createElement("code"),s=o.createElement("pre"),s.textContent=e.next().map((({key:e,score:t})=>`${i.State.decode(e).toString()} = ${t.toFixed(2)}`)).join("\n"),l.appendChild(s),d.appendChild(l),r.appendChild(d),t.appendChild(r),t},p=(()=>{const e=(window.location.hash||window.location.search).slice(1),t=e=>i.Random.seed(e&&!isNaN(+e)?+e:~~(Math.random()*(2**31-1))),n=i.OPTIONS.includes(e[0])?i.State.create(i.State.decklist(e[0]),new i.Random(t(e.slice(1))),!0):i.State.create(i.State.decklist("S"),new i.Random(t(e)),!0);if(e)try{const t=i.State.decode(decodeURIComponent(e),!0);if(!i.State.verify(t).length)return t}catch{return n}return n})();console.log(`State: ${p.toString()} (${p.encode()})`);const f=document.getElementById("content");for(;f.firstChild;)f.removeChild(f.firstChild);const m=o.createElement("div","loader"),u=o.createElement("div","spinner");m.appendChild(u),f.appendChild(m),(async e=>{let t;const n=r.pool(new URL(s).pathname);let a=!1;const i=[],o=[],h=()=>{for(const e of o)e.pending&&e.cancel().catch(console.error)};let p;const f=new Promise((e=>{p=setTimeout((()=>{for(const e of i)(!t||t[3]&&e[3].length<t[3].length)&&(t=e);if(t)return h(),n.terminate().catch(console.error),e();a=!0}),d)}));try{for(const d of[.5,0,10,.25,5,.1,15])for(const s of[!1,!0]){if(t)continue;const p=`${s?"prescient":"non-prescient"} ${0===d?"best-first":"BULB"} search${d?` (width=${d})`:""}`,f=n.exec("solve",[e,1e7,s,d]).timeout(c).then((e=>{if(!t)return"success"===e[0]?(console.log(`Found a path of length ${e[3].length} for in ${e[1]}ms after searching ${e[2]} states using ${p}`),i.push(e),!a&&s||(t=e,h())):"fail"===e[0]?(console.log(`Searched all ${e[2]} states in ${e[1]}ms with ${p} and did not find any winning path.`),s&&(t=e,h())):console.log(`Gave up after searching 10000000 states in ${e[1]}ms with ${p} due to exhaustion.`),e})).catch((e=>{e instanceof r.Promise.TimeoutError?console.log(`Timed out after ${c}ms of searching using ${p}.`):e instanceof r.Promise.CancellationError||l.test(e.message)?console.log(`Cancelled ${p}.`):console.log(`Crashed which searching using ${p}`,e)}));o.push(f)}return await Promise.race([f,Promise.all(o).then((e=>{if(t)return t;for(const n of e)n&&(t?n[3]?t=t[3]?n[3].length<t[3].length?n:t:n:n[2]&&(t=t[2]?n[2]>t[2]?n:t:n):t=n);return t}))]),t?t[3]?{visited:t[2],path:t[3],trace:t[4]}:{visited:t[2]}:{visited:-1}}finally{p&&clearTimeout(p),n.terminate().catch(console.error)}})(p.encode()).then((e=>{if(f.firstChild&&f.removeChild(f.firstChild),"path"in e){const t=o.createElement("div");t.textContent=`Found a path of length ${e.path.length} after searching ${e.visited} states:`,f.appendChild(t),f.appendChild(o.createElement("br")),f.appendChild(((e,t)=>{const n=[],a=[],r=o.createElement("div");let d=o.createElement("div","trace"),c="",l=0,s=o.createElement("ul");for(const p of t)if(p.startsWith("  ")){const e=o.createElement("li");e.textContent=p,s.appendChild(e)}else{if(l&&(d.appendChild(s),s=o.createElement("ul"),r.appendChild(d),d=o.createElement("div","trace")),e[l-1]){const t=i.State.decode(e[l-1],!0),d=c.startsWith("Activate")?i.DATA[/"(.*?)"/.exec(c)[1]].id:c.startsWith("Set")&&!c.endsWith("face-down")?i.DATA[/then activate(?: face-down)? "(.*?)"/.exec(c)[1]].id:void 0;o.track(t.banished,n,d),o.track(t.graveyard,a,d);const s=o.createElement("div","state");r.appendChild(h(t,s,n,a))}c=p,l++;const t=o.createElement("span");t.innerHTML=p.replace(/"(.*?)"/g,((e,t)=>`"<b>${t}</b>"`)),d.appendChild(t)}return r.appendChild(d),r})(e.path,e.trace))}else{const t=o.createElement("div");t.textContent=`Unsuccessfully searched ${e.visited} states.`,f.appendChild(t),f.appendChild(o.createElement("br")),f.appendChild((e=>{const t=o.createElement("div","state"),n=o.createElement("div","trace"),a=o.createElement("span");return a.innerHTML=e.trace[0].replace(/"(.*?)"/g,((e,t)=>`"<b>${t}</b>"`)),n.appendChild(a),t.appendChild(n),h(e,t)})(p))}})).catch(console.error);
//# sourceMappingURL=index.9ce837c9.js.map
