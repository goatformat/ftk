function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},i=n.parcelRequireb545;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},n.parcelRequireb545=i),i.register("bXuNP",(function(t,n){var r,o;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>o),(e=>o=e));var i={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("bXuNP").register(JSON.parse('{"1Lmeo":"index.1be31567.js","16Pax":"Counter.570a587c.svg","jmcU1":"android-chrome-192x192.1cfeb4c6.png","kVkr4":"android-chrome-512x512.becfab1a.png","jt8ay":"apple-touch-icon.e66167d4.png","hqwy4":"favicon-16x16.9eb5a5b6.png","dEgAi":"favicon-32x32.74cd82ec.png","c83u5":"Default.ee81a6ab.png","1zqme":"AFeatherofthePhoenix.8224f46f.jpg","7MNNg":"ArchfiendsOath.415c5c4e.jpg","86T2Y":"BlackPendant.1b4e3dca.jpg","4Ce6H":"CardDestruction.59654584.jpg","cZrAd":"ConvulsionofNature.68bc432c.jpg","hmvMk":"CyberJar.8fd931b8.jpg","4HV7D":"DifferentDimensionCapsule.df0b6696.jpg","3MWgr":"GiantTrunade.7aca9a7b.jpg","3UOoh":"GracefulCharity.2921eee8.jpg","c7hxB":"HeavyStorm.cdb1cb75.jpg","4eSbS":"LevelLimitAreaB.227c0405.jpg","6V4jJ":"PotofGreed.6bc4ab31.jpg","c6RDh":"PrematureBurial.3a171f5a.jpg","dFF5O":"Reload.cf360201.jpg","i13zL":"ReversalQuiz.1c2ad206.jpg","e22ps":"RoyalMagicalLibrary.3ac3a45c.jpg","8Yb3j":"Sangan.30e61eab.jpg","7LcVi":"SpellReproduction.556bc6b9.jpg","caiHs":"ThunderDragon.6e123ae9.jpg","16B1S":"ToonTableofContents.90a5e783.jpg","3INzm":"ToonWorld.5fd419da.jpg","15HmH":"UpstartGoblin.6e9536ea.jpg","7xL8N":"Spell.d0455e23.jpg","6VI17":"effectMonster.fdbe5230.jpg","1fTCZ":"Dark.9266aad1.svg","goWgX":"Light.fe02d6f3.svg","ectuW":"Spell.f6989418.svg","4AFYP":"Continuous.11fa1a9d.svg","20Fya":"Equip.95aec609.svg","hrurV":"Quick-Play.af91f1e8.svg","g8qOA":"star.342b6f32.svg","77teK":"index.69b6619e.css"}')),i.register("iPHaw",(function(n,r){e(n.exports,"CMP",(()=>d)),e(n.exports,"createElement",(()=>c)),e(n.exports,"makeCard",(()=>p)),e(n.exports,"renderState",(()=>m)),e(n.exports,"track",(()=>g));var o=i("aMWlW");i("l7khe");var a=i("huaIw"),s=i("2h5ed");const d=(e,t)=>e-t;function c(e,...t){const n=document.createElement(e);for(const e of t)n.classList.add(e);return n}function l(e){return document.createTextNode(e)}const f=e=>{const t=c("div","tooltip");let n=c("div");const r=c("strong");r.textContent=e.name,n.appendChild(r),n.appendChild(l(" ")),n.appendChild(l("—")),n.appendChild(l(" "));const o=c("em");return"Monster"===e.type?o.textContent=`${e.attribute}/${e.level}`:o.textContent=`${e.type}/${e.subType}`,n.appendChild(o),t.appendChild(n),n=c("div","card-text"),n.innerHTML=e.text.replace(/<\/?effect.*?>/g,"").replace(/●/g,"<br />●"),t.appendChild(n),"Monster"===e.type&&(n=c("div"),n.textContent=`ATK ${e.atk} / DEF ${e.def}`,t.appendChild(n)),t},u=(e,t)=>{const n=c("div","tooltip");let r=0;const o={};let i=!1;const s={top:[],bottom:[]};let d=e.reversed;for(const n of e[t].slice().reverse()){const e=a.ID.decode(n).name;"deck"===t&&(d||a.ID.known(n))?(s[i?"bottom":"top"].push(e),d=!1):(i=!0,o[e]=(o[e]||0)+1,r++)}const l=c("ul");for(const e of s.top){const t=c("li"),n=c("em");n.textContent=e,t.appendChild(n),l.appendChild(t)}for(const[e,n]of Object.entries(o).sort(((e,t)=>e[0].localeCompare(t[0])))){const o=c("li");o.textContent="deck"===t?`${n} × ${e} (${(n/r*100).toFixed(2)}%)`:`${n} × ${e}`,l.appendChild(o)}for(const e of s.bottom){const t=c("li"),n=c("em");n.textContent=e,t.appendChild(n),l.appendChild(t)}return n.appendChild(l),n},p=(e,n,r={})=>{const i=c("div","card");if(!e)return i.classList.add("blank"),i;r.equip&&i.classList.add(r.equip),r.className&&i.classList.add(r.className);const a=e.type.toLowerCase(),d="Monster"===e.type?"effectMonster":e.type;if(i.style.backgroundImage=r.facedown?`url(${t(s).sleeves["Default.png"]})`:`url(${t(s).cards.bgs[`${d}.jpg`]})`,!r.facedown){const n=c("div","art");n.style.backgroundImage=`url(${t(s).cards.art[`${l=e.name,l.replace(/[^a-zA-Z0-9]/g,"")}.jpg`]})`,i.appendChild(n);const r=c("div","lower-half"),o=c("div","icon",a);if("Monster"===e.type)for(let n=0;n<e.level;n++){const e=c("img","star");e.src=t(s).cards.svgs.subtypes["star.svg"],o.appendChild(e)}else if("Normal"!==e.subType){const n=c("img","subtype");n.src=t(s).cards.svgs.subtypes[`${e.subType}.svg`],o.appendChild(n)}const d=c("img","attribute");if(d.src=t(s).cards.svgs.attributes[`${"Monster"===e.type?e.attribute:e.type}.svg`],o.appendChild(d),r.appendChild(o),"Monster"===e.type){const t=c("div","stats"),n=c("div","stat-box","atk");n.textContent=`${e.atk}`,t.appendChild(n);const o=c("div","stat-box","def");o.textContent=`${e.def}`,t.appendChild(o),r.appendChild(t)}i.appendChild(r)}var l;if(r.counter||r.label){const e=c("div",r.counter?"counter":"label");if(r.counter){const n=c("img");n.src=t(s).battle["Counter.svg"],e.appendChild(n)}const n=c("div","label-text");n.textContent=`${r.counter||r.label}`,e.append(n),i.appendChild(e)}return r.notip||o.default(i,{content:f(e),touch:!r.hold||["hold",500]}),n&&i.addEventListener("click",(()=>n())),i},h=(e,t=5)=>{let n=!0;const r=e.map(((e,t)=>[e,t]));for(;r.length<t;)n?r.push([void 0,void 0]):r.unshift([void 0,void 0]),n=!n;return r},m=(e,t,n,r,i,s=!1,d)=>{let l=!1;const f={};for(const t of e.spells){const e=a.ID.decode(t);if(!a.ID.facedown(t)&&"Spell"===e.type&&"Equip"===e.subType){const e=a.ID.data(t);f[e]||(f[e]=l?"equip-2":"equip-1"),l=!0}}const m=c("table");let g=c("tr"),v=c("td");v.colSpan=2;let y=c("div","lifepoints");void 0!==d&&o.default(y,{content:`Seed: ${d}`});const b=c("div","lifepoints-overlay");b.style.width=100*(1-e.lifepoints/8e3)+"%",y.appendChild(b);const x=c("div","text");x.textContent=`${e.lifepoints}`,y.appendChild(x),v.appendChild(y),g.appendChild(v),m.appendChild(g),g=c("tr"),v=c("td","monsters"),y=c("div","zone");for(const[t,n]of h(e.monsters))t?y.appendChild(p(a.ID.decode(t),r&&(()=>r("monsters",t,n)),{hold:s,facedown:a.ID.facedown(t),counter:a.ID.data(t),equip:f[n],className:i?.("monsters",t,n)})):y.appendChild(p());if(v.appendChild(y),g.appendChild(v),v=c("td"),y=c("div","zone","banished"),t.length){const n=t[t.length-1],r=p(a.ID.decode(n),void 0,{notip:!0,label:t.length});o.default(r,{content:u(e,"banished")}),y.appendChild(r)}else y.appendChild(p());v.appendChild(y),g.appendChild(v),m.appendChild(g),g=c("tr"),v=c("td"),y=c("div","zone","spells");for(const[t,n]of h(e.spells))if(t){const e=a.ID.decode(t),o=a.ID.facedown(t),d=a.ID.data(t),c=r&&(()=>r("spells",t,n)),l=i?.("spells",t,n);o||"Spell"!==e.type||"Equip"!==e.subType?y.appendChild(p(e,c,{hold:s,facedown:o,counter:d,className:l})):y.appendChild(p(e,c,{hold:s,facedown:o,equip:f[d],className:l}))}else y.appendChild(p());if(v.appendChild(y),g.appendChild(v),v=c("td"),y=c("div","zone","graveyard"),n.length){const t=n[n.length-1],r=p(a.ID.decode(t),void 0,{notip:!0,label:n.length});o.default(r,{content:u(e,"graveyard")}),y.appendChild(r)}else y.appendChild(p());v.appendChild(y),g.appendChild(v),m.appendChild(g),g=c("tr"),v=c("td"),y=c("div","zone","hand");for(const[t,n]of e.hand.entries())y.appendChild(p(a.ID.decode(n),r&&(()=>r("hand",n,t)),{hold:s,className:i?.("hand",n,t)}));if(v.appendChild(y),g.appendChild(v),v=c("td"),y=c("div","zone","deck"),e.deck.length){const t=e.deck[e.deck.length-1],n=p(a.ID.decode(t),r&&(()=>r("deck",t,e.deck.length-1)),{facedown:!e.reversed,notip:!0,label:e.deck.length});o.default(n,{content:u(e,"deck")}),y.appendChild(n)}else y.appendChild(p());return v.appendChild(y),g.appendChild(v),m.appendChild(g),m},g=(e,t,n)=>{const r=t.slice().sort(),o=[];let i=0;for(let n=0;n<e.length;n++,i++)if(i>=r.length)o.push(e[n]);else if(e[n]<r[i])o.push(e[n]),i--;else if(e[n]>r[i]){const e=r.splice(i,1)[0];for(let n=t.length;n>=0;n--)if(t[n]===e){t.splice(n,1);break}n--,i--}if(o.length>1&&n)for(let e=o.length;e>=0;e--)if(o[e]===n){o.splice(e,1),o.push(n);break}for(const e of o)t.push(e);return t};function v(e){document.documentElement.setAttribute("data-theme",e)}const y=window.matchMedia("(prefers-color-scheme: dark)"),b=e=>{v(e.matches?"dark":"light")};try{y.addEventListener("change",b)}catch(e){y.addListener(b)}v(y.matches?"dark":"light")})),i.register("aMWlW",(function(t,n){e(t.exports,"default",(()=>Y));var r=i("kCJa4"),o=i("gKXJh"),a="tippy-content",s="tippy-backdrop",d="tippy-arrow",c="tippy-svg-arrow",l={passive:!0,capture:!0},f=function(){return document.body};function u(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function p(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function h(e,t){return"function"==typeof e?e.apply(void 0,t):e}function m(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function g(e){return[].concat(e)}function v(e,t){-1===e.indexOf(t)&&e.push(t)}function y(e){return e.split("-")[0]}function b(e){return[].slice.call(e)}function x(){return document.createElement("div")}function w(e){return["Element","Fragment"].some((function(t){return p(e,t)}))}function k(e){return p(e,"MouseEvent")}function D(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function I(e){return w(e)?[e]:function(e){return p(e,"NodeList")}(e)?b(e):Array.isArray(e)?e:b(document.querySelectorAll(e))}function S(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function L(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function C(e){var t,n=g(e)[0];return(null==n||null==(t=n.ownerDocument)?void 0:t.body)?n.ownerDocument:document}function E(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[r](t,n)}))}function P(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=null==(r=null==n.getRootNode?void 0:n.getRootNode())?void 0:r.host}return!1}var T={isTouch:!1},A=0;function O(){T.isTouch||(T.isTouch=!0,window.performance&&document.addEventListener("mousemove",R))}function R(){var e=performance.now();e-A<20&&(T.isTouch=!1,document.removeEventListener("mousemove",R)),A=e}function $(){var e=document.activeElement;if(D(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var j=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto;var H={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},M=Object.assign({appendTo:f,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},H,{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),B=Object.keys(M);function F(e){var t=(e.plugins||[]).reduce((function(t,n){var r,o=n.name,i=n.defaultValue;o&&(t[o]=void 0!==e[o]?e[o]:null!=(r=M[o])?r:i);return t}),{});return Object.assign({},e,{},t)}function N(e,t){var n=Object.assign({},t,{content:h(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(F(Object.assign({},M,{plugins:t}))):B).reduce((function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},M.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function q(e,t){e.innerHTML=t}function U(e){var t=x();return!0===e?t.className=d:(t.className=c,w(e)?t.appendChild(e):q(t,e)),t}function _(e,t){w(t.content)?(q(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?q(e,t.content):e.textContent=t.content)}function G(e){var t=e.firstElementChild,n=b(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(a)})),arrow:n.find((function(e){return e.classList.contains(d)||e.classList.contains(c)})),backdrop:n.find((function(e){return e.classList.contains(s)}))}}function z(e){var t=x(),n=x();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=x();function o(n,r){var o=G(t),i=o.box,a=o.content,s=o.arrow;r.theme?i.setAttribute("data-theme",r.theme):i.removeAttribute("data-theme"),"string"==typeof r.animation?i.setAttribute("data-animation",r.animation):i.removeAttribute("data-animation"),r.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?i.setAttribute("role",r.role):i.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||_(a,e.props),r.arrow?s?n.arrow!==r.arrow&&(i.removeChild(s),i.appendChild(U(r.arrow))):i.appendChild(U(r.arrow)):s&&i.removeChild(s)}return r.className=a,r.setAttribute("data-state","hidden"),_(r,e.props),t.appendChild(n),n.appendChild(r),o(e.props,e.props),{popper:t,onUpdate:o}}z.$$tippy=!0;var V=1,W=[],X=[];function Z(e,t){var n,o,i,a,s,d,c,p,w,D=N(e,Object.assign({},M,{},F((n=t,Object.keys(n).reduce((function(e,t){return void 0!==n[t]&&(e[t]=n[t]),e}),{}))))),I=!1,A=!1,O=!1,R=!1,$=[],H=m(xe,D.interactiveDebounce),B=V++,q=(w=D.plugins).filter((function(e,t){return w.indexOf(e)===t})),U={id:B,reference:e,popper:x(),popperInstance:null,props:D,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:q,clearDelayTimeouts:function(){clearTimeout(o),clearTimeout(i),cancelAnimationFrame(a)},setProps:function(t){0;if(U.state.isDestroyed)return;ae("onBeforeUpdate",[U,t]),ye();var n=U.props,r=N(e,Object.assign({},U.props,{},t,{ignoreAttributes:!0}));U.props=r,ve(),n.interactiveDebounce!==r.interactiveDebounce&&(ce(),H=m(xe,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?g(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded");de(),ie(),Z&&Z(n,r);U.popperInstance&&(Ie(),Le().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})));ae("onAfterUpdate",[U,t])},setContent:function(e){U.setProps({content:e})},show:function(){0;var e=U.state.isVisible,t=U.state.isDestroyed,n=!U.state.isEnabled,r=T.isTouch&&!U.props.touch,o=u(U.props.duration,0,M.duration);if(e||t||n||r)return;if(te().hasAttribute("disabled"))return;if(ae("onShow",[U],!1),!1===U.props.onShow(U))return;U.state.isVisible=!0,ee()&&(z.style.visibility="visible");ie(),pe(),U.state.isMounted||(z.style.transition="none");if(ee()){var i=re(),a=i.box,s=i.content;S([a,s],0)}c=function(){var e;if(U.state.isVisible&&!R){if(R=!0,z.offsetHeight,z.style.transition=U.props.moveTransition,ee()&&U.props.animation){var t=re(),n=t.box,r=t.content;S([n,r],o),L([n,r],"visible")}se(),de(),v(X,U),null==(e=U.popperInstance)||e.forceUpdate(),U.state.isMounted=!0,ae("onMount",[U]),U.props.animation&&ee()&&function(e,t){me(e,t)}(o,(function(){U.state.isShown=!0,ae("onShown",[U])}))}},function(){var e,t=U.props.appendTo,n=te();e=U.props.interactive&&t===f||"parent"===t?n.parentNode:h(t,[n]);e.contains(z)||e.appendChild(z);Ie(),!1}()},hide:function(){0;var e=!U.state.isVisible,t=U.state.isDestroyed,n=!U.state.isEnabled,r=u(U.props.duration,1,M.duration);if(e||t||n)return;if(ae("onHide",[U],!1),!1===U.props.onHide(U))return;U.state.isVisible=!1,U.state.isShown=!1,R=!1,I=!1,ee()&&(z.style.visibility="hidden");if(ce(),he(),ie(),ee()){var o=re(),i=o.box,a=o.content;U.props.animation&&(S([i,a],r),L([i,a],"hidden"))}se(),de(),U.props.animation?ee()&&function(e,t){me(e,(function(){!U.state.isVisible&&z.parentNode&&z.parentNode.contains(z)&&t()}))}(r,U.unmount):U.unmount()},hideWithInteractivity:function(e){0;ne().addEventListener("mousemove",H),v(W,H),H(e)},enable:function(){U.state.isEnabled=!0},disable:function(){U.hide(),U.state.isEnabled=!1},unmount:function(){0;U.state.isVisible&&U.hide();if(!U.state.isMounted)return;Se(),Le().forEach((function(e){e._tippy.unmount()})),z.parentNode&&z.parentNode.removeChild(z);X=X.filter((function(e){return e!==U})),U.state.isMounted=!1,ae("onHidden",[U])},destroy:function(){0;if(U.state.isDestroyed)return;U.clearDelayTimeouts(),U.unmount(),ye(),delete e._tippy,U.state.isDestroyed=!0,ae("onDestroy",[U])}};if(!D.render)return U;var _=D.render(U),z=_.popper,Z=_.onUpdate;z.setAttribute("data-tippy-root",""),z.id="tippy-"+U.id,U.popper=z,e._tippy=U,z._tippy=U;var J=q.map((function(e){return e.fn(U)})),Y=e.hasAttribute("aria-expanded");function Q(){var e=U.props.touch;return Array.isArray(e)?e:[e,0]}function K(){return"hold"===Q()[0]}function ee(){var e;return!!(null==(e=U.props.render)?void 0:e.$$tippy)}function te(){return p||e}function ne(){var e=te().parentNode;return e?C(e):document}function re(){return G(z)}function oe(e){return U.state.isMounted&&!U.state.isVisible||T.isTouch||s&&"focus"===s.type?0:u(U.props.delay,e?0:1,M.delay)}function ie(){z.style.pointerEvents=U.props.interactive&&U.state.isVisible?"":"none",z.style.zIndex=""+U.props.zIndex}function ae(e,t,n){var r;(void 0===n&&(n=!0),J.forEach((function(n){n[e]&&n[e].apply(void 0,t)})),n)&&(r=U.props)[e].apply(r,t)}function se(){var t=U.props.aria;if(t.content){var n="aria-"+t.content,r=z.id;g(U.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(U.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var o=t&&t.replace(r,"").trim();o?e.setAttribute(n,o):e.removeAttribute(n)}}))}}function de(){!Y&&U.props.aria.expanded&&g(U.props.triggerTarget||e).forEach((function(e){U.props.interactive?e.setAttribute("aria-expanded",U.state.isVisible&&e===te()?"true":"false"):e.removeAttribute("aria-expanded")}))}function ce(){ne().removeEventListener("mousemove",H),W=W.filter((function(e){return e!==H}))}function le(e){if(!T.isTouch||!O&&"mousedown"!==e.type){var t=e.composedPath&&e.composedPath()[0]||e.target;if(!U.props.interactive||!P(z,t)){if(P(te(),t)){if(T.isTouch)return;if(U.state.isVisible&&U.props.trigger.indexOf("click")>=0)return}else ae("onClickOutside",[U,e]);!0===U.props.hideOnClick&&(U.clearDelayTimeouts(),U.hide(),A=!0,setTimeout((function(){A=!1})),U.state.isMounted||he())}}}function fe(){O=!0}function ue(){O=!1}function pe(){var e=ne();e.addEventListener("mousedown",le,!0),e.addEventListener("touchend",le,l),e.addEventListener("touchstart",ue,l),e.addEventListener("touchmove",fe,l)}function he(){var e=ne();e.removeEventListener("mousedown",le,!0),e.removeEventListener("touchend",le,l),e.removeEventListener("touchstart",ue,l),e.removeEventListener("touchmove",fe,l)}function me(e,t){var n=re().box;function r(e){e.target===n&&(E(n,"remove",r),t())}if(0===e)return t();E(n,"remove",d),E(n,"add",r),d=r}function ge(t,n,r){void 0===r&&(r=!1),g(U.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,r),$.push({node:e,eventType:t,handler:n,options:r})}))}function ve(){var e;K()&&(ge("touchstart",be,{passive:!0}),ge("touchend",we,{passive:!0})),(e=U.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(ge(e,be),e){case"mouseenter":ge("mouseleave",we);break;case"focus":ge(j?"focusout":"blur",ke);break;case"focusin":ge("focusout",ke)}}))}function ye(){$.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,o=e.options;t.removeEventListener(n,r,o)})),$=[]}function be(e){var t,n=!1;if(U.state.isEnabled&&!De(e)&&!A){var r="focus"===(null==(t=s)?void 0:t.type);s=e,p=e.currentTarget,de(),!U.state.isVisible&&k(e)&&W.forEach((function(t){return t(e)})),"click"===e.type&&(U.props.trigger.indexOf("mouseenter")<0||I)&&!1!==U.props.hideOnClick&&U.state.isVisible?n=!0:Ce(e),"click"===e.type&&(I=!n),n&&!r&&Ee(e)}}function xe(e){var t=e.target,n=te().contains(t)||z.contains(t);if("mousemove"!==e.type||!n){var r=Le().concat(z).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:D}:null})).filter(Boolean);(function(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,o=e.popperState,i=e.props.interactiveBorder,a=y(o.placement),s=o.modifiersData.offset;if(!s)return!0;var d="bottom"===a?s.top.y:0,c="top"===a?s.bottom.y:0,l="right"===a?s.left.x:0,f="left"===a?s.right.x:0,u=t.top-r+d>i,p=r-t.bottom-c>i,h=t.left-n+l>i,m=n-t.right-f>i;return u||p||h||m}))})(r,e)&&(ce(),Ee(e))}}function we(e){De(e)||U.props.trigger.indexOf("click")>=0&&I||(U.props.interactive?U.hideWithInteractivity(e):Ee(e))}function ke(e){U.props.trigger.indexOf("focusin")<0&&e.target!==te()||U.props.interactive&&e.relatedTarget&&z.contains(e.relatedTarget)||Ee(e)}function De(e){return!!T.isTouch&&K()!==e.type.indexOf("touch")>=0}function Ie(){Se();var t=U.props,n=t.popperOptions,o=t.placement,i=t.offset,a=t.getReferenceClientRect,s=t.moveTransition,d=ee()?G(z).arrow:null,l=a?{getBoundingClientRect:a,contextElement:a.contextElement||te()}:e,f={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(ee()){var n=re().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}},u=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},f];ee()&&d&&u.push({name:"arrow",options:{element:d,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),U.popperInstance=r.createPopper(l,z,Object.assign({},n,{placement:o,onFirstUpdate:c,modifiers:u}))}function Se(){U.popperInstance&&(U.popperInstance.destroy(),U.popperInstance=null)}function Le(){return b(z.querySelectorAll("[data-tippy-root]"))}function Ce(e){U.clearDelayTimeouts(),e&&ae("onTrigger",[U,e]),pe();var t=oe(!0),n=Q(),r=n[0],i=n[1];T.isTouch&&"hold"===r&&i&&(t=i),t?o=setTimeout((function(){U.show()}),t):U.show()}function Ee(e){if(U.clearDelayTimeouts(),ae("onUntrigger",[U,e]),U.state.isVisible){if(!(U.props.trigger.indexOf("mouseenter")>=0&&U.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&I)){var t=oe(!1);t?i=setTimeout((function(){U.state.isVisible&&U.hide()}),t):a=requestAnimationFrame((function(){U.hide()}))}}else he()}return ve(),de(),ie(),ae("onCreate",[U]),D.showOnCreate&&Ce(),z.addEventListener("mouseenter",(function(){U.props.interactive&&U.state.isVisible&&U.clearDelayTimeouts()})),z.addEventListener("mouseleave",(function(e){U.props.interactive&&U.props.trigger.indexOf("mouseenter")>=0&&(ne().addEventListener("mousemove",H),H(e))})),U}function J(e,t){void 0===t&&(t={});var n=M.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",O,l),window.addEventListener("blur",$);var r=Object.assign({},t,{plugins:n}),o=I(e).reduce((function(e,t){var n=t&&Z(t,r);return n&&e.push(n),e}),[]);return w(e)?o[0]:o}J.defaultProps=M,J.setDefaultProps=function(e){Object.keys(e).forEach((function(t){M[t]=e[t]}))},J.currentInput=T;Object.assign({},o.default,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});J.setDefaultProps({render:z});var Y=J})),i.register("gKXJh",(function(t,n){e(t.exports,"default",(()=>a));var r=i("1GGfw"),o=i("lFW2c");var a={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},a=t.elements[e];o.isHTMLElement(a)&&r.default(a)&&(Object.assign(a.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],a=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});o.isHTMLElement(i)&&r.default(i)&&(Object.assign(i.style,s),Object.keys(a).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]}})),i.register("1GGfw",(function(t,n){function r(e){return e?(e.nodeName||"").toLowerCase():null}e(t.exports,"default",(()=>r))})),i.register("lFW2c",(function(t,n){e(t.exports,"isElement",(()=>o)),e(t.exports,"isHTMLElement",(()=>a)),e(t.exports,"isShadowRoot",(()=>s));var r=i("4ugce");function o(e){return e instanceof r.default(e).Element||e instanceof Element}function a(e){return e instanceof r.default(e).HTMLElement||e instanceof HTMLElement}function s(e){return"undefined"!=typeof ShadowRoot&&(e instanceof r.default(e).ShadowRoot||e instanceof ShadowRoot)}})),i.register("4ugce",(function(t,n){function r(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}e(t.exports,"default",(()=>r))})),i.register("kCJa4",(function(t,n){e(t.exports,"createPopper",(()=>m));var r=i("cYPIJ"),o=i("ikBRU"),a=i("6wpG3"),s=i("hoUBZ"),d=i("gKXJh"),c=i("cRdg4"),l=i("1iBeh"),f=i("2kR67"),u=i("ihA6G"),p=i("8pYOB"),h=[o.default,a.default,s.default,d.default,c.default,l.default,f.default,u.default,p.default],m=r.popperGenerator({defaultModifiers:h})})),i.register("cYPIJ",(function(t,n){e(t.exports,"popperGenerator",(()=>h));var r=i("7f7gT"),o=i("9ScGC"),a=i("2mwS5"),s=i("ToLH2"),d=i("8HCNy"),c=i("17gs3"),l=i("7O0oo"),f=i("lFW2c"),u={placement:"bottom",modifiers:[],strategy:"absolute"};function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function h(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,h=t.defaultOptions,m=void 0===h?u:h;return function(e,t,n){void 0===n&&(n=m);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},u,m),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},g=[],v=!1,y={state:h,setOptions:function(n){var r="function"==typeof n?n(h.options):n;b(),h.options=Object.assign({},m,h.options,r),h.scrollParents={reference:f.isElement(e)?a.default(e):e.contextElement?a.default(e.contextElement):[],popper:a.default(t)};var o=d.default(l.default([].concat(i,h.options.modifiers)));return h.orderedModifiers=o.filter((function(e){return e.enabled})),h.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var i=o({state:h,name:t,instance:y,options:r}),a=function(){};g.push(i||a)}})),y.update()},forceUpdate:function(){if(!v){var e=h.elements,t=e.reference,n=e.popper;if(p(t,n)){h.rects={reference:r.default(t,s.default(n),"fixed"===h.options.strategy),popper:o.default(n)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach((function(e){return h.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<h.orderedModifiers.length;i++)if(!0!==h.reset){var a=h.orderedModifiers[i],d=a.fn,c=a.options,l=void 0===c?{}:c,f=a.name;"function"==typeof d&&(h=d({state:h,options:l,name:f,instance:y})||h)}else h.reset=!1,i=-1}}},update:c.default((function(){return new Promise((function(e){y.forceUpdate(),e(h)}))})),destroy:function(){b(),v=!0}};if(!p(e,t))return y;function b(){g.forEach((function(e){return e()})),g=[]}return y.setOptions(n).then((function(e){!v&&n.onFirstUpdate&&n.onFirstUpdate(e)})),y}}})),i.register("7f7gT",(function(t,n){e(t.exports,"default",(()=>f));var r=i("b46T2"),o=i("4Tv2z"),a=i("1GGfw"),s=i("lFW2c"),d=i("1MIA1"),c=i("5fFc9"),l=i("dtuox");function f(e,t,n){void 0===n&&(n=!1);var i=s.isHTMLElement(t),f=s.isHTMLElement(t)&&function(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return 1!==n||1!==r}(t),u=c.default(t),p=r.default(e,f),h={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(i||!i&&!n)&&(("body"!==a.default(t)||l.default(u))&&(h=o.default(t)),s.isHTMLElement(t)?((m=r.default(t,!0)).x+=t.clientLeft,m.y+=t.clientTop):u&&(m.x=d.default(u))),{x:p.left+h.scrollLeft-m.x,y:p.top+h.scrollTop-m.y,width:p.width,height:p.height}}})),i.register("b46T2",(function(t,n){function r(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect();return{width:n.width/1,height:n.height/1,top:n.top/1,right:n.right/1,bottom:n.bottom/1,left:n.left/1,x:n.left/1,y:n.top/1}}e(t.exports,"default",(()=>r))})),i.register("4Tv2z",(function(t,n){e(t.exports,"default",(()=>d));var r=i("9SkBL"),o=i("4ugce"),a=i("lFW2c"),s=i("ky5f1");function d(e){return e!==o.default(e)&&a.isHTMLElement(e)?s.default(e):r.default(e)}})),i.register("9SkBL",(function(t,n){e(t.exports,"default",(()=>o));var r=i("4ugce");function o(e){var t=r.default(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}})),i.register("ky5f1",(function(t,n){function r(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}e(t.exports,"default",(()=>r))})),i.register("1MIA1",(function(t,n){e(t.exports,"default",(()=>s));var r=i("b46T2"),o=i("5fFc9"),a=i("9SkBL");function s(e){return r.default(o.default(e)).left+a.default(e).scrollLeft}})),i.register("5fFc9",(function(t,n){e(t.exports,"default",(()=>o));var r=i("lFW2c");function o(e){return((r.isElement(e)?e.ownerDocument:e.document)||window.document).documentElement}})),i.register("dtuox",(function(t,n){e(t.exports,"default",(()=>o));var r=i("4e2Bb");function o(e){var t=r.default(e),n=t.overflow,o=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+o)}})),i.register("4e2Bb",(function(t,n){e(t.exports,"default",(()=>o));var r=i("4ugce");function o(e){return r.default(e).getComputedStyle(e)}})),i.register("9ScGC",(function(t,n){e(t.exports,"default",(()=>o));var r=i("b46T2");function o(e){var t=r.default(e),n=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:o}}})),i.register("2mwS5",(function(t,n){e(t.exports,"default",(()=>d));var r=i("1DIcC"),o=i("51YUZ"),a=i("4ugce"),s=i("dtuox");function d(e,t){var n;void 0===t&&(t=[]);var i=r.default(e),c=i===(null==(n=e.ownerDocument)?void 0:n.body),l=a.default(i),f=c?[l].concat(l.visualViewport||[],s.default(i)?i:[]):i,u=t.concat(f);return c?u:u.concat(d(o.default(f)))}})),i.register("1DIcC",(function(t,n){e(t.exports,"default",(()=>d));var r=i("51YUZ"),o=i("dtuox"),a=i("1GGfw"),s=i("lFW2c");function d(e){return["html","body","#document"].indexOf(a.default(e))>=0?e.ownerDocument.body:s.isHTMLElement(e)&&o.default(e)?e:d(r.default(e))}})),i.register("51YUZ",(function(t,n){e(t.exports,"default",(()=>s));var r=i("1GGfw"),o=i("5fFc9"),a=i("lFW2c");function s(e){return"html"===r.default(e)?e:e.assignedSlot||e.parentNode||(a.isShadowRoot(e)?e.host:null)||o.default(e)}})),i.register("ToLH2",(function(t,n){e(t.exports,"default",(()=>f));var r=i("4ugce"),o=i("1GGfw"),a=i("4e2Bb"),s=i("lFW2c"),d=i("5eqIa"),c=i("51YUZ");function l(e){return s.isHTMLElement(e)&&"fixed"!==a.default(e).position?e.offsetParent:null}function f(e){for(var t=r.default(e),n=l(e);n&&d.default(n)&&"static"===a.default(n).position;)n=l(n);return n&&("html"===o.default(n)||"body"===o.default(n)&&"static"===a.default(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&s.isHTMLElement(e)&&"fixed"===a.default(e).position)return null;for(var n=c.default(e);s.isHTMLElement(n)&&["html","body"].indexOf(o.default(n))<0;){var r=a.default(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}})),i.register("5eqIa",(function(t,n){e(t.exports,"default",(()=>o));var r=i("1GGfw");function o(e){return["table","td","th"].indexOf(r.default(e))>=0}})),i.register("8HCNy",(function(t,n){e(t.exports,"default",(()=>a));var r=i("25yov");function o(e){var t=new Map,n=new Set,r=[];function o(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&o(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||o(e)})),r}function a(e){var t=o(e);return r.modifierPhases.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}})),i.register("25yov",(function(t,n){e(t.exports,"top",(()=>r)),e(t.exports,"bottom",(()=>o)),e(t.exports,"right",(()=>i)),e(t.exports,"left",(()=>a)),e(t.exports,"auto",(()=>s)),e(t.exports,"basePlacements",(()=>d)),e(t.exports,"start",(()=>c)),e(t.exports,"end",(()=>l)),e(t.exports,"clippingParents",(()=>f)),e(t.exports,"viewport",(()=>u)),e(t.exports,"popper",(()=>p)),e(t.exports,"reference",(()=>h)),e(t.exports,"variationPlacements",(()=>m)),e(t.exports,"placements",(()=>g)),e(t.exports,"modifierPhases",(()=>v));var r="top",o="bottom",i="right",a="left",s="auto",d=[r,o,i,a],c="start",l="end",f="clippingParents",u="viewport",p="popper",h="reference",m=d.reduce((function(e,t){return e.concat([t+"-"+c,t+"-"+l])}),[]),g=[].concat(d,[s]).reduce((function(e,t){return e.concat([t,t+"-"+c,t+"-"+l])}),[]),v=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"]})),i.register("17gs3",(function(t,n){function r(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}e(t.exports,"default",(()=>r))})),i.register("7O0oo",(function(t,n){function r(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}e(t.exports,"default",(()=>r))})),i.register("ikBRU",(function(t,n){e(t.exports,"default",(()=>a));var r=i("4ugce"),o={passive:!0};var a={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,a=i.scroll,s=void 0===a||a,d=i.resize,c=void 0===d||d,l=r.default(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&f.forEach((function(e){e.addEventListener("scroll",n.update,o)})),c&&l.addEventListener("resize",n.update,o),function(){s&&f.forEach((function(e){e.removeEventListener("scroll",n.update,o)})),c&&l.removeEventListener("resize",n.update,o)}},data:{}}})),i.register("6wpG3",(function(t,n){e(t.exports,"default",(()=>o));var r=i("iF19l");var o={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=r.default({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}}})),i.register("iF19l",(function(t,n){e(t.exports,"default",(()=>d));var r=i("kcU3c"),o=i("gvEPV"),a=i("8Prrf"),s=i("25yov");function d(e){var t,n=e.reference,i=e.element,d=e.placement,c=d?r.default(d):null,l=d?o.default(d):null,f=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2;switch(c){case s.top:t={x:f,y:n.y-i.height};break;case s.bottom:t={x:f,y:n.y+n.height};break;case s.right:t={x:n.x+n.width,y:u};break;case s.left:t={x:n.x-i.width,y:u};break;default:t={x:n.x,y:n.y}}var p=c?a.default(c):null;if(null!=p){var h="y"===p?"height":"width";switch(l){case s.start:t[p]=t[p]-(n[h]/2-i[h]/2);break;case s.end:t[p]=t[p]+(n[h]/2-i[h]/2)}}return t}})),i.register("kcU3c",(function(t,n){function r(e){return e.split("-")[0]}e(t.exports,"default",(()=>r))})),i.register("gvEPV",(function(t,n){function r(e){return e.split("-")[1]}e(t.exports,"default",(()=>r))})),i.register("8Prrf",(function(t,n){function r(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}e(t.exports,"default",(()=>r))})),i.register("hoUBZ",(function(t,n){e(t.exports,"default",(()=>h));var r=i("25yov"),o=i("ToLH2"),a=i("4ugce"),s=i("5fFc9"),d=i("4e2Bb"),c=i("kcU3c"),l=i("gvEPV"),f=i("f8ZFZ"),u={top:"auto",right:"auto",bottom:"auto",left:"auto"};function p(e){var t,n=e.popper,i=e.popperRect,c=e.placement,l=e.variation,p=e.offsets,h=e.position,m=e.gpuAcceleration,g=e.adaptive,v=e.roundOffsets,y=!0===v?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:f.round(f.round(t*r)/r)||0,y:f.round(f.round(n*r)/r)||0}}(p):"function"==typeof v?v(p):p,b=y.x,x=void 0===b?0:b,w=y.y,k=void 0===w?0:w,D=p.hasOwnProperty("x"),I=p.hasOwnProperty("y"),S=r.left,L=r.top,C=window;if(g){var E=o.default(n),P="clientHeight",T="clientWidth";E===a.default(n)&&(E=s.default(n),"static"!==d.default(E).position&&"absolute"===h&&(P="scrollHeight",T="scrollWidth")),c!==r.top&&(c!==r.left&&c!==r.right||l!==r.end)||(L=r.bottom,k-=E[P]-i.height,k*=m?1:-1),c!==r.left&&(c!==r.top&&c!==r.bottom||l!==r.end)||(S=r.right,x-=E[T]-i.width,x*=m?1:-1)}var A,O=Object.assign({position:h},g&&u);return m?Object.assign({},O,((A={})[L]=I?"0":"",A[S]=D?"0":"",A.transform=(C.devicePixelRatio||1)<=1?"translate("+x+"px, "+k+"px)":"translate3d("+x+"px, "+k+"px, 0)",A)):Object.assign({},O,((t={})[L]=I?k+"px":"",t[S]=D?x+"px":"",t.transform="",t))}var h={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,d=void 0===s||s,f={placement:c.default(t.placement),variation:l.default(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,p(Object.assign({},f,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:d})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,p(Object.assign({},f,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}}})),i.register("f8ZFZ",(function(t,n){e(t.exports,"max",(()=>r)),e(t.exports,"min",(()=>o)),e(t.exports,"round",(()=>i));var r=Math.max,o=Math.min,i=Math.round})),i.register("cRdg4",(function(t,n){e(t.exports,"default",(()=>a));var r=i("kcU3c"),o=i("25yov");var a={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,a=n.offset,s=void 0===a?[0,0]:a,d=o.placements.reduce((function(e,n){return e[n]=function(e,t,n){var i=r.default(e),a=[o.left,o.top].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},t,{placement:e})):n,d=s[0],c=s[1];return d=d||0,c=(c||0)*a,[o.left,o.right].indexOf(i)>=0?{x:c,y:d}:{x:d,y:c}}(n,t.rects,s),e}),{}),c=d[t.placement],l=c.x,f=c.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=f),t.modifiersData[i]=d}}})),i.register("1iBeh",(function(t,n){e(t.exports,"default",(()=>f));var r=i("8LMRl"),o=i("kcU3c"),a=i("7gmUm"),s=i("gVmJg"),d=i("5cdVh"),c=i("25yov"),l=i("gvEPV");var f={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var f=n.mainAxis,u=void 0===f||f,p=n.altAxis,h=void 0===p||p,m=n.fallbackPlacements,g=n.padding,v=n.boundary,y=n.rootBoundary,b=n.altBoundary,x=n.flipVariations,w=void 0===x||x,k=n.allowedAutoPlacements,D=t.options.placement,I=o.default(D),S=m||(I===D||!w?[r.default(D)]:function(e){if(o.default(e)===c.auto)return[];var t=r.default(e);return[a.default(e),t,a.default(t)]}(D)),L=[D].concat(S).reduce((function(e,n){return e.concat(o.default(n)===c.auto?d.default(t,{placement:n,boundary:v,rootBoundary:y,padding:g,flipVariations:w,allowedAutoPlacements:k}):n)}),[]),C=t.rects.reference,E=t.rects.popper,P=new Map,T=!0,A=L[0],O=0;O<L.length;O++){var R=L[O],$=o.default(R),j=l.default(R)===c.start,H=[c.top,c.bottom].indexOf($)>=0,M=H?"width":"height",B=s.default(t,{placement:R,boundary:v,rootBoundary:y,altBoundary:b,padding:g}),F=H?j?c.right:c.left:j?c.bottom:c.top;C[M]>E[M]&&(F=r.default(F));var N=r.default(F),q=[];if(u&&q.push(B[$]<=0),h&&q.push(B[F]<=0,B[N]<=0),q.every((function(e){return e}))){A=R,T=!1;break}P.set(R,q)}if(T)for(var U=function(e){var t=L.find((function(t){var n=P.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},_=w?3:1;_>0;_--){if("break"===U(_))break}t.placement!==A&&(t.modifiersData[i]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}}})),i.register("8LMRl",(function(t,n){e(t.exports,"default",(()=>o));var r={left:"right",right:"left",bottom:"top",top:"bottom"};function o(e){return e.replace(/left|right|bottom|top/g,(function(e){return r[e]}))}})),i.register("7gmUm",(function(t,n){e(t.exports,"default",(()=>o));var r={start:"end",end:"start"};function o(e){return e.replace(/start|end/g,(function(e){return r[e]}))}})),i.register("gVmJg",(function(t,n){e(t.exports,"default",(()=>p));var r=i("iWVbz"),o=i("5fFc9"),a=i("b46T2"),s=i("iF19l"),d=i("V1bZU"),c=i("25yov"),l=i("lFW2c"),f=i("ECyxR"),u=i("bTdsf");function p(e,t){void 0===t&&(t={});var n=t,i=n.placement,p=void 0===i?e.placement:i,h=n.boundary,m=void 0===h?c.clippingParents:h,g=n.rootBoundary,v=void 0===g?c.viewport:g,y=n.elementContext,b=void 0===y?c.popper:y,x=n.altBoundary,w=void 0!==x&&x,k=n.padding,D=void 0===k?0:k,I=f.default("number"!=typeof D?D:u.default(D,c.basePlacements)),S=b===c.popper?c.reference:c.popper,L=e.rects.popper,C=e.elements[w?S:b],E=r.default(l.isElement(C)?C:C.contextElement||o.default(e.elements.popper),m,v),P=a.default(e.elements.reference),T=s.default({reference:P,element:L,strategy:"absolute",placement:p}),A=d.default(Object.assign({},L,T)),O=b===c.popper?A:P,R={top:E.top-O.top+I.top,bottom:O.bottom-E.bottom+I.bottom,left:E.left-O.left+I.left,right:O.right-E.right+I.right},$=e.modifiersData.offset;if(b===c.popper&&$){var j=$[p];Object.keys(R).forEach((function(e){var t=[c.right,c.bottom].indexOf(e)>=0?1:-1,n=[c.top,c.bottom].indexOf(e)>=0?"y":"x";R[e]+=j[n]*t}))}return R}})),i.register("iWVbz",(function(t,n){e(t.exports,"default",(()=>b));var r=i("25yov"),o=i("iDF6b"),a=i("g78lV"),s=i("2mwS5"),d=i("ToLH2"),c=i("5fFc9"),l=i("4e2Bb"),f=i("lFW2c"),u=i("b46T2"),p=i("51YUZ"),h=i("7EsEH"),m=i("1GGfw"),g=i("V1bZU"),v=i("f8ZFZ");function y(e,t){return t===r.viewport?g.default(o.default(e)):f.isHTMLElement(t)?function(e){var t=u.default(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):g.default(a.default(c.default(e)))}function b(e,t,n){var r="clippingParents"===t?function(e){var t=s.default(p.default(e)),n=["absolute","fixed"].indexOf(l.default(e).position)>=0&&f.isHTMLElement(e)?d.default(e):e;return f.isElement(n)?t.filter((function(e){return f.isElement(e)&&h.default(e,n)&&"body"!==m.default(e)})):[]}(e):[].concat(t),o=[].concat(r,[n]),i=o[0],a=o.reduce((function(t,n){var r=y(e,n);return t.top=v.max(r.top,t.top),t.right=v.min(r.right,t.right),t.bottom=v.min(r.bottom,t.bottom),t.left=v.max(r.left,t.left),t}),y(e,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}})),i.register("iDF6b",(function(t,n){e(t.exports,"default",(()=>s));var r=i("4ugce"),o=i("5fFc9"),a=i("1MIA1");function s(e){var t=r.default(e),n=o.default(e),i=t.visualViewport,s=n.clientWidth,d=n.clientHeight,c=0,l=0;return i&&(s=i.width,d=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(c=i.offsetLeft,l=i.offsetTop)),{width:s,height:d,x:c+a.default(e),y:l}}})),i.register("g78lV",(function(t,n){e(t.exports,"default",(()=>c));var r=i("5fFc9"),o=i("4e2Bb"),a=i("1MIA1"),s=i("9SkBL"),d=i("f8ZFZ");function c(e){var t,n=r.default(e),i=s.default(e),c=null==(t=e.ownerDocument)?void 0:t.body,l=d.max(n.scrollWidth,n.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),f=d.max(n.scrollHeight,n.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),u=-i.scrollLeft+a.default(e),p=-i.scrollTop;return"rtl"===o.default(c||n).direction&&(u+=d.max(n.clientWidth,c?c.clientWidth:0)-l),{width:l,height:f,x:u,y:p}}})),i.register("7EsEH",(function(t,n){e(t.exports,"default",(()=>o));var r=i("lFW2c");function o(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&r.isShadowRoot(n)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}})),i.register("V1bZU",(function(t,n){function r(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}e(t.exports,"default",(()=>r))})),i.register("ECyxR",(function(t,n){e(t.exports,"default",(()=>o));var r=i("h1hob");function o(e){return Object.assign({},r.default(),e)}})),i.register("h1hob",(function(t,n){function r(){return{top:0,right:0,bottom:0,left:0}}e(t.exports,"default",(()=>r))})),i.register("bTdsf",(function(t,n){function r(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}e(t.exports,"default",(()=>r))})),i.register("5cdVh",(function(t,n){e(t.exports,"default",(()=>d));var r=i("gvEPV"),o=i("25yov"),a=i("gVmJg"),s=i("kcU3c");function d(e,t){void 0===t&&(t={});var n=t,i=n.placement,d=n.boundary,c=n.rootBoundary,l=n.padding,f=n.flipVariations,u=n.allowedAutoPlacements,p=void 0===u?o.placements:u,h=r.default(i),m=h?f?o.variationPlacements:o.variationPlacements.filter((function(e){return r.default(e)===h})):o.basePlacements,g=m.filter((function(e){return p.indexOf(e)>=0}));0===g.length&&(g=m);var v=g.reduce((function(t,n){return t[n]=a.default(e,{placement:n,boundary:d,rootBoundary:c,padding:l})[s.default(n)],t}),{});return Object.keys(v).sort((function(e,t){return v[e]-v[t]}))}})),i.register("2kR67",(function(t,n){e(t.exports,"default",(()=>m));var r=i("25yov"),o=i("kcU3c"),a=i("8Prrf"),s=i("aiA7T"),d=i("8MXEs"),c=i("9ScGC"),l=i("ToLH2"),f=i("gVmJg"),u=i("gvEPV"),p=i("h1hob"),h=i("f8ZFZ");var m={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,m=n.mainAxis,g=void 0===m||m,v=n.altAxis,y=void 0!==v&&v,b=n.boundary,x=n.rootBoundary,w=n.altBoundary,k=n.padding,D=n.tether,I=void 0===D||D,S=n.tetherOffset,L=void 0===S?0:S,C=f.default(t,{boundary:b,rootBoundary:x,padding:k,altBoundary:w}),E=o.default(t.placement),P=u.default(t.placement),T=!P,A=a.default(E),O=s.default(A),R=t.modifiersData.popperOffsets,$=t.rects.reference,j=t.rects.popper,H="function"==typeof L?L(Object.assign({},t.rects,{placement:t.placement})):L,M={x:0,y:0};if(R){if(g||y){var B="y"===A?r.top:r.left,F="y"===A?r.bottom:r.right,N="y"===A?"height":"width",q=R[A],U=R[A]+C[B],_=R[A]-C[F],G=I?-j[N]/2:0,z=P===r.start?$[N]:j[N],V=P===r.start?-j[N]:-$[N],W=t.elements.arrow,X=I&&W?c.default(W):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:p.default(),J=Z[B],Y=Z[F],Q=d.default(0,$[N],X[N]),K=T?$[N]/2-G-Q-J-H:z-Q-J-H,ee=T?-$[N]/2+G+Q+Y+H:V+Q+Y+H,te=t.elements.arrow&&l.default(t.elements.arrow),ne=te?"y"===A?te.clientTop||0:te.clientLeft||0:0,re=t.modifiersData.offset?t.modifiersData.offset[t.placement][A]:0,oe=R[A]+K-re-ne,ie=R[A]+ee-re;if(g){var ae=d.default(I?h.min(U,oe):U,q,I?h.max(_,ie):_);R[A]=ae,M[A]=ae-q}if(y){var se="x"===A?r.top:r.left,de="x"===A?r.bottom:r.right,ce=R[O],le=ce+C[se],fe=ce-C[de],ue=d.default(I?h.min(le,oe):le,ce,I?h.max(fe,ie):fe);R[O]=ue,M[O]=ue-ce}}t.modifiersData[i]=M}},requiresIfExists:["offset"]}})),i.register("aiA7T",(function(t,n){function r(e){return"x"===e?"y":"x"}e(t.exports,"default",(()=>r))})),i.register("8MXEs",(function(t,n){e(t.exports,"default",(()=>o));var r=i("f8ZFZ");function o(e,t,n){return r.max(e,r.min(t,n))}})),i.register("ihA6G",(function(t,n){e(t.exports,"default",(()=>p));var r=i("kcU3c"),o=i("9ScGC"),a=i("7EsEH"),s=i("ToLH2"),d=i("8Prrf"),c=i("8MXEs"),l=i("ECyxR"),f=i("bTdsf"),u=i("25yov");var p={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,a=e.options,p=n.elements.arrow,h=n.modifiersData.popperOffsets,m=r.default(n.placement),g=d.default(m),v=[u.left,u.right].indexOf(m)>=0?"height":"width";if(p&&h){var y=function(e,t){return e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,l.default("number"!=typeof e?e:f.default(e,u.basePlacements))}(a.padding,n),b=o.default(p),x="y"===g?u.top:u.left,w="y"===g?u.bottom:u.right,k=n.rects.reference[v]+n.rects.reference[g]-h[g]-n.rects.popper[v],D=h[g]-n.rects.reference[g],I=s.default(p),S=I?"y"===g?I.clientHeight||0:I.clientWidth||0:0,L=k/2-D/2,C=y[x],E=S-b[v]-y[w],P=S/2-b[v]/2+L,T=c.default(C,P,E),A=g;n.modifiersData[i]=((t={})[A]=T,t.centerOffset=T-P,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&a.default(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}})),i.register("8pYOB",(function(t,n){e(t.exports,"default",(()=>d));var r=i("25yov"),o=i("gVmJg");function a(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function s(e){return[r.top,r.right,r.bottom,r.left].some((function(t){return e[t]>=0}))}var d={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,d=t.modifiersData.preventOverflow,c=o.default(t,{elementContext:"reference"}),l=o.default(t,{altBoundary:!0}),f=a(c,r),u=a(l,i,d),p=s(f),h=s(u);t.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:u,isReferenceHidden:p,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":h})}}})),i.register("l7khe",(function(t,n){e(t.exports,"DATA",(()=>i("9oVwM").DATA)),e(t.exports,"Ids",(()=>i("huaIw").Ids)),e(t.exports,"ID",(()=>i("huaIw").ID)),e(t.exports,"Random",(()=>i("2Gx0X").Random)),e(t.exports,"State",(()=>i("ayaZo").State));i("9oVwM"),i("huaIw"),i("2Gx0X"),i("ayaZo")})),i.register("9oVwM",(function(t,n){e(t.exports,"ARCHFIEND",(()=>c)),e(t.exports,"DATA",(()=>h)),e(t.exports,"CARDS",(()=>m));var r=i("huaIw"),o=i("ayaZo"),a=i("iBGif");const s=(e,t,n,r,i)=>{const a=e.clone();a.remove(t,n),a.major(`Summon "${i.name}" in Attack Position`),a.summon(i.id),o.State.transition(r,a)},d=e=>(t,n,r,i,a)=>{if(!a.can(t,n))return;const s=t.clone();s.remove(n,r),s.major(`Activate${"spells"===n?" face-down":""} "${a.name}"`),"Spell"===a.type&&"Continuous"===a.subType?s.add("spells",a.id):s.add("graveyard",a.id),e&&e(s),s.inc(),o.State.transition(i,s)},c=(e,t,n,i,a)=>{if(!a.can(e,t))return;const s="hand"===t||r.ID.facedown(e[t][n]),d=s?`Activate${"spells"===t?" face-down":""} "${a.name}" then pay`:"Pay";if(e.known()){const c=e.clone();c.major(`${d} 500 LP (${c.lifepoints} -> ${c.lifepoints-500}) to activate effect of "${a.name}"`),c.minor(`Declare "${r.ID.decode(c.deck[c.deck.length-1]).name}"`),c.lifepoints-=500,c.remove(t,n),c.add("spells",`${a.id}1`),c.draw(),s&&c.inc(),o.State.transition(i,c)}const c=e.clone();c.major(`${d} 500 LP (${c.lifepoints} -> ${c.lifepoints-500}) to activate effect of "${a.name}"`),c.minor('Declare "Blue-Eyes White Dragon"'),c.lifepoints-=500,c.remove(t,n),c.add("spells",`${a.id}1`);const l=r.ID.decode(c.deck.pop());c.minor(`Excavate "${l.name}"`),c.add("graveyard",l.id),s&&c.inc(),o.State.transition(i,c)},l=(e,t)=>{const n="hand"===t?1:0;return e.hand.length>n&&e.deck.length>=e.hand.length-n},f=(e,t)=>{const n=new Set;for(let i=0;i<e.deck.length;i++){const a=r.ID.id(e.deck[i]);if(n.has(a))continue;const s=r.ID.decode(a);if("Monster"===s.type&&s.atk<=1500){const n=e.clone();n.minor(`Add "${r.ID.decode(a).name}" from Deck to hand after "Sangan" was sent to the Graveyard`),n.add("hand",r.ID.id(n.deck.splice(i,1)[0])),n.shuffle(),o.State.transition(t,n)}}if(!n.size){const n=e.clone();n.minor('Fail to find "Sangan" target in Deck'),n.shuffle(),o.State.transition(t,n)}},u=e=>(t,n,i,a,s)=>{if(!l(t,n))return;const d=t.clone();d.remove(n,i),d.add("graveyard",s.id);const c=d.hand.filter((e=>"Spell"===r.ID.decode(e).type)),f="hand"===n?1:0,u=Math.min(5-t.spells.length-f,c.length,d.hand.length-1);for(let t=1;t<=u;t++)for(const i of v(d.hand,t,(e=>"Spell"===r.ID.decode(e).type))){const t=d.clone(),c=[];for(const[e,n]of i.entries()){const r=d.hand[n];c.push(r),t.add("spells",`(${r})`),t.remove("hand",n-e)}t.major(`Set ${r.ID.names(c)} face-down then activate${"spells"===n?" face-down":""} "${s.name}"`);const l=t.hand.length;e(t),t.hand=[],t.draw(l),t.inc(),o.State.transition(a,t)}d.major(`Activate${"spells"===n?" face-down":""} "${s.name}"`);const p=d.hand.length;e(d),d.hand=[],d.draw(p),d.inc(),o.State.transition(a,d)},p=(e,t)=>e-t,h={"A Feather of the Phoenix":{id:r.Ids.AFeatherOfThePhoenix,type:"Spell",subType:"Normal",text:"Discard 1 card, then target 1 card in your Graveyard; return that target to the top of your Deck.",can:(e,t)=>!!(e.graveyard.length&&e.hand.length>=("hand"===t?2:1)),play(e,t,n,r){if(!this.can(e,t))return;const i={discard:new Set,graveyard:new Set};for(let a=0;a<e.hand.length;a++){const s=e.hand[a];if(!i.discard.has(s)&&("hand"!==t||n!==a))for(let d=0;d<e.graveyard.length;d++){const c=e.graveyard[d];if(i.graveyard.has(c))continue;i.graveyard.add(c);const l=e.clone();l.feather(t,n,s,c,a,d),o.State.transition(r,l)}}}},"Archfiend's Oath":{id:r.Ids.ArchfiendsOath,type:"Spell",subType:"Continuous",text:"Once per turn: You can pay 500 Life Points, then declare 1 card name; excavate the top card of your Deck, and if it is the declared card, add it to your hand. Otherwise, send it to the Graveyard.",can:e=>!!(e.lifepoints>500&&e.deck.length),score(e,t,n){return a["Archfiend's Oath"][+(this.can(e,t)&&!r.ID.data(n))]},play(e,t,n,r,i,a){c(e,t,n,r,i,a);const s=e.clone();s.major(`Activate${"spells"===t?" face-down":""} "${i.name}"`),s.remove(t,n),s.add("spells",i.id),s.inc(),o.State.transition(r,s)}},"Black Pendant":{id:r.Ids.BlackPendant,type:"Spell",subType:"Equip",text:"The equipped monster gains 500 ATK. If this card is sent from the field to the Graveyard: Inflict 500 damage to your opponent.",can:e=>!!e.monsters.length,play(e,t,n,i,a){for(let s=0;s<e.monsters.length;s++){const d=e.clone();d.remove(t,n),d.major(`${"spells"===t?`Flip face-down "${a.name}" and equip`:`Equip "${a.name}"`} to "${r.ID.decode(d.monsters[s]).name}"`),d.add("spells",`${a.id}${s}`),d.inc(),o.State.transition(i,d)}}},"Card Destruction":{id:r.Ids.CardDestruction,type:"Spell",subType:"Normal",text:"Both players discard as many cards as possible from their hands, then each player draws the same number of cards they discarded.",can:l,play:u((e=>{for(const t of e.hand)e.add("graveyard",t);e.minor(`Discard ${r.ID.names(e.hand)}`)}))},"Convulsion of Nature":{id:r.Ids.ConvulsionOfNature,type:"Spell",subType:"Continuous",text:"Both players must turn their Decks upside down.",can:e=>!!e.deck.length,score:e=>a["Convulsion of Nature"][+(e.deck.length&&!e.reversed)],play:d((e=>e.reverse()))},"Cyber Jar":{id:r.Ids.CyberJar,type:"Monster",attribute:"Dark",level:3,atk:900,def:900,text:"Rock/Flip/Effect – FLIP: Destroy all monsters on the field, then both players reveal the top 5 cards from their Decks, then Special Summon all revealed Level 4 or lower monsters in face-up Attack Position or face-down Defense Position, also add any remaining cards to their hand. (If either player has less than 5 cards in their Deck, reveal as many as possible).",score:(e,t)=>a["Cyber Jar"][+!(e.summoned||"hand"===t)],play:s},"Different Dimension Capsule":{id:r.Ids.DifferentDimensionCapsule,type:"Spell",subType:"Normal",text:"After this card's activation, it remains on the field. When this card is activated: Banish 1 card from your Deck, face-down. During your second Standby Phase after this card's activation, destroy this card, and if you do, add that card to the hand.",can:e=>!!e.deck.length,play(e,t,n,i,a){const s=new Set;for(let d=0;d<e.deck.length;d++){const c=e.deck[d];if(s.has(c))continue;const l=e.clone();l.major(`Activate${"spells"===t?" face-down":""} "${a.name}"`),l.remove(t,n),l.add("spells",`${a.id}${e.turn}`),l.minor(`Banish ${r.ID.decode(l.deck[d]).name} from the deck face-down`),l.add("banished",`(${r.ID.id(l.deck.splice(d,1)[0])})`),l.shuffle(),l.inc(),o.State.transition(i,l)}}},"Giant Trunade":{id:r.Ids.GiantTrunade,type:"Spell",subType:"Normal",text:"Return all Spells/Traps on the field to the hand.",can:(e,t)=>e.spells.length>("hand"===t?0:1),play:d((e=>{for(const t of e.spells){const n=r.ID.decode(t);e.add("hand",n.id),r.ID.facedown(t)||(n.id===r.Ids.ConvulsionOfNature?e.reverse(!0):n.id===r.Ids.DifferentDimensionCapsule&&e.banish())}e.minor(`Return ${r.ID.names(e.spells)} to hand`),e.spells=[]}))},"Graceful Charity":{id:r.Ids.GracefulCharity,type:"Spell",subType:"Normal",text:"Draw 3 cards, then discard 2 cards.",can:e=>e.deck.length>=3,play(e,t,n,i,a){if(!this.can(e,t))return;const s=e.clone();s.major(`Activate${"spells"===t?" face-down":""} "${a.name}"`),s.remove(t,n),s.add("graveyard",a.id),s.draw(3);for(const[e,t]of v(s.hand,2)){const n=s.clone();n.minor(`Discard "${r.ID.decode(s.hand[e]).name}" and "${r.ID.decode(s.hand[t]).name}"`),n.discard([e,t]),n.inc(),o.State.transition(i,n)}}},"Level Limit - Area B":{id:r.Ids.LevelLimitAreaB,type:"Spell",subType:"Continuous",text:"Change all face-up Level 4 or higher monsters to Defense Position.",can:(e,t)=>"spells"!==t,play:d()},"Pot of Greed":{id:r.Ids.PotOfGreed,type:"Spell",subType:"Normal",text:"Draw 2 cards.",can:e=>e.deck.length>=2,play:d((e=>e.draw(2)))},"Premature Burial":{id:r.Ids.PrematureBurial,type:"Spell",subType:"Equip",text:"Activate this card by paying 800 Life Points, then target 1 monster in your Graveyard; Special Summon that target in Attack Position and equip it with this card. When this card is destroyed, destroy the equipped monster.",can(e){if(!e.graveyard.length||e.monsters.length>4||e.lifepoints<=800)return!1;for(const t of e.graveyard){if("Monster"===r.ID.decode(t).type)return!0}return!1},score(e){if(!e.graveyard.length||e.monsters.length>4||e.lifepoints<=800)return a["Premature Burial"][0];let t=0;for(const n of e.graveyard){const o=r.ID.decode(n);"Monster"===o.type&&(t=Math.max(t,o.score(e,"monsters",o.id)))}return a["Premature Burial"][1]+t},play(e,t,n,i,a){if(!e.graveyard.length||e.monsters.length>4||e.lifepoints<=800)return;const s=new Set;for(let d=0;d<e.graveyard.length;d++){const c=e.graveyard[d];if(s.has(c))continue;const l=r.ID.decode(c);if("Monster"===l.type){s.add(c);const r=e.clone();r.major(`Pay 800 LP (${r.lifepoints} -> ${r.lifepoints-800}) to activate effect of "${a.name}"`),r.minor(`Special Summon "${l.name}" in Attack Position from Graveyard`),r.lifepoints-=800,r.remove("graveyard",d);const f=r.summon(c,!0);r.remove(t,n),r.add("spells",`${a.id}${f}`),r.inc(f),o.State.transition(i,r)}}}},"Heavy Storm":{id:r.Ids.HeavyStorm,type:"Spell",subType:"Normal",text:"Destroy all Spells/Traps on the field.",can:(e,t)=>e.spells.length>("hand"===t?0:1),play:d((e=>{for(const t of e.spells){const n=r.ID.decode(t);if(e.add("graveyard",n.id),!r.ID.facedown(t))if(n.id===r.Ids.ConvulsionOfNature)e.reverse(!0);else if(n.id===r.Ids.BlackPendant)e.mclear(r.ID.data(t));else if(n.id===r.Ids.PrematureBurial){const n=e.mremove(r.ID.data(t));e.add("graveyard",n.id),e.minor(`Sending "${r.ID.decode(n.id).name}" to the Graveyard after its equipped "${r.ID.decode(t).name}" was destroyed`)}else n.id===r.Ids.DifferentDimensionCapsule&&e.banish()}e.minor(`Send ${r.ID.names(e.spells)} to Graveyard`),e.spells=[]}))},Reload:{id:r.Ids.Reload,type:"Spell",subType:"Quick-Play",text:"Send all cards from your hand to the Deck, then shuffle. Then, draw the same number of cards you added to the Deck.",can:l,play:u((e=>{e.deck.push(...e.hand),e.minor(`Return ${r.ID.names(e.hand)} to Deck`),e.shuffle()}))},"Reversal Quiz":{id:r.Ids.ReversalQuiz,type:"Spell",subType:"Normal",text:"Send all cards from your hand and your field to the Graveyard, then call Spell, Trap, or Monster; reveal the top card of your Deck. If you called it right, both players exchange Life Points.",can:e=>!(!e.deck.length||!(e.monsters.length||e.spells.length||e.hand.length)),play(e,t,n,i,a){if(!this.can(e,t))return;let s=!1;const d=e.clone();d.major(`Activate${"spells"===t?" face-down":""} "${a.name}"`),d.hand.length&&d.minor(`Send ${r.ID.names(d.hand)} from hand to Graveyard`),(d.monsters.length||d.spells.length)&&d.minor(`Send ${r.ID.names([...d.monsters,...d.spells])} from field to Graveyard`),d.graveyard.push(...d.hand),d.hand=[];for(const e of d.monsters){const t=r.ID.decode(e);t.id===r.Ids.Sangan&&(s=!0),d.graveyard.push(t.id)}d.monsters=[];for(const e of d.spells){const t=r.ID.decode(e);r.ID.facedown(e)||(t.id===r.Ids.ConvulsionOfNature?d.reverse(!0):t.id===r.Ids.DifferentDimensionCapsule&&d.banish()),d.graveyard.push(t.id)}d.spells=[],d.graveyard.sort();const c=d.deck[d.deck.length-1];r.ID.known(c)||(d.deck[d.deck.length-1]=`(${c})`),d.minor(`Call "Trap", reveal "${r.ID.decode(c).name}"`),s?f(d,i):o.State.transition(i,d)}},"Royal Magical Library":{id:r.Ids.RoyalMagicalLibrary,type:"Monster",attribute:"Light",level:4,atk:0,def:2e3,text:"Spellcaster/Effect – Each time a Spell is activated, place 1 Spell Counter on this card when that Spell resolves (max. 3). You can remove 3 Spell Counters from this card; draw 1 card.",score:(e,t)=>a["Royal Magical Library"][+("monsters"===t)],play:s},Sangan:{id:r.Ids.Sangan,type:"Monster",attribute:"Dark",level:3,atk:1e3,def:600,text:"Fiend/Effect – If this card is sent from the field to the Graveyard: Add 1 monster with 1500 or less ATK from your Deck to your hand.",score:(e,t)=>a.Sangan[+!(e.summoned||"hand"===t)],play:s},"Spell Reproduction":{id:r.Ids.SpellReproduction,type:"Spell",subType:"Normal",text:"Send 2 Spells from your hand to the Graveyard, then target 1 Spell in your Graveyard; add it to your hand.",can(e,t){const n=e.graveyard.filter((e=>"Spell"===r.ID.decode(e).type)).length,o=e.hand.filter((e=>"Spell"===r.ID.decode(e).type)).length>("hand"===t?2:1);return!(!n||!o)},score:(e,t)=>a["Spell Reproduction"][+!!(e.graveyard.length&&e.hand.length>("hand"===t?2:1))],play(e,t,n,i,a){if(!(e.graveyard.length&&e.hand.length>("hand"===t?2:1)))return;let s;const d=new Set;for(let c=0;c<e.graveyard.length;c++){const l=e.graveyard[c];if(!d.has(l)&&"Spell"===r.ID.decode(l).type){if(d.add(l),!s){s=new Set;for(const[o,i]of v(e.hand,2))("hand"!==t||n!==o&&n!==i)&&"Spell"===r.ID.decode(e.hand[o]).type&&"Spell"===r.ID.decode(e.hand[i]).type&&s.add([o,i]);if(!s.size)return}for(const[d,l]of s){const s=e.clone();s.major(`Activate${"spells"===t?" face-down":""} "${a.name}"`),s.minor(`Discard "${r.ID.decode(s.hand[d]).name}" and "${r.ID.decode(s.hand[l]).name}"`);const f=s.remove("graveyard",c);"hand"===t?s.discard([n,d,l].sort(p)):(s.remove(t,n),s.add("graveyard",a.id),s.discard([d,l])),s.minor(`Add "${r.ID.decode(f).name}" in the Graveyard to hand`),s.add("hand",f),s.inc(),o.State.transition(i,s)}}}}},"Thunder Dragon":{id:r.Ids.ThunderDragon,type:"Monster",attribute:"Light",level:5,atk:1600,def:1500,text:'Thunder/Effect – You can discard this card; add up to 2 "Thunder Dragon" from your Deck to your hand.',score:(e,t)=>a["Thunder Dragon"][+(e.deck.length&&"hand"===t)],play(e,t,n,i,a){for(let t=0;t<e.monsters.length;t++){const s=e.clone(),d=r.ID.decode(e.monsters[t]);s.major(`Tribute "${d.name}" to Summon "${a.name}"`),s.tribute(t,n),d.id===r.Ids.Sangan?f(s,i):o.State.transition(i,s)}}},"Toon Table of Contents":{id:r.Ids.ToonTableOfContents,type:"Spell",subType:"Normal",text:'Add 1 "Toon" card from your Deck to your hand.',can:e=>!!e.deck.length,play(e,t,n,i,a,s){const d=new Set;for(let s=0;s<e.deck.length;s++){const c=r.ID.decode(e.deck[s]);if(!d.has(c.id)&&c.name.startsWith("Toon")){d.add(c.id);const l=e.clone();l.major(`Activate${"spells"===t?" face-down":""} "${a.name}"`),l.minor(`Add "${c.name}" from Deck to hand`),l.remove(t,n),l.add("graveyard",a.id),l.add("hand",r.ID.id(l.deck.splice(s,1)[0])),l.shuffle(),l.inc(),o.State.transition(i,l)}}if(!d.size&&(s||e.reversed)){const r=e.clone();r.major(`Activate${"spells"===t?" face-down":""} "${a.name}"`),r.minor('Fail to find "Toon" card in Deck'),r.remove(t,n),r.add("graveyard",a.id),r.shuffle(),r.inc(),o.State.transition(i,r)}}},"Toon World":{id:r.Ids.ToonWorld,type:"Spell",subType:"Continuous",text:"Activate this card by paying 1000 Life Points.",can:e=>e.lifepoints>1e3,play:d((e=>{e.minor(`Pay 1000 LP (${e.lifepoints} -> ${e.lifepoints-1e3})`),e.lifepoints-=1e3}))},"Upstart Goblin":{id:r.Ids.UpstartGoblin,type:"Spell",subType:"Normal",text:"Draw 1 card, then your opponent gains 1000 Life Points.",can:e=>!!e.deck.length,play:d((e=>e.draw()))}},m={};for(const e in h){const t=h[e],n="can"in t?(n,r)=>a[e][+t.can(n,r)]:()=>0;m[t.id]={score:n,...t,name:e}}function g(e,t){if(t>e.length||t<=0)return[];if(t===e.length)return[e];if(1===t){const t=[];for(const n of e)t.push([n]);return t}const n=[];for(let r=0;r<e.length-t+1;r++){const o=e.slice(r,r+1),i=g(e.slice(r+1),t-1);for(const e of i)n.push(o.concat(e))}return n}function v(e,t,n){const r=new Map,o=[];for(let i=0;i<e.length;i++){if(n&&!n(e[i]))continue;const a=r.get(e[i]);a&&a>=t||(r.set(e[i],(a||0)+1),o.push(i))}return g(o,t)}})),i.register("huaIw",(function(t,n){e(t.exports,"ID",(()=>o)),e(t.exports,"Ids",(()=>a));var r=i("9oVwM");const o=new class{facedown(e){return!!e&&"("===e.charAt(0)}known(e){return this.facedown(e)}data(e){return this.facedown(e)&&(e=e.slice(1,-1)),e.length>1?+e.slice(1):0}id(e){return e.charAt(this.facedown(e)?1:0)}decode(e){return r.CARDS[this.id(e)]}pretty(e){const t=this.decode(e),n=this.data(e),r=n?`${t.name}:${n}`:t.name;return this.facedown(e)?`(${r})`:r}names(e){if(!e.length)throw new RangeError;const t=e.map((e=>`"${this.decode(e).name}"`));if(1===t.length)return t[0];const n=t.pop();return`${t.join(", ")} and ${n}`}},a={LevelLimitAreaB:"A",BlackPendant:"B",CardDestruction:"C",DifferentDimensionCapsule:"D",AFeatherOfThePhoenix:"F",GracefulCharity:"G",HeavyStorm:"H",CyberJar:"J",PrematureBurial:"K",RoyalMagicalLibrary:"L",ArchfiendsOath:"O",PotOfGreed:"P",ReversalQuiz:"Q",Reload:"R",Sangan:"S",GiantTrunade:"T",UpstartGoblin:"U",ConvulsionOfNature:"V",ToonWorld:"W",ToonTableOfContents:"X",ThunderDragon:"Y",SpellReproduction:"Z"}})),i.register("ayaZo",(function(t,n){e(t.exports,"State",(()=>f));var r=i("9oVwM"),o=i("huaIw"),a=i("2Gx0X"),s=i("3L44y"),d=i("jRmVJ"),c=i("iBGif");const l=d;class f{static create(e,t){const n=[];for(const e in l)for(let t=0;t<l[e];t++)n.push(r.DATA[e].id);e.shuffle(n);const o=new f(e,8e3,1,!1,[],[],[],[],[],n,!1,t?[]:void 0);return o.draw(6,!0),o}constructor(e,t,n,r,o,i,a,s,d,c,l,f){this.random=e,this.lifepoints=t,this.turn=n,this.summoned=r,this.monsters=o,this.spells=i,this.hand=a,this.banished=s,this.graveyard=d,this.deck=c,this.reversed=l,this.trace=f}add(e,t){let n=0;for(;n<this[e].length;n++)if(this[e][n]>=t)return this[e].splice(n,0,t),n;return this[e].push(t),n}remove(e,t){return this[e].splice(t,1)[0]}madd(e){const t=this.add("monsters",e);for(let e=0;e<this.spells.length;e++){const n=o.ID.decode(this.spells[e]);if(!o.ID.facedown(this.spells[e])&&"Spell"===n.type&&"Equip"===n.subType){const r=o.ID.data(this.spells[e]);r>=t&&(this.spells[e]=`${n.id}${r+1}`)}}return t}mremove(e){const t=o.ID.id(this.remove("monsters",e)),n=[],r=[];for(const t of this.spells){const i=o.ID.decode(t);if(o.ID.facedown(t)||"Spell"!==i.type||"Equip"!==i.subType)r.push(t);else{const a=o.ID.data(t);a>e?r.push(`${i.id}${a-1}`):a===e?n.push(i.id):r.push(t)}}return this.spells=r,{id:t,equips:n}}mclear(e){const{id:t,equips:n}=this.mremove(e),r=this.madd(o.ID.id(t));for(const e of n)this.add("spells",`${e}${r}`)}summon(e,t=!1){return this.summoned=this.summoned||!t,this.madd(e)}tribute(e,t){const{id:n,equips:r}=this.mremove(e);this.add("graveyard",n);for(const e of r)this.add("graveyard",e);r.length&&this.minor(`Sending ${o.ID.names(r)} equipped to "${o.ID.decode(n).name}" to the Graveyard`);const i=this.remove("hand",t);return this.summon(i)}banish(){if(this.banished[0]&&o.ID.facedown(this.banished[0])){const e=this.remove("banished",0);this.add("banished",o.ID.id(e))}}major(e){this.trace&&this.trace.push(e)}minor(e){this.trace&&this.trace.push(`  ${e}`)}discard(e){let t=0;for(const n of e){const e=this.hand.splice(n-t++,1)[0];this.add("graveyard",e)}}inc(e){for(let t=0;t<this.monsters.length;t++){if("number"==typeof e&&e===t)continue;const n=this.monsters[t],r=o.ID.decode(n);if(o.ID.facedown(n)||"Royal Magical Library"!==r.name)continue;const i=o.ID.data(n);i<3&&(this.monsters[t]=`${r.id}${i+1}`,this.minor(`Add Spell Counter to "${r.name}" (${i} -> ${i+1})`))}}shuffle(){this.deck=this.deck.map((e=>o.ID.id(e))),this.random.shuffle(this.deck),this.minor("Shuffle Deck")}reverse(e=!1){if(e){if(!this.reversed)return;this.reversed=!1,this.deck.length&&(this.deck.reverse(),o.ID.known(this.deck[0])||(this.deck[0]=`(${this.deck[0]})`),this.minor(`Turn Deck back face-down ("${o.ID.decode(this.deck[0]).name}" now on bottom)`))}else{if(this.reversed)return;this.reversed=!0,this.deck.length&&(this.deck.reverse(),this.minor(`Turn Deck face-up ("${o.ID.decode(this.deck[this.deck.length-1]).name}" now on top)`))}}known(e=!1){if(!this.deck.length)return;const t=this.deck[this.deck.length-1];if(!e&&this.reversed)return t;if(!this.reversed&&o.ID.known(this.deck[this.deck.length-1]))return t;const n=new Set,r=new Set;for(const t of this.deck){if(o.ID.known(t))continue;const i=o.ID.decode(t);if(n.add(i.id),r.add(i.type),!e&&n.size>1)return;if(e&&n.size>1&&r.size>1)return}return e&&this.reversed?this.deck[0]:t}search(e={}){const t={key:this.toString(),state:this,score:this.score()};return e.width?s.bulbSearch(t,e.width,e.cutoff,e.prescient):s.bestFirstSearch(t,e.cutoff,e.prescient)}static transition(e,t){const n=t.toString();e.set(n,{key:n,state:t,score:t.score()})}next(e=!0){if(this.lifepoints<=0)return[];const t=new Map;for(let e=0;e<this.monsters.length;e++){const n=this.monsters[e],r=o.ID.decode(n);if(r.id===o.Ids.RoyalMagicalLibrary&&(!o.ID.facedown(n)&&3===o.ID.data(n)&&this.deck.length)){const n=this.clone();n.major(`Remove 3 Spell Counters from "${r.name}"`),n.mclear(e),n.draw(),f.transition(t,n)}}const n=new Set;for(let i=0;i<this.spells.length;i++){const a=this.spells[i];if(n.has(a))continue;n.add(a);const s=o.ID.decode(a);s.id!==o.Ids.ReversalQuiz&&(o.ID.facedown(a)?s.play(this,"spells",i,t,s,e):s.id!==o.Ids.ArchfiendsOath||o.ID.data(a)||r.ARCHFIEND(this,"spells",i,t,s,e))}const i=new Set;for(let n=0;n<this.hand.length;n++){const r=this.hand[n];if(i.has(r))continue;i.add(r);const a=o.ID.decode(r);if(r!==o.Ids.ReversalQuiz)if(r===o.Ids.ThunderDragon&&this.deck.length){const r=[];for(let e=0;e<this.deck.length&&r.length<2;e++)o.ID.id(this.deck[e])===o.Ids.ThunderDragon&&r.push(e);if(2===r.length){const e=this.clone();e.major(`Discard "${a.name}"`),e.minor(`Add 2 "${a.name}" from Deck to hand`),e.remove("hand",n),e.add("graveyard",a.id),e.add("hand",o.ID.id(e.deck.splice(r[0],1)[0])),e.add("hand",o.ID.id(e.deck.splice(r[1]-1,1)[0])),e.shuffle(),f.transition(t,e)}if(r.length){const e=this.clone();e.major(`Discard "${a.name}"`),e.minor(`Add "${a.name}" from Deck to hand`),e.remove("hand",n),e.add("graveyard",a.id),e.add("hand",o.ID.id(e.deck.splice(r[0],1)[0])),e.shuffle(),f.transition(t,e)}else if(e||this.reversed){const e=this.clone();e.major(`Discard "${a.name}"`),e.minor(`Fail to find "${a.name}" in Deck`),e.remove("hand",n),e.add("graveyard",a.id),e.shuffle(),f.transition(t,e)}this.monsters.length&&this.monsters.length<5&&!this.summoned&&a.play(this,"hand",n,t,a,e)}else("Monster"===a.type&&this.monsters.length<5&&!this.summoned||"Spell"===a.type&&this.spells.length<5)&&a.play(this,"hand",n,t,a,e)}return Array.from(t.values()).sort(f.compare)}static compare(e,t){return t.score-e.score||e.state.lifepoints-t.state.lifepoints||e.state.deck.length-t.state.deck.length||+o.ID.known(t.state.deck[t.state.deck.length-1])-+o.ID.known(e.state.deck[e.state.deck.length-1])||+t.state.reversed-+e.state.reversed}score(){if(this.end())return 1/0;let e=0;const t={active:0,total:0};for(const n of this.monsters){const r=o.ID.decode(n);r.id===o.Ids.RoyalMagicalLibrary&&(t.total++,o.ID.data(n)<3&&t.active++),e+=r.score(this,"monsters",n)}const n=t.active*c.libraries[1]+t.total*c.libraries[0];for(const t of this.spells){const r=o.ID.decode(t).score(this,"spells",t);r&&(o.ID.facedown(t)?(e+=r*c.facedown,e+=n):e+=r)}const r=this.spells.length<5;for(const t of this.hand){const i=o.ID.decode(t);("Spell"!==i.type||r)&&("Monster"===i.type&&this.summoned||(e+=i.score(this,"hand",t),"Spell"===i.type&&(e+=n)))}return e}end(e=!0){if(this.lifepoints>500)return!1;if(!this.monsters.length||!this.deck.length)return!1;const t=this.known(!0);if(!t)return!1;const n={pendant:!1,quiz:!1,feather:-1,upstart:-1};let r=-1;for(let e=0;e<this.hand.length;e++){const t=this.hand[e];t===o.Ids.BlackPendant?n.pendant=!0:t===o.Ids.ReversalQuiz?n.quiz=!0:t===o.Ids.AFeatherOfThePhoenix?n.feather=e:t===o.Ids.UpstartGoblin?n.upstart=e:r=e}if(n.pendant&&n.quiz&&this.spells.length<=3)return this.win(t,!0,{pendant:!1,quiz:!1});let i=!0;const a={pendant:!1,quiz:!1,feather:-1,upstart:-1};for(let e=0;e<this.spells.length;e++){const t=o.ID.id(this.spells[e]);t===o.Ids.BlackPendant?(a.pendant=!0,o.ID.facedown(t)||(i=!1)):t===o.Ids.ReversalQuiz?a.quiz=!0:t===o.Ids.AFeatherOfThePhoenix?a.feather=e:t===o.Ids.UpstartGoblin&&(a.upstart=e)}if(a.quiz&&a.pendant)return this.win(t,i,{pendant:!0,quiz:!0});if(n.pendant&&this.spells.length<=4&&a.quiz)return this.win(t,i,{pendant:!1,quiz:!0});if(n.quiz&&this.spells.length<=4&&a.pendant)return this.win(t,i,{pendant:!0,quiz:!1});if(!e)return!1;if(!(n.pendant||a.pendant||n.quiz||a.quiz))return!1;if(!(r>=0&&(n.feather>=0||a.feather>=0)))return!1;if(this.spells.length>5-(+n.pendant+ +n.quiz+ +(n.feather>=0)))return!1;const s=this.hand[r],d=n.pendant||a.pendant?o.Ids.ReversalQuiz:o.Ids.BlackPendant,c=this.graveyard.indexOf(d);if(c<0)return!1;if(n.upstart>=0||a.upstart>=0)return n.feather>=0?this.feather("hand",n.feather,s,d,r,c):this.feather("spells",a.feather,s,d,r,c),n.upstart>=0?(this.remove("hand",n.feather>=0&&n.feather<n.upstart?n.upstart-1:n.upstart),this.major('Activate "Upstart Goblin"')):(this.remove("spells",a.feather>=0&&a.feather<a.upstart?a.upstart-1:a.upstart),this.major('Activate face-down "Upstart Goblin"')),this.add("graveyard",o.Ids.UpstartGoblin),this.draw(),this.inc(),this.win(t,i,{pendant:a.pendant,quiz:a.quiz});for(let e=0;e<this.monsters.length;e++){if(o.ID.id(this.monsters[e])===o.Ids.RoyalMagicalLibrary&&o.ID.data(this.monsters[e])>=2)return n.feather>=0?this.feather("hand",n.feather,s,d,r,c):this.feather("spells",a.feather,s,d,r,c),this.major('Remove 3 Spell Counters from "Royal Magical Library"'),this.mclear(e),this.draw(),this.win(t,i,{pendant:a.pendant,quiz:a.quiz})}return!1}win(e,t,n){if(t){const e=o.ID.decode(this.monsters[0]);this.major(`${n.pendant?'Flip face-down "Black Pendant" and equip':'Equip "Black Pendant"'}  to "${e.name}"`)}this.major(`Activate${n.quiz?" face-down":""} "Reversal Quiz"`);const r=e=>o.ID.id(e)!==o.Ids.ReversalQuiz,i=this.hand.filter(r);i.length&&this.minor(`Send ${o.ID.names(i)} from hand to Graveyard`);const a=this.monsters.filter(r),s=this.spells.filter(r);(a.length||s.length)&&this.minor(`Send ${o.ID.names([...a,...s])} from field to Graveyard`);for(const e of this.spells){if(o.ID.decode(e).id===o.Ids.ConvulsionOfNature){this.reverse(!0);break}}return this.minor(`Call "${o.ID.decode(e).type}", reveal "${o.ID.decode(this.deck[this.deck.length-1]).name}"`),this.major(`After exchanging Life Points, opponent has ${this.lifepoints} LP and then takes 500 damage from "Black Pendant" being sent from the field to the Graveyard`),!0}feather(e,t,n,r,i,a){this.major(`Activate${"spells"===e?" face-down":""} "A Feather of the Phoenix"`),this.minor(`Discard "${o.ID.decode(n).name}"`),this.minor(`Return "${o.ID.decode(r).name}" in the Graveyard to the top of the Deck`),this.remove("graveyard",a),"hand"===e?this.discard(t<i?[t,i]:[i,t]):(this.remove(e,t),this.add("graveyard",o.Ids.AFeatherOfThePhoenix),this.add("graveyard",this.remove("hand",i))),this.deck.push(`(${r})`),this.inc()}draw(e=1,t=!1){if(e>this.deck.length)throw new Error("Deck out");const n=[];for(let t=0;t<e;t++){const e=o.ID.id(this.deck.pop());n.push(e),this.add("hand",e)}t?this.major(`Opening hand contains ${o.ID.names(n.sort())}`):this.minor(`Draw ${o.ID.names(n)}`)}clone(){return new f(new a.Random(this.random.seed),this.lifepoints,this.turn,this.summoned,this.monsters.slice(),this.spells.slice(),this.hand.slice(),this.banished.slice(),this.graveyard.slice(),this.deck.slice(),this.reversed,this.trace?.slice())}equals(e){return this.random.seed===e.random.seed&&this.lifepoints===e.lifepoints&&this.turn===e.turn&&this.summoned===e.summoned&&this.reversed===e.reversed&&u(this.monsters,e.monsters)&&u(this.spells,e.spells)&&u(this.hand,e.hand)&&u(this.banished,e.banished)&&u(this.graveyard,e.graveyard)&&u(this.deck,e.deck)&&(this.trace===e.trace||this.trace&&e.trace&&u(this.trace,e.trace))}toString(){return[this.random.seed,this.lifepoints,this.turn,+this.summoned,this.monsters.join(""),this.spells.join(""),this.hand.join(""),this.banished.join(""),this.graveyard.join(""),this.deck.join(""),+this.reversed].join("|")}static fromString(e){let t=0,n=e.indexOf("|");const r=new a.Random(+e.slice(0,n));t=n+1,n=e.indexOf("|",t);const o=+e.slice(t,n);t=n+1,n=e.indexOf("|",t);const i=+e.slice(t,n);t=n+1,n+=2;const s="1"===e.slice(t,n);t=n+1,n=e.indexOf("|",t);const d=this.parse(e.slice(t,n));t=n+1,n=e.indexOf("|",t);const c=this.parse(e.slice(t,n));t=n+1,n=e.indexOf("|",t);const l=e.slice(t,n).split("");t=n+1,n=e.indexOf("|",t);const u=this.parse(e.slice(t,n));t=n+1,n=e.indexOf("|",t);const p=e.slice(t,n).split("");t=n+1,n=e.indexOf("|",t);const h=this.parse(e.slice(t,n));t=n+1;const m="1"===e.slice(t);return new f(r,o,i,s,d,c,l,u,p,h,m)}static display(e,t){const n=[];let r=0;for(const o of t){o.startsWith("  ")||(e[r-1]&&n.push(`\n${e[r-1]}\n`),r++),n.push(o)}return n.join("\n")}static parse(e){const t=[];let n="",r=!0;for(let o=0;o<e.length;o++)r&&n&&(t.push(n),n=""),n+=e[o],r=o<e.length-1&&"("===e[o+1]||("("===n[0]?")"===n[n.length-1]:e[o+1]>="A"&&e[o+1]<="Z");return n&&t.push(n),t}static verify(e){const t=[],n=e=>e.map((e=>o.ID.pretty(e))).join(", ");if((e.lifepoints>8e3||e.lifepoints<=0)&&t.push(`LP: ${e.lifepoints}`),e.monsters.length>5||!u(e.monsters.slice().sort(),e.monsters))t.push(`Monsters: ${n(e.monsters)}`);else for(const r of e.monsters){const i=o.ID.decode(r);if("Monster"!==i.type||(o.ID.facedown(r)||i.id!==o.Ids.RoyalMagicalLibrary)&&o.ID.data(r)||o.ID.data(r)>3){t.push(`Monsters: ${n(e.monsters)}`);break}}if(e.spells.length>5||!u(e.spells.slice().sort(),e.spells))t.push(`Spells: ${n(e.spells)}`);else for(const r of e.spells){const i=o.ID.decode(r),a=o.ID.facedown(r),s=o.ID.data(r);if("Spell"!==i.type||a&&s||i.id===o.Ids.ArchfiendsOath&&s>1||!a&&"Spell"===i.type&&!["Continuous","Equip"].includes(i.subType)&&i.id!==o.Ids.DifferentDimensionCapsule){t.push(`Spells: ${n(e.spells)}`);break}if(!a&&"Spell"===i.type&&"Equip"===i.subType&&!e.monsters[s]){t.push(`Spells: ${n(e.spells)}`);break}}if(!e.hand.filter((e=>e.length>1)).length&&u(e.hand.slice().sort(),e.hand)||t.push(`Hand: ${n(e.hand)}`),(e.banished.length>40||!u(e.banished.slice().sort(),e.banished)||e.banished.filter((e=>o.ID.facedown(e))).length>1)&&t.push(`Banished: ${n(e.banished)}`),(e.graveyard.length>40||e.graveyard.filter((e=>e.length>1)).length||!u(e.graveyard.slice().sort(),e.graveyard))&&t.push(`Graveyard: ${n(e.graveyard)}`),e.deck.length>40)t.push(`Deck: ${n(e.deck)}`);else{let r=0;for(const i of e.deck){const a=o.ID.known(i);if(a||0!==r||(r=1),a&&1===r&&(r=2),!a&&2===r){t.push(`Deck: ${n(e.deck)}`);break}}}const i=[];for(const e in l)for(let t=0;t<l[e];t++)i.push(r.DATA[e].id);i.sort();const a=[...e.monsters.map((e=>o.ID.id(e))),...e.spells.map((e=>o.ID.id(e))),...e.hand,...e.banished.map((e=>o.ID.id(e))),...e.graveyard,...e.deck.map((e=>o.ID.id(e)))].sort();return u(i,a)||t.push(`Mismatch: ${i.length} (${i.join("")}) vs. ${a.length} (${a.join("")})\n`),t}}function u(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}})),i.register("2Gx0X",(function(t,n){e(t.exports,"Random",(()=>r));class r{static seed(e=4){return e=61^e^e>>>16,e+=e<<3,e^=e>>>4,e=Math.imul(e,668265261),(e^=e>>>15)>>>0}constructor(e=r.seed()){this.seed=e}next(e,t){e&&(e=Math.floor(e)),t&&(t=Math.floor(t));let n=this.seed+=1831565813;n=Math.imul(n^n>>>15,1|n),n^=n+Math.imul(n^n>>>7,61|n),n=(n^n>>>14)>>>0;const r=n/2**32;return void 0===e?r:t?Math.floor(r*(t-e))+e:Math.floor(r*e)}shuffle(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(this.next()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}sample(e,t=!1){if(0===e.length)throw new RangeError("Cannot sample an empty array");const n=this.next(e.length),r=e[n];if(t&&(e[n]=e[e.length-1],e.pop()),void 0===r&&!Object.prototype.hasOwnProperty.call(e,n))throw new RangeError("Cannot sample a sparse array");return r}}})),i.register("3L44y",(function(t,n){e(t.exports,"bestFirstSearch",(()=>i)),e(t.exports,"bulbSearch",(()=>c));const r=Math.pow(2,24)-1;class o{constructor(){this.maps=[new Map]}get size(){let e=0;for(const t of this.maps)e+=t.size;return e}has(e){for(let t=this.maps.length-1;t>=0;t--)if(this.maps[t].has(e))return!0;return!1}get(e){for(let t=this.maps.length-1;t>=0;t--){const n=this.maps[t].get(e);if(void 0!==n)return n}}set(e,t){let n;for(const t of this.maps){if(t.has(e))return this;n=t}return n.size===r&&(n=new Map,this.maps.push(n)),n.set(e,t),this}}function i(e,t,n){const i=t&&t>r?new o:new Map,s=a(e,i,[],t,n);return{visited:i.size,...s}}function a(e,t,n,r,o){if(t.set(e.key,1),n.push(e.key),r&&t.size>r)throw new RangeError;const i=e.state.next(o);for(const e of i){if(e.score>=1/0)return n.push(e.key),{path:n,trace:e.state.trace};if(!t.has(e.key)){const i=a(e,t,n.slice(),r,o);if(i)return i}}}var s,d;function c(e,t=5,n,i){if(t<=0)throw new RangeError(`Width B must be > 0 but is ${t}`);const a=n&&n>r?new o:new Map;for(let r=0;a.get(e.key)!==s.COMPLETE;r++){const o=l(e,t,r,a,[],n,i);if(o)return{visited:a.size,...o}}return{visited:a.size}}function l(e,t,n,r,o,i,a){if(o.push(e.key),r.set(e.key,s.PARTIAL),i&&r.size>i)throw new RangeError;let d=e.state.next(a);const c=d.length,f=t>=1?t:Math.ceil(c*t);if(n){const u=d.splice(0,f);let p=0;for(const e of d){if(e.score>=1/0)return o.push(e.key),{path:o,trace:e.state.trace};if(r.get(e.key)===s.COMPLETE)p++;else{const d=l(e,t,n-1,r,o.slice(),i,a);if(d)return d;r.get(e.key)===s.COMPLETE&&p++}}for(const e of u){if(e.score>=1/0)return o.push(e.key),{path:o,trace:e.state.trace};if(r.get(e.key)===s.COMPLETE)p++;else{const d=l(e,t,n,r,o.slice(),i,a);if(d)return d;r.get(e.key)===s.COMPLETE&&p++}}p===c&&r.set(e.key,s.COMPLETE)}else{c>f&&(d=d.slice(0,f));let n=0;for(const e of d){if(e.score>=1/0)return o.push(e.key),{path:o,trace:e.state.trace};const d=r.get(e.key);if(d===s.COMPLETE)n++;else if(!d){const d=l(e,t,0,r,o.slice(),i,a);if(d)return d;r.get(e.key)===s.COMPLETE&&n++}}n===c&&r.set(e.key,s.COMPLETE)}}(d=s||(s={}))[d.PARTIAL=1]="PARTIAL",d[d.COMPLETE=2]="COMPLETE"})),i.register("jRmVJ",(function(e,t){e.exports=JSON.parse('{"A Feather of the Phoenix":3,"Archfiend\'s Oath":3,"Black Pendant":1,"Card Destruction":1,"Convulsion of Nature":3,"Cyber Jar":0,"Different Dimension Capsule":0,"Giant Trunade":3,"Graceful Charity":1,"Heavy Storm":0,"Level Limit - Area B":2,"Pot of Greed":1,"Premature Burial":1,"Reload":3,"Reversal Quiz":1,"Royal Magical Library":3,"Sangan":1,"Spell Reproduction":3,"Thunder Dragon":3,"Toon Table of Contents":3,"Toon World":2,"Upstart Goblin":2}')})),i.register("iBGif",(function(e,t){e.exports=JSON.parse('{"facedown":0.9,"libraries":[0.16666666666666666,0.3333333333333333],"A Feather of the Phoenix":[0,1],"Archfiend\'s Oath":[0,1],"Black Pendant":[1,1],"Card Destruction":[0,1],"Convulsion of Nature":[0,1],"Cyber Jar":[0,0.3333333333333333],"Different Dimension Capsule":[0,1],"Giant Trunade":[1,1.5],"Graceful Charity":[0,1.5],"Heavy Storm":[0,0],"Level Limit - Area B":[0,0.3333333333333333],"Pot of Greed":[0,1.5],"Premature Burial":[0,1],"Reload":[0,1],"Reversal Quiz":[1,1],"Royal Magical Library":[1.3,4],"Sangan":[0,0.3333333333333333],"Spell Reproduction":[0,1],"Thunder Dragon":[0,1],"Toon Table of Contents":[0,1],"Toon World":[0,1],"Upstart Goblin":[0,1]}')})),i.register("2h5ed",(function(e,t){var n=i("9682f"),r=i("4PVnu"),o=i("3HAXF"),a=i("jNhZQ"),s=i("LWFVN"),d=i("bDzj8"),c=i("7XdLW"),l=i("eWAjb"),f=i("fkQtK"),u=i("2aIow"),p=i("f2Zt1"),h=i("d2b19"),m=i("eUyrr"),g=i("3Liad"),v=i("3bgJy"),y=i("2ZyOZ"),b=i("5YUaF"),x=i("bGMYa"),w=i("9i0rG"),k=i("bx0Ns"),D=i("1tRSL"),I=i("kQggc"),S=i("9IOZm"),L=i("bhh99"),C=i("1s2U8"),E=i("3DCkv"),P=i("5X43A"),T=i("6CjfC"),A=i("1lvoB"),O=i("4YNxx"),R=i("cQ7Bf"),$=i("6a1uK"),j=i("gckS0"),H=i("e7vrG"),M=i("68YyE"),B=i("5D6Ok"),F=i("5DuEq"),N=i("27uKx");e.exports={battle:{"Counter.svg":n},icon:{"android-chrome-192x192.png":r,"android-chrome-512x512.png":o,"apple-touch-icon.png":a,"favicon-16x16.png":s,"favicon-32x32.png":d},sleeves:{"Default.png":c},cards:{art:{"AFeatherofthePhoenix.jpg":l,"ArchfiendsOath.jpg":f,"BlackPendant.jpg":u,"CardDestruction.jpg":p,"ConvulsionofNature.jpg":h,"CyberJar.jpg":m,"DifferentDimensionCapsule.jpg":g,"GiantTrunade.jpg":v,"GracefulCharity.jpg":y,"HeavyStorm.jpg":b,"LevelLimitAreaB.jpg":x,"PotofGreed.jpg":w,"PrematureBurial.jpg":k,"Reload.jpg":D,"ReversalQuiz.jpg":I,"RoyalMagicalLibrary.jpg":S,"Sangan.jpg":L,"SpellReproduction.jpg":C,"ThunderDragon.jpg":E,"ToonTableofContents.jpg":P,"ToonWorld.jpg":T,"UpstartGoblin.jpg":A},bgs:{"Spell.jpg":O,"effectMonster.jpg":R},svgs:{attributes:{"Dark.svg":$,"Light.svg":j,"Spell.svg":H},subtypes:{"Continuous.svg":M,"Equip.svg":B,"Quick-Play.svg":F,"star.svg":N}}}}})),i.register("9682f",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("16Pax")})),i.register("kPq84",(function(t,n){var r;e(t.exports,"getBundleURL",(()=>r),(e=>r=e));var o={};function i(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return i(e[2])}return"/"}(),o[e]=t),t}})),i.register("4PVnu",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("jmcU1")})),i.register("3HAXF",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("kVkr4")})),i.register("jNhZQ",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("jt8ay")})),i.register("LWFVN",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("hqwy4")})),i.register("bDzj8",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("dEgAi")})),i.register("7XdLW",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("c83u5")})),i.register("eWAjb",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("1zqme")})),i.register("fkQtK",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("7MNNg")})),i.register("2aIow",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("86T2Y")})),i.register("f2Zt1",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("4Ce6H")})),i.register("d2b19",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("cZrAd")})),i.register("eUyrr",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("hmvMk")})),i.register("3Liad",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("4HV7D")})),i.register("3bgJy",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("3MWgr")})),i.register("2ZyOZ",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("3UOoh")})),i.register("5YUaF",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("c7hxB")})),i.register("bGMYa",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("4eSbS")})),i.register("9i0rG",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("6V4jJ")})),i.register("bx0Ns",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("c6RDh")})),i.register("1tRSL",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("dFF5O")})),i.register("kQggc",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("i13zL")})),i.register("9IOZm",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("e22ps")})),i.register("bhh99",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("8Yb3j")})),i.register("1s2U8",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("7LcVi")})),i.register("3DCkv",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("caiHs")})),i.register("5X43A",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("16B1S")})),i.register("6CjfC",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("3INzm")})),i.register("1lvoB",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("15HmH")})),i.register("4YNxx",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("7xL8N")})),i.register("cQ7Bf",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("6VI17")})),i.register("6a1uK",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("1fTCZ")})),i.register("gckS0",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("goWgX")})),i.register("e7vrG",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("ectuW")})),i.register("68YyE",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("4AFYP")})),i.register("5D6Ok",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("20Fya")})),i.register("5DuEq",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("hrurV")})),i.register("27uKx",(function(e,t){e.exports=i("kPq84").getBundleURL("1Lmeo")+"../"+i("bXuNP").resolve("g8qOA")}));
//# sourceMappingURL=index.1be31567.js.map
