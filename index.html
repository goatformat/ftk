<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#FFF"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="Library FTK"><meta name="description" content="Library FTK"><link rel="apple-touch-icon" sizes="180x180" href="/ftk/apple-touch-icon.e66167d4.png"><link rel="icon" type="image/png" sizes="32x32" href="/ftk/favicon-32x32.74cd82ec.png"><link rel="icon" type="image/png" sizes="16x16" href="/ftk/favicon-16x16.9eb5a5b6.png"><link rel="manifest" href="/ftk/manifest.webmanifest"><title>Library FTK - Simulator</title><style>:root{--bg-color:#fff;--fg-color:#000;--link-color:#00e;--link-active-color:red;--link-visited-color:#551a8b}[data-theme=dark]{--bg-color:#000;--fg-color:#ddd;--link-color:#9e9eff;--link-active-color:#ff9e9e;--link-visited-color:#d0adf0}body{background-color:var(--bg-color);color:var(--fg-color);font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:1.4em;margin:4em auto;max-width:690px;overflow-x:hidden}code,var{font-family:Roboto Mono,Monaco,monospace;font-style:normal}a{color:var(--link-color)}a:active{color:var(--link-active-color)}a:visited{color:var(--link-visited-color)}h1{font-size:3em;margin-bottom:.8em;text-align:center}h1 a,h2 a{color:inherit;text-decoration:inherit}img{margin-left:50%;max-width:80vw;transform:translateX(-50%)}@media(max-width:768px){body{font-size:.85em;margin:2em auto;max-width:95%}img{margin-left:auto;transform:none}}</style></head><body> <h1 id="library-ftk">Library FTK</h1> <p align="center"> <img alt="Library FTK Decklist" src="https://user-images.githubusercontent.com/117249/138643376-0218feb1-981a-4810-8c5e-df96314b85da.png"> </p> <p>"<a href="https://www.goatformat.com/whatisgoat.html">Goat Format</a>" refers to a legacy <a href="https://en.wikipedia.org/wiki/Yu-Gi-Oh!_Trading_Card_Game">Yu-Gi-Oh! TCG</a> format that existed in 2005, named after the prevalance of the card <a href="https://yugioh.fandom.com/wiki/Scapegoat">Scapegoat</a> during this time period. It is a format that is still widely played today using the same card pool, ruleset, and banlist, though in the intervening years a variety of new decks have surfaced, perhaps the most notorious of which being "<a href="https://www.goatformat.com/library-ftk.html"><strong>Library FTK</strong></a>". "<a href="https://yugioh.fandom.com/wiki/First_Turn_Kill">FTK</a>" decks are historically stigmatized by the community as they typically TODO</p> <p>The project exists to fully explore "Library FTK"</p> <h2 id="overview">Overview</h2> <p>https://en.wikipedia.org/wiki/Yu-Gi-Oh!<em>Trading</em>Card_Game#Gameplay</p> <p>TODO how yugioh works, how Library alters it.</p> <h3 id="cards">Cards</h3> <ul> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/A_Feather_of_the_Phoenix">A Feather of the Phoenix</a></strong> (<code>F</code>): A Feather of the Phoenix serves three main purposes - to draw cards by reusing the "power spells" (Graceful Charity / Pot of Greed / Giant Trunade), to stack the top of the deck when setting up for the Reversal Quiz win condition, or to recover one of the pieces of the win condition (Black Pendant / Reversal Quiz) if they were discarded early on. Ideally where possible a monster should be discarded for A Feather of the Phoenix's cost to that it can be brought back with Premature Burial and get around the summoning limit. A Feather of the Phoenix is relatively useful throughout the game, though care must be taken to ensure that there is a way to draw the card that gets stacked on the deck.</li> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/Archfiend%27s_Oath">Archfiend's Oath</a></strong> (<code>O</code>): Archfiend's Oath allows for drawing cards and for paying lifepoints, both of which are critical for acheiving the deck's win condition. Archfiend's Oath has several important synergies in the deck - Convulsion of Nature and A Feather of the Phoenix allows us to know which card to declare, and Giant Trunade allows us to reuses Archfiend's Oath's effect multiple times in a turn (racking up Spell Counter's as you do). Even if we are not aware of the top card, paying to activate Archfiend's Oath's effect can be advantageous purely to get closer to the required 500 LP threshold to activate the win condition and to thin the deck (guessing the top card is also an option, either based on the statistically likely result or based on what would be most useful at that stage). It is important to note that Archfiend's Oath can also be played purely as a reusable way to increment Spell Counter's without needing to use its actual effect of paying to draw a card if lifepoints are a concern, though if starting from 8000 LP there's usually more than enough to not have to worry about whether or not to pay to draw as well (in the late game its often the case that there is more draw power than cards left in the deck, and finding a way to spend lifepoints without <a href="https://yugioh.fandom.com/wiki/Deck_out">decking out</a> is a concern).</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Black_Pendant">Black Pendant</a></strong> (<code>B</code>): Black Pendant is a required piece of the win condition, as if it is equipped to a monster on the field when Reversal Quiz is activated it will inflict the finishing blow to the opponent. However, it can also serve a purpose in the mid-game, as once equipped to a monster it stays on the field, meaning it can be returned to the hand by Giant Trunade, effectively making it a resuable source of counters on any face-up Royal Magic Library cards. In the early game its generally safe to discard as we will usually be able to use A Feather of the Phoenix or Spell Reproduction to get it back, though there are usually less valuable spell cards to look to discard first.</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Card_Destruction">Card Destruction</a></strong> (<code>C</code>): Card Destruction (and its little brother, Reload) shine primarily at the very beginning of the game as a way to effectively perform a "mulligan" and dig out of a state lacking draw power. Implicitly, the value of Card Destruction depends on the current value of the rest of the hand, with it being most useful when the lowest value cards are all in the hand. If there is a lone Thunder Dragon in hand, discarding it before playing Card Destruction in order to deck thin <em>and</em> get an extra card to draw after playing Card Destruction is almost always optimal. Very few cards make sense to set before playing Card Destruction - if there is a draw spell in the hand it should usually be played first before throwing away the hand, though setting Giant Trunade or a partial piece of the Archfiend's Oath / Convulsion of Nature draw engine can make sense. Card Destruction inherently involves risk, but is incredibly powerful for being able to rescue games which would otherwise not be winnable.</li> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/Convulsion_of_Nature">Convulsion of Nature</a></strong> (<code>V</code>):</li> <li>reusable 1/3</li> <li>increases power of shuffle cards (can force reshuffles to get better draws)</li> <li>large booster for archfiends oath</li> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/Giant_Trunade">Giant Trunade</a></strong> (<code>T</code>):</li> <li>can reuse all current activated spell cards = always want to get spell counters as high as possible by playing all continuous beforehand</li> <li>should be able to judge next state after trunade was played to tell how positive</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Graceful_Charity">Graceful Charity</a></strong> (<code>G</code>):</li> <li>can use to get more cards and get rid of bad cards = ie. graceful - 2 TD = +3</li> <li><strong>2 × <a href="https://yugioh.fandom.com/wiki/Level_Limit_-_Area_B">Level Limit - Area B</a></strong> (<code>A</code>): Level Limit</li> <li>Area B is one of the least valuable Spell cards, serving simply as a reusable way to increment Spell Counters on any face-up Royal Magical Library cards, however, in the event the deck is not able to win on the first turn Level Limit - Area B exists as the sole source of protection for your monsters and lifepoints. Level Limit - Area B is usually going to end up as one of the best cards to discard for cost when making a push for game.</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Pot_of_Greed">Pot of Greed</a></strong> (<code>P</code>): Renowned for being one of the most complicated cards to understand in Yu-Gi-Oh!, Pot of Greed is also one of the most powerful cards in the deck and is often a good target for A Feather of the Phoenix or Spell Reproduction's recursion (provided Graceful Charity isn't in play and Giant Trunade looping isn't an option). Like with the other draw spells it can be saved for when the draw engine stalls out, though generally is better to play sooner as getting it in to the Graveyard early on allows for reuse potential.</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Premature_Burial">Premature Burial</a></strong> (<code>K</code>): Premature Burial is useful for getting multiple Royal Magical Library cards on the field, as its effect to Special Summon monsters bypasses the regular Normal Summon limit. It can also be reused via Great Trunade and its 800 LP cost is helpful for getting in range of the win condition. Premature Burial depends on having monsters in the Graveyard, so prioritizing discarding monsters via Card Destruction or A Feather of the Phoenix is important for unlocking Premature Burial's potential.</li> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/Reload">Reload</a></strong> (<code>R</code>): Like with Card Destruction, Reload provides the ability to "mulligan" the hand, with the caveat that it comes at the cost of a card and has the potential to redraw the same cards. Like with Card Destruction it is generally most useful early game in order to set up a draw engine, but it often has more utility (though still limited) than Card Destruction in the late game as at that point the uncertainty about what the possible cards could be post-Reload becomes fairly low and it's generally possible to make a pretty good evaluation about whether the cards remaining in the deck are better than the hand. Because Reload does not destroy cards it is still possibly advantageous to play it in scenarios where Card Destruction would result in too much lost value. Similar strategies around deck thinning pre-activation, grabbing both Thunder Dragon cards, and setting cards before playing that are discussed above with Card Destruction also apply to Reload.</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Reversal_Quiz">Reversal Quiz</a></strong> (<code>Q</code>): Reversal Quiz has exactly zero value (possibly negative value, given that playing it prematurely will guarantee a loss except in very situational multi-turn lines of play) until the very last action of the game in which case it serves as the win condition. As such, Reversal Quiz is usually very safe to discard in the early game as it doesn't serve a purpose and there are multiple ways to recover it when needed (late game there are generally much more resources available to fufill the cost of the recursion spells).</li> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/Royal_Magical_Library">Royal Magical Library</a></strong> (<code>L</code>): The eponymous hero of the deck (though "Library FTK" is sometimes know as a "<a href="https://yugioh.fandom.com/wiki/Reversal_Quiz_OTK">Reversal Quiz OTK</a>", and Giant Trunade is arguably the true star of the show), summoning Royal Magical Library to the field as soon as possible is pretty much the name of the game at the beginning. Due to the amount of Spell cards being played in the deck a single Royal Magical Library can be responsible for drawing 5-10 cards (or more) over the course of the game. Multiple Royal Magical Library cards can be established via Premature Burial, an event which all but guarantees victory most of the time (because of this, unlike other monsters Royal Magical Library also has some value in the hand even after a monster has been summoned as it is the highest value discard target of any card in the deck). TODO</li> <li>monsters need to have some value on the field to incentvize summoning/discarding</li> <li>when at 3/3, need to be</li> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/Spell_Reproduction">Spell Reproduction</a></strong> (<code>Z</code>):</li> <li>useful for bringing back high value draw spells, win con pieces, trunade, premature</li> <li>better late game when things in graveyard</li> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/Thunder_Dragon">Thunder Dragon</a></strong> (<code>Y</code>):</li> <li>can force shuffles</li> <li>value = deck thinning (n/N)</li> <li>can force shuffles</li> <li>useful for card D</li> <li>can tribute over to proc Sangan brought back via Premature</li> <li><strong>3 × <a href="https://yugioh.fandom.com/wiki/Toon_Table_of_Contents">Toon Table of Contents</a></strong> (<code>X</code>):</li> <li>value = deck thining (n/N)</li> <li>can fetch reusable 1/3 + 1000 LP card</li> <li>wait for library</li> <li>can force shuffles</li> <li><strong>2 × <a href="https://yugioh.fandom.com/wiki/Toon_World">Toon World</a></strong> (<code>W</code>): The search target for Toon Table of Contents, Toon World also serves as the most efficient way to resuably pay the lifepoints required for the win condition (while accumulating Spell Counters) via its 1000 LP activation cost. Toon World should be played relatively sparingly in the early game as lifepoints might be needed as a resource to pay for Archfiend's Oath's cost, though in the late game it is often the case that one or more Toon World cards will be recurred via Giant Trunade to quickly pay the required lifepoints necessary to win. One Toon World is usually sufficient and additional copies are generally safe to discard if necessary.</li> <li><strong>2 × <a href="https://yugioh.fandom.com/wiki/Upstart_Goblin">Upstart Goblin</a></strong> (<code>U</code>): Purely used for deck thinning, with no downsides since the opponent's lifepoints don't matter for the win condition to work. There isn't really a <em>wrong</em> time to play Upstart Goblin, though it is likely to be most valuable when the draw engine is otherwise stuck as it can potentially unblock things.</li> </ul> <h4 id="options">Options</h4> <p>One of the following cards needs to be selected to bring the deck up to mininum deck size of 40 cards. Cyber Jar is likely to be most useful in actual gameplay, but for the purposes of the a single turn interaction-less playout only Different Dimension Capsule (and theoretically Sangan) have any positive utility:</p> <ul> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Cyber_Jar">Cyber Jar</a></strong> (<code>J</code>): Cyber Jar has no potential to activate its Flip Effect during the first turn meaning it is effectively a vanilla monster in terms of the FTK (which still has marginal utility when played face-up as serving as the target to equip Black Pendant to for the win condition). However, in multi-turn playouts Cyber Jar can be tremendously powerful as it serves as a draw-5 and a way to get multiple Royal Magical Library cards on the field all at once, bypassing summoning restrictions. If there is no way to win on the first turn, ending with a set Cyber Jar is probably the best option for being able to go off on the next turn.</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Different_Dimension_Capsule">Different Dimension Capsule</a></strong> (<code>D</code>): Different Dimension Capsule effectively functions as a reusable deck-thinning mechanism. While theoretically Different Dimension Capsule could be used for its intended purpose to eventually retrieve the card it banished, in actuality the game will be over far before the banished card would return. Instead, Different Dimension Capsule can be returned to the hand via Giant Trunade to repeatedly banish the lowest value card from the deck (forcing shuffles and incrementing Spell Counters as it does so). This can also be helpful in the end-game for banishing the remaining Monster cards from the deck to be able to resolve Reversal Quiz successfully.</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Heavy_Storm">Heavy Storm</a></strong> (<code>H</code>): When attempting to execute the FTK, Heavy Storm is strictly the worst card after Royal Decree - at best it is worth some Spell Counters and frees up Spell &amp; Trap Zones, though at the cost of wiping out useful resources. However, Heavy Storm is one of the cards most likely to be sided in for Games 2 and 3, as seeing it in the early game can allow you to wipe out an opponent's opportunities for interruption (eg. in the form of <a href="https://yugioh.fandom.com/wiki/Solemn_Judgment">Solemn Judgment</a>) that might otherwise disrupt your game plan.</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Royal_Decree">Royal Decree</a></strong> (<code>E</code>): The sole Trap card, like Heavy Storm, Royal Decree is worse than useless when attempting an FTK (it serves only as discard fodder, as it can't increment Spell Counters and permanently blocks off one of the Spell &amp; Trap Zones), though is potentially game winning if sided in for Games 2 and 3 as it can prevent forms of disruption like Solemn Judgment and protect against other alternative win-condition decks like <a href="https://yugioh.fandom.com/wiki/Burn_Deck">Burn</a>. While up to 3 Royal Decree cards can be played, given the power of the deck to be able to draw through the entire deck in a single turn it is rarely necessary to ever play more than one. In general, Royal Decree is discouraged given the handicap it inflicts - given the base win rate of the deck attempting to win faster is usually more useful than attempting to protect against losing.</li> <li><strong>1 × <a href="https://yugioh.fandom.com/wiki/Sangan">Sangan</a></strong> (<code>S</code>): Sangan serves as a way to search for a Royal Magical Library, though given only one Monster may be summoned per turn this has limited value in single-turn play outside of incredibly far-fetched lines of play (ie. returning a discarded Sangan via Premature Burial to Tribute Summon a Thunder Dragon to search for a Royal Magical Library that can then be brought back by Premature Burial). Cyber Jar is generally more useful in open play as getting a chance to activate its effect is more likely and it results in a bigger payoff, though in terms of a single-turn interaction-less simulation Sangan has marginally more utility than Cyber Jar's zero. One additional possible use for Sangan is to serve as the necessary Monster to equip Black Pendant to in order to meet the requirements for the win condition, though it's also incredibly likely that the win condition is reached without seeing any Royal Magical Library that couldn't be summoned instead.</li> </ul> <h2 id="heuristics">Heuristics</h2> <p>In all cases, keep set for in location, same ID in same location = same score? combination of immediate value + potential value - trunade with td td td sangan in hand is low value, but with oath oath oath convulsion its very high value deck thin = value depends on value of cards left in deck + how it helps get to win condition everything is expected value +1/3 not that useful if the card to be drawn isn't very good</p> <p>http://idm-lab.org/bib/abstracts/papers/ijcai05a.pdf https://www.cs.unh.edu/~ruml/cs730/paper-examples/wilt.pdf</p> <p>Different Dimension Capsule is relatively problematic for search as it explodes the state space with its high branching factor. Reload and Card Destruction as well</p> <h2 id="future-work">Future Work</h2> <h3 id="performance">Performance</h3> <ul> <li>Smi optimization: scores and IDs as smis (need to set bits instead of creating strings)</li> <li>DCE of trace (avoid creating the strings in the first place to avoid memory churn) https://github.com/terser/terser#conditional-compilation</li> </ul> <h3 id="multi-turn">Multi-turn</h3> <h3 id="probabilistic">Probabilistic</h3> <h3 id="monte-carlo-tree-search-mcts">Monte Carlo Tree Search (MCTS)</h3> <ul> <li>fully random MCTS selections dont work, need to be heuristic guided to find path at all</li> <li>random playouts part of MCTS involves not knowing what true starting state is</li> <li>play N</li> <li>full length MCTS (search from root multiple times with different shuffles)</li> </ul> <h3 id="simulator-ui">Simulator UI</h3> <ul> <li>"solitaire"</li> <li>ui generates only legal games, lets you play out (or reset/undo)</li> <li>click and play available options, auto tracks counters and convulsion etc = fully automated simulator for very confined space</li> </ul> <hr> <p>TODO stats</p> <p>TODO change image to cyber jar, default do cyber jar</p> <ul> <li>theoretical win rates</li> <li>comparing options</li> <li>chance of going off on turn 1 (2, 3, etc)</li> <li>with various cards</li> <li>what (combination) cards needed in hand to go off</li> <li>optimal strategies (determine flow chart for human play?)</li> </ul> <h2 id="design">Design</h2> <ul> <li>consistent RNG (aggregate over N games, can't play out from every possible seed unless doing MCTS)</li> <li>minimal state representation</li> <li>equips</li> <li>insertion short (lists &lt; 40)</li> <li>all assumptions hardcoded (limited card pool = only 2 equips, all interactions can be considered, sangan)</li> <li>card by card highlights</li> <li>symmetry (also cull redundant states like Set)</li> <li>state generation</li> <li>state space (heuristic ranking, BULB search)</li> <li>"known" final card for Oath/Quiz</li> </ul> <p>counters</p> <p>https://www.youtube.com/watch?v=E2h7NmsiJUI https://www.youtube.com/watch?v=xwuBMx4Mca0</p> <p>Side Deck</p> <p>attacking with library into set cards</p> <p>Prohibition (Giant Trunade), Cursed Seal of the Forbidden Spell, Cyber-Stein =&gt; Dark Balter the Terrible, Last Warrior, Ojama Trio</p> <a href="/ftk/sim/index.html"></a><a href="/ftk/trace/index.html"></a> <script type="module">var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},t={},n=e.parcelRequireb545;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in t){var n=t[e];delete t[e];var i={id:e,exports:{}};return r[e]=i,n.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,r){t[e]=r},e.parcelRequireb545=n);var i;function o(e){document.documentElement.setAttribute("data-theme",e)}function a(e){o(e.matches?"dark":"light")}n.register("kPq84",(function(e,r){var t,n,i,o,a;t=e.exports,n="getBundleURL",i=()=>a,o=e=>a=e,Object.defineProperty(t,n,{get:i,set:o,enumerable:!0,configurable:!0});var c={};function d(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}a=function(e){var r=c[e];return r||(r=function(){try{throw new Error}catch(r){var e=(""+r.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return d(e[2])}return"/"}(),c[e]=r),r}})),i=n("kPq84").getBundleURL("2X12B")+"service-worker.js",navigator.serviceWorker.register(i,{scope:undefined});const c=window.matchMedia("(prefers-color-scheme: dark)");try{c.addEventListener("change",a)}catch(e){c.addListener(a)}o(c.matches?"dark":"light");</script> </body></html>